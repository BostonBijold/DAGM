/*! For license information please see main.90aa2630.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&!_.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+C(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),I(a,t,i,"",function(e){return e})):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+C(o=e[c],c);l+=I(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,i,u=s+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},j={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,P(k);else{var t=r(u);null!==t&&j(x,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&j(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,E=null,T=-1,N=5,C=-1;function I(){return!(t.unstable_now()-C<N)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?S():(_=!1,E=null)}}else _=!1}if("function"===typeof b)S=function(){b(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=A,S=function(){R.postMessage(null)}}else S=function(){y(A,0)};function P(e){E=e,_||(_=!0,S())}function j(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,j(x,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,P(k))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),N=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case E:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,_e=null;function Ee(e){if(e=xi(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=Si(t),ke(e.stateNode,e.type,t))}}function Te(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Ne(){if(Se){var e=Se,t=_e;if(_e=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Se||null!==_e)&&(Ie(),Ne())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=Si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ue){Pe=!1}function Oe(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,a,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return We(i),e;if(a===r)return We(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,St,_t,Et,Tt=!1,Nt=[],Ct=null,It=null,At=null,Dt=new Map,Rt=new Map,Pt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=wi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==It&&Ut(It)&&(It=null),null!==At&&Ut(At)&&(At=null),Dt.forEach(Ft),Rt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Nt.length){zt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==It&&zt(It,e),null!==At&&zt(At,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var Ht=w.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function Kt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var s=xi(i);if(null!==s&&xt(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=wi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function an(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var on,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(un),hn=M({},un,{view:0,detail:0}),fn=an(hn),pn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=an(pn),gn=an(M({},pn,{dataTransfer:0})),yn=an(M({},hn,{relatedTarget:0})),vn=an(M({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=M({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=an(bn),xn=an(M({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Tn(){return En}var Nn=M({},hn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Nn),In=an(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Dn=an(M({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=an(Pn),On=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Un=u&&"TextEvent"in window&&!Mn,Fn=u&&(!Ln||Mn&&8<Mn&&11>=Mn),Vn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Qr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Xn(e){Vr(e,0)}function Jn(e){if(G(ki(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(u){var er;if(u){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),Yn=Qn=null)}function ir(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];Gn(t,Yn,e,xe(e)),De(Xn,t)}}function sr(e,t,n){"focusin"===e?(rr(),Yn=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function or(e,t){if("click"===e)return Jn(t)}function lr(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!cr(e[i],t[i]))return!1}return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&mr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=hr(n,s);var a=hr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yr=u&&"documentMode"in document&&11>=document.documentMode,vr=null,br=null,wr=null,xr=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==vr||vr!==Q(r)||("selectionStart"in(r=vr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&ur(wr,r)||(wr=r,0<(r=Qr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},Er={},Tr={};function Nr(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Er[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=Nr("animationend"),Ir=Nr("animationiteration"),Ar=Nr("animationstart"),Dr=Nr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Rr.set(e,t),l(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Lr=Pr[Or];jr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}jr(Cr,"onAnimationEnd"),jr(Ir,"onAnimationIteration"),jr(Ar,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Dr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ur=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,o,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function zr(e,t){var n=t[yi];void 0===n&&(n=t[yi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Hr]){e[Hr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Ur.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=qt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=wi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}De(function(){var r=s,i=xe(n),a=[];e:{var o=Rr.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case Ir:case Ar:l=vn;break;case Dr:l=Dn;break;case"scroll":l=fn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Re(p,h))&&u.push(Gr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!wi(c)&&!c[gi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?wi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:ki(l),f=null==c?o:ki(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,wi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,m=h;m;m=Yr(m))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)h=Yr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yr(u),h=Yr(h)}u=null}else u=null;null!==l&&Xr(a,o,l,u,!1),null!==c&&null!==d&&Xr(a,d,c,u,!0)}if("select"===(l=(o=r?ki(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$n;else if(Kn(o))if(Zn)g=lr;else{g=ar;var y=sr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?ki(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(vr=y,br=r,wr=null);break;case"focusout":wr=br=vr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,kr(a,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":kr(a,n,i)}var v;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(v=tn()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Wn=!0)),0<(y=Qr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Hn(n))&&(b.data=v))),(v=Un?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Ln&&Bn(e,t)?(e=tn(),en=Zt=Jt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Vr(a,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Re(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Re(n,s))&&a.unshift(Gr(n,l,o)):i||null!=(l=Re(n,s))&&a.push(Gr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace($r,"")}function ei(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(s(425))}function ti(){}var ni=null,ri=null;function ii(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var si="function"===typeof setTimeout?setTimeout:void 0,ai="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,li="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ci)}:si;function ci(e){setTimeout(function(){throw e})}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function di(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),pi="__reactFiber$"+fi,mi="__reactProps$"+fi,gi="__reactContainer$"+fi,yi="__reactEvents$"+fi,vi="__reactListeners$"+fi,bi="__reactHandles$"+fi;function wi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hi(e);null!==e;){if(n=e[pi])return n;e=hi(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[pi]||e[gi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Si(e){return e[mi]||null}var _i=[],Ei=-1;function Ti(e){return{current:e}}function Ni(e){0>Ei||(e.current=_i[Ei],_i[Ei]=null,Ei--)}function Ci(e,t){Ei++,_i[Ei]=e.current,e.current=t}var Ii={},Ai=Ti(Ii),Di=Ti(!1),Ri=Ii;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ji(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ni(Di),Ni(Ai)}function Li(e,t,n){if(Ai.current!==Ii)throw Error(s(168));Ci(Ai,t),Ci(Di,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return M({},n,r)}function Ui(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ri=Ai.current,Ci(Ai,e),Ci(Di,Di.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ni(Di),Ni(Ai),Ci(Ai,e)):Ni(Di),Ci(Di,n)}var Vi=null,zi=!1,Bi=!1;function Hi(e){null===Vi?Vi=[e]:Vi.push(e)}function Wi(){if(!Bi&&null!==Vi){Bi=!0;var e=0,t=bt;try{var n=Vi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,zi=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ge(Ze,Wi),i}finally{bt=t,Bi=!1}}return null}var qi=[],Ki=0,Gi=null,Qi=0,Yi=[],Xi=0,Ji=null,$i=1,Zi="";function es(e,t){qi[Ki++]=Qi,qi[Ki++]=Gi,Gi=e,Qi=t}function ts(e,t,n){Yi[Xi++]=$i,Yi[Xi++]=Zi,Yi[Xi++]=Ji,Ji=e;var r=$i;e=Zi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,$i=1<<32-at(t)+i|n<<i|r,Zi=s+e}else $i=1<<s|n<<i|r,Zi=e}function ns(e){null!==e.return&&(es(e,1),ts(e,1,0))}function rs(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null;for(;e===Ji;)Ji=Yi[--Xi],Yi[Xi]=null,Zi=Yi[--Xi],Yi[Xi]=null,$i=Yi[--Xi],Yi[Xi]=null}var is=null,ss=null,as=!1,os=null;function ls(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function cs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,is=e,ss=di(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,is=e,ss=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:$i,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,is=e,ss=null,!0);default:return!1}}function us(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ds(e){if(as){var t=ss;if(t){var n=t;if(!cs(e,t)){if(us(e))throw Error(s(418));t=di(n.nextSibling);var r=is;t&&cs(e,t)?ls(r,n):(e.flags=-4097&e.flags|2,as=!1,is=e)}}else{if(us(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,is=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;is=e}function fs(e){if(e!==is)return!1;if(!as)return hs(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ii(e.type,e.memoizedProps)),t&&(t=ss)){if(us(e))throw ps(),Error(s(418));for(;t;)ls(e,t),t=di(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ss=di(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ss=null}}else ss=is?di(e.stateNode.nextSibling):null;return!0}function ps(){for(var e=ss;e;)e=di(e.nextSibling)}function ms(){ss=is=null,as=!1}function gs(e){null===os?os=[e]:os.push(e)}var ys=w.ReactCurrentBatchConfig;function vs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ws(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&ws(s)===t.type)?((r=i(t,n.props)).ref=vs(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=vs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=vs(e,null,t),n.return=e,n;case k:return(t=Vc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Mc(t,e.mode,n,null)).return=e,t;bs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case k:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);bs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);bs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=a(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(i,d),as&&es(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return as&&es(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),as&&es(i,m),c}function g(i,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),as&&es(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return as&&es(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),as&&es(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&ws(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=vs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((s=Mc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=vs(r,s,a),l.return=r,r=l)}return o(r);case k:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vc(a,r.mode,l)).return=r,r=s}return o(r);case R:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(O(a))return g(r,s,a,l);bs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Fc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ks=xs(!0),Ss=xs(!1),_s=Ti(null),Es=null,Ts=null,Ns=null;function Cs(){Ns=Ts=Es=null}function Is(e){var t=_s.current;Ni(_s),e._currentValue=t}function As(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ds(e,t){Es=e,Ns=Ts=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(Ns!==e)if(e={context:e,memoizedValue:t,next:null},null===Ts){if(null===Es)throw Error(s(308));Ts=e,Es.dependencies={lanes:0,firstContext:e}}else Ts=Ts.next=e;return t}var Ps=null;function js(e){null===Ps?Ps=[e]:Ps.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,js(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ls(e,r)}function Ls(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Us(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ls(e,n)}return null===(i=r.interleaved)?(t.next=t,js(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ls(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,r){var i=e.updateQueue;Ms=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Ms=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ul|=a,e.lanes=a,e.memoizedState=d}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ks={},Gs=Ti(Ks),Qs=Ti(Ks),Ys=Ti(Ks);function Xs(e){if(e===Ks)throw Error(s(174));return e}function Js(e,t){switch(Ci(Ys,t),Ci(Qs,e),Ci(Gs,Ks),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ni(Gs),Ci(Gs,t)}function $s(){Ni(Gs),Ni(Qs),Ni(Ys)}function Zs(e){Xs(Ys.current);var t=Xs(Gs.current),n=le(t,e.type);t!==n&&(Ci(Qs,e),Ci(Gs,n))}function ea(e){Qs.current===e&&(Ni(Gs),Ni(Qs))}var ta=Ti(0);function na(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function ia(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var sa=w.ReactCurrentDispatcher,aa=w.ReactCurrentBatchConfig,oa=0,la=null,ca=null,ua=null,da=!1,ha=!1,fa=0,pa=0;function ma(){throw Error(s(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function ya(e,t,n,r,i,a){if(oa=a,la=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=null===e||null===e.memoizedState?eo:to,e=n(r,i),ha){a=0;do{if(ha=!1,fa=0,25<=a)throw Error(s(301));a+=1,ua=ca=null,t.updateQueue=null,sa.current=no,e=n(r,i)}while(ha)}if(sa.current=Za,t=null!==ca&&null!==ca.next,oa=0,ua=ca=la=null,da=!1,t)throw Error(s(300));return e}function va(){var e=0!==fa;return fa=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ua?la.memoizedState=ua=e:ua=ua.next=e,ua}function wa(){if(null===ca){var e=la.alternate;e=null!==e?e.memoizedState:null}else e=ca.next;var t=null===ua?la.memoizedState:ua.next;if(null!==t)ua=t,ca=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ca=e).memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},null===ua?la.memoizedState=ua=e:ua=ua.next=e}return ua}function xa(e,t){return"function"===typeof t?t(e):t}function ka(e){var t=wa(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ca,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((oa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,la.lanes|=d,Ul|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,cr(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,la.lanes|=a,Ul|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=wa(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);cr(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function Ea(e,t){var n=la,r=wa(),i=t(),a=!cr(r.memoizedState,i);if(a&&(r.memoizedState=i,xo=!0),r=r.queue,Ma(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ua&&1&ua.memoizedState.tag){if(n.flags|=2048,Ra(9,Na.bind(null,n,r,i,t),void 0,null),null===Dl)throw Error(s(349));0!==(30&oa)||Ta(n,t,i)}return i}function Ta(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},la.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Na(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Aa(e)}function Ca(e,t,n){return n(function(){Ia(t)&&Aa(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cr(e,n)}catch(r){return!0}}function Aa(e){var t=Ls(e,1);null!==t&&ic(t,e,1,-1)}function Da(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,la,e),[t.memoizedState,e]}function Ra(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},la.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return wa().memoizedState}function ja(e,t,n,r){var i=ba();la.flags|=e,i.memoizedState=Ra(1|t,n,void 0,void 0===r?null:r)}function Oa(e,t,n,r){var i=wa();r=void 0===r?null:r;var s=void 0;if(null!==ca){var a=ca.memoizedState;if(s=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=Ra(t,n,s,r))}la.flags|=e,i.memoizedState=Ra(1|t,n,s,r)}function La(e,t){return ja(8390656,8,e,t)}function Ma(e,t){return Oa(2048,8,e,t)}function Ua(e,t){return Oa(4,2,e,t)}function Fa(e,t){return Oa(4,4,e,t)}function Va(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4,4,Va.bind(null,t,e),n)}function Ba(){}function Ha(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&oa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(cr(n,t)||(n=mt(),la.lanes|=n,Ul|=n,e.baseState=!0),t)}function Ka(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=aa.transition;aa.transition={};try{e(!1),t()}finally{bt=n,aa.transition=r}}function Ga(){return wa().memoizedState}function Qa(e,t,n){var r=rc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ja(t,n);else if(null!==(n=Os(e,t,n,r))){ic(n,e,r,nc()),$a(n,t,r)}}function Ya(e,t,n){var r=rc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ja(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,cr(o,a)){var l=t.interleaved;return null===l?(i.next=i,js(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Os(e,t,i,r))&&(ic(n,e,r,i=nc()),$a(n,t,r))}}function Xa(e){var t=e.alternate;return e===la||null!==t&&t===la}function Ja(e,t){ha=da=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Za={readContext:Rs,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},eo={readContext:Rs,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ja(4194308,4,Va.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qa.bind(null,la,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Da,useDebugValue:Ba,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Da(!1),t=e[0];return e=Ka.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=la,i=ba();if(as){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Dl)throw Error(s(349));0!==(30&oa)||Ta(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,La(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Ra(9,Na.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Dl.identifierPrefix;if(as){var n=Zi;t=":"+t+"R"+(n=($i&~(1<<32-at($i)-1)).toString(32)+n),0<(n=fa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},to={readContext:Rs,useCallback:Ha,useContext:Rs,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Ua,useLayoutEffect:Fa,useMemo:Wa,useReducer:ka,useRef:Pa,useState:function(){return ka(xa)},useDebugValue:Ba,useDeferredValue:function(e){return qa(wa(),ca.memoizedState,e)},useTransition:function(){return[ka(xa)[0],wa().memoizedState]},useMutableSource:_a,useSyncExternalStore:Ea,useId:Ga,unstable_isNewReconciler:!1},no={readContext:Rs,useCallback:Ha,useContext:Rs,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Ua,useLayoutEffect:Fa,useMemo:Wa,useReducer:Sa,useRef:Pa,useState:function(){return Sa(xa)},useDebugValue:Ba,useDeferredValue:function(e){var t=wa();return null===ca?t.memoizedState=e:qa(t,ca.memoizedState,e)},useTransition:function(){return[Sa(xa)[0],wa().memoizedState]},useMutableSource:_a,useSyncExternalStore:Ea,useId:Ga,unstable_isNewReconciler:!1};function ro(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function io(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=Vs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(ic(t,e,i,r),Bs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=Vs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(ic(t,e,i,r),Bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),i=Vs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zs(e,i,r))&&(ic(t,e,r,n),Bs(t,e,r))}};function ao(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,s))}function oo(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(i=ji(t)?Ri:Ai.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function lo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function co(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Us(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Rs(s):(s=ji(t)?Ri:Ai.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(io(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&so.enqueueReplaceState(i,i.state,null),Ws(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function uo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var po="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Vs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Gl=r),fo(0,t)},n}function go(e,t,n){(n=Vs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){fo(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new po;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Vs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wo=w.ReactCurrentOwner,xo=!1;function ko(e,t,n,r){t.child=null===e?Ss(t,null,n,r):ks(t,e.child,n,r)}function So(e,t,n,r,i){n=n.render;var s=t.ref;return Ds(t,i),r=ya(e,t,n,r,s,i),n=va(),null===e||xo?(as&&n&&ns(t),t.flags|=1,ko(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ko(e,t,i))}function _o(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||jc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Eo(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Ko(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ur(s,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ko(e,t,i);0!==(131072&e.flags)&&(xo=!0)}}return Co(e,t,n,r,i)}function To(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ol,jl),jl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ol,jl),jl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Ol,jl),jl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Ol,jl),jl|=r;return ko(e,t,i,n),t.child}function No(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,i){var s=ji(n)?Ri:Ai.current;return s=Pi(t,s),Ds(t,i),n=ya(e,t,n,r,s,i),r=va(),null===e||xo?(as&&r&&ns(t),t.flags|=1,ko(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ko(e,t,i))}function Io(e,t,n,r,i){if(ji(n)){var s=!0;Ui(t)}else s=!1;if(Ds(t,i),null===t.stateNode)qo(e,t),oo(t,n,r),co(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Pi(t,c=ji(n)?Ri:Ai.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&lo(t,a,r,c),Ms=!1;var h=t.memoizedState;a.state=h,Ws(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Di.current||Ms?("function"===typeof u&&(io(t,n,u,r),l=t.memoizedState),(o=Ms||ao(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ro(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Pi(t,l=ji(n)?Ri:Ai.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&lo(t,a,r,l),Ms=!1,h=t.memoizedState,a.state=h,Ws(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||Di.current||Ms?("function"===typeof f&&(io(t,n,f,r),p=t.memoizedState),(c=Ms||ao(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ao(e,t,n,r,s,i)}function Ao(e,t,n,r,i,s){No(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),Ko(e,t,s);r=t.stateNode,wo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ks(t,e.child,null,s),t.child=ks(t,null,o,s)):ko(e,t,o,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Do(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),Js(e,t.containerInfo)}function Ro(e,t,n,r,i){return ms(),gs(i),t.flags|=256,ko(e,t,n,r),t.child}var Po,jo,Oo,Lo,Mo={dehydrated:null,treeContext:null,retryLane:0};function Uo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,i=t.pendingProps,a=ta.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ci(ta,1&a),null===e)return ds(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Uc(l,i,0,null),e=Mc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Uo(n),t.memoizedState=Mo,e):Vo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=ho(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(a=Mc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ks(t,e.child,null,o),t.child.memoizedState=Uo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=ho(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=Dl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ls(e,i),ic(r,e,i,-1))}return yc(),zo(e,t,o,r=ho(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ss=di(i.nextSibling),is=t,as=!0,os=null,null!==e&&(Yi[Xi++]=$i,Yi[Xi++]=Zi,Yi[Xi++]=Ji,$i=e.id,Zi=e.overflow,Ji=t),t=Vo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Oc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Uo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,i}return e=(o=e.child).sibling,i=Oc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vo(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&gs(r),ks(t,e.child,null,n),(e=Vo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),As(e.return,t,n)}function Ho(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Wo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ko(e,t,r.children,n),0!==(2&(r=ta.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ta,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===na(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ho(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===na(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ho(t,!0,n,null,s);break;case"together":Ho(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ko(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(rs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return ji(t.type)&&Oi(),Qo(t),null;case 3:return r=t.stateNode,$s(),Ni(Di),Ni(Ai),ia(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==os&&(lc(os),os=null))),jo(e,t),Qo(t),null;case 5:ea(t);var i=Xs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Qo(t),null}if(e=Xs(Gs.current),fs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[pi]=t,r[mi]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":ie(r,a),zr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&ei(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&ei(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=ti)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pi]=t,e[mi]=r,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ti)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Xs(Ys.current),Xs(Gs.current),fs(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(a=r.nodeValue!==n)&&null!==(e=is))switch(e.tag){case 3:ei(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ei(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Qo(t),null;case 13:if(Ni(ta),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==ss&&0!==(1&t.mode)&&0===(128&t.flags))ps(),ms(),t.flags|=98560,a=!1;else if(a=fs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[pi]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),a=!1}else null!==os&&(lc(os),os=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ta.current)?0===Ll&&(Ll=3):yc())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return $s(),jo(e,t),null===e&&Wr(t.stateNode.containerInfo),Qo(t),null;case 10:return Is(t.type._context),Qo(t),null;case 19:if(Ni(ta),null===(a=t.memoizedState))return Qo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Go(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=na(e))){for(t.flags|=128,Go(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ta,1&ta.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Wl&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=na(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!as)return Qo(t),null}else 2*Je()-a.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ta.current,Ci(ta,r?1&n|2:1&n),t):(Qo(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jl)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xo(e,t){switch(rs(t),t.tag){case 1:return ji(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $s(),Ni(Di),Ni(Ai),ia(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ea(t),null;case 13:if(Ni(ta),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ni(ta),null;case 4:return $s(),null;case 10:return Is(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},jo=function(){},Oo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xs(Gs.current);var s,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ti)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Lo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,$o=!1,Zo="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var rl=!1;function il(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&nl(t,n,s)}i=i.next}while(i!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[mi],delete t[yi],delete t[vi],delete t[bi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ti));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}var hl=null,fl=!1;function pl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:$o||tl(n,t);case 6:var r=hl,i=fl;hl=null,pl(e,t,n),fl=i,null!==(hl=r)&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(hl,n.stateNode));break;case 4:r=hl,i=fl,hl=n.stateNode.containerInfo,fl=!0,pl(e,t,n),hl=r,fl=i;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&nl(n,t,a),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!$o&&(tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Tc(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?($o=(r=$o)||null!==n.memoizedState,pl(e,t,n),$o=r):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function yl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,fl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));ml(a,o,i),hl=null,fl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yl(t,e),bl(e),4&r){try{il(3,e,e.return),sl(3,e)}catch(g){Tc(e,e.return,g)}try{il(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return);break;case 5:if(yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":$(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[mi]=a}catch(g){Tc(e,e.return,g)}}break;case 6:if(yl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Tc(e,e.return,g)}}break;case 3:if(yl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:yl(t,e),bl(e);break;case 13:yl(t,e),bl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Je())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||d,yl(t,e),$o=u):yl(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(el=e,d=e.child;null!==d;){for(h=el=d;null!==el;){switch(p=(f=el).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:tl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(h);continue}}null!==p?(p.return=f,el=p):Sl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Tc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yl(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),dl(e,cl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(e,cl(e),a);break;default:throw Error(s(161))}}catch(Rn){Tc(e,e.return,Rn)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){el=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==el;){var i=el,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Jo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Jo;var c=$o;if(Jo=a,($o=l)&&!c)for(el=i;null!==el;)l=(a=el).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,el=l):_l(i);for(;null!==s;)el=s,xl(s,t,n),s=s.sibling;el=i,Jo=o,$o=c}kl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,el=s):kl(e)}}function kl(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$o)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ro(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}$o||512&t.flags&&al(t)}catch(f){Tc(t,t.return,f)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function Sl(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function _l(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(Rn){Tc(t,n,Rn)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Rn){Tc(t,i,Rn)}}var s=t.return;try{al(t)}catch(Rn){Tc(t,s,Rn)}break;case 5:var a=t.return;try{al(t)}catch(Rn){Tc(t,a,Rn)}}}catch(Rn){Tc(t,t.return,Rn)}if(t===e){el=null;break}var o=t.sibling;if(null!==o){o.return=t.return,el=o;break}el=t.return}}var El,Tl=Math.ceil,Nl=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,Al=0,Dl=null,Rl=null,Pl=0,jl=0,Ol=Ti(0),Ll=0,Ml=null,Ul=0,Fl=0,Vl=0,zl=null,Bl=null,Hl=0,Wl=1/0,ql=null,Kl=!1,Gl=null,Ql=null,Yl=!1,Xl=null,Jl=0,$l=0,Zl=null,ec=-1,tc=0;function nc(){return 0!==(6&Al)?Je():-1!==ec?ec:ec=Je()}function rc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==ys.transition?(0===tc&&(tc=mt()),tc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ic(e,t,n,r){if(50<$l)throw $l=0,Zl=null,Error(s(185));yt(e,n,r),0!==(2&Al)&&e===Dl||(e===Dl&&(0===(2&Al)&&(Fl|=n),4===Ll&&cc(e,Pl)),sc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Wl=Je()+500,zi&&Wi()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Dl?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zi=!0,Hi(e)}(uc.bind(null,e)):Hi(uc.bind(null,e)),li(function(){0===(6&Al)&&Wi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(ec=-1,tc=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Dl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Al;Al|=2;var a=gc();for(Dl===e&&Pl===t||(ql=null,Wl=Je()+500,pc(e,t));;)try{wc();break}catch(l){mc(e,l)}Cs(),Nl.current=a,Al=i,null!==Rl?t=0:(Dl=null,Pl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,pc(e,0),cc(e,r),sc(e,Je()),n;if(6===t)cc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cr(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Ml,pc(e,0),cc(e,r),sc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,Bl,ql);break;case 3:if(cc(e,r),(130023424&r)===r&&10<(t=Hl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=si(Sc.bind(null,e,Bl,ql),t);break}Sc(e,Bl,ql);break;case 4:if(cc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=si(Sc.bind(null,e,Bl,ql),r);break}Sc(e,Bl,ql);break;default:throw Error(s(329))}}}return sc(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Bl,Bl=n,null!==t&&lc(t)),e}function lc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function cc(e,t){for(t&=~Vl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Al))throw Error(s(327));_c();var t=ht(e,0);if(0===(1&t))return sc(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,pc(e,0),cc(e,t),sc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Bl,ql),sc(e,Je()),null}function dc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Wl=Je()+500,zi&&Wi())}}function hc(e){null!==Xl&&0===Xl.tag&&0===(6&Al)&&_c();var t=Al;Al|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(Al=t))&&Wi()}}function fc(){jl=Ol.current,Ni(Ol)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ai(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(rs(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:$s(),Ni(Di),Ni(Ai),ia();break;case 5:ea(r);break;case 4:$s();break;case 13:case 19:Ni(ta);break;case 10:Is(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Dl=e,Rl=e=Oc(e.current,null),Pl=jl=t,Ll=0,Ml=null,Vl=Fl=Ul=0,Bl=zl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ps=null}return e}function mc(e,t){for(;;){var n=Rl;try{if(Cs(),sa.current=Za,da){for(var r=la.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}da=!1}if(oa=0,ua=ca=la=null,ha=!1,fa=0,Cl.current=null,null===n||null===n.return){Ll=1,Ml=t,Rl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vo(o);if(null!==p){p.flags&=-257,bo(p,o,l,0,t),1&p.mode&&yo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){yo(a,u,t),yc();break e}c=Error(s(426))}else if(as&&1&l.mode){var y=vo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bo(y,o,l,0,t),gs(uo(c,l));break e}}a=c=uo(c,l),4!==Ll&&(Ll=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Hs(a,mo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ql||!Ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Hs(a,go(a,l,t));break e}}a=a.return}while(null!==a)}kc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function gc(){var e=Nl.current;return Nl.current=Za,null===e?Za:e}function yc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Dl||0===(268435455&Ul)&&0===(268435455&Fl)||cc(Dl,Pl)}function vc(e,t){var n=Al;Al|=2;var r=gc();for(Dl===e&&Pl===t||(ql=null,pc(e,t));;)try{bc();break}catch(i){mc(e,i)}if(Cs(),Al=n,Nl.current=r,null!==Rl)throw Error(s(261));return Dl=null,Pl=0,Ll}function bc(){for(;null!==Rl;)xc(Rl)}function wc(){for(;null!==Rl&&!Ye();)xc(Rl)}function xc(e){var t=El(e.alternate,e,jl);e.memoizedProps=e.pendingProps,null===t?kc(e):Rl=t,Cl.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,jl)))return void(Rl=n)}else{if(null!==(n=Xo(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Sc(e,t,n){var r=bt,i=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Xl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Dl&&(Rl=Dl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Dc(tt,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var o=bt;bt=1;var l=Al;Al|=4,Cl.current=null,function(e,t){if(ni=Wt,mr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch($t){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ri={focusedElem:e,selectionRange:n},Wt=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ro(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch($t){Tc(t,t.return,$t)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}m=rl,rl=!1}(e,n),vl(n,e),gr(ri),Wt=!!ni,ri=ni=null,e.current=n,wl(n,e,i),Xe(),Al=l,bt=o,Il.transition=a}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Jl=i),a=e.pendingLanes,0===a&&(Ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Gl,Gl=null,e;0!==(1&Jl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Zl?$l++:($l=0,Zl=e):$l=0,Wi()}(e,t,n,r)}finally{Il.transition=i,bt=r}return null}function _c(){if(null!==Xl){var e=wt(Jl),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Jl=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,el=e.current;null!==el;){var a=el,o=a.child;if(0!==(16&el.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(el=u;null!==el;){var d=el;switch(d.tag){case 0:case 11:case 15:il(8,d,a)}var h=d.child;if(null!==h)h.return=d,el=h;else for(;null!==el;){var f=(d=el).sibling,p=d.return;if(ol(d),d===u){el=null;break}if(null!==f){f.return=p,el=f;break}el=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}el=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,el=o;else e:for(;null!==el;){if(0!==(2048&(a=el).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,el=v;break e}el=a.return}}var b=e.current;for(el=b;null!==el;){var w=(o=el).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,el=w;else e:for(o=b;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(k){Tc(l,l.return,k)}if(l===o){el=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,el=x;break e}el=l.return}}if(Al=i,Wi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function Ec(e,t,n){e=zs(e,t=mo(0,t=uo(n,t),1),1),t=nc(),null!==e&&(yt(e,1,t),sc(e,t))}function Tc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=zs(t,e=go(t,e=uo(n,e),1),1),e=nc(),null!==t&&(yt(t,1,e),sc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Pl&n)===n&&(4===Ll||3===Ll&&(130023424&Pl)===Pl&&500>Je()-Hl?pc(e,0):Vl|=n),sc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=nc();null!==(e=Ls(e,t))&&(yt(e,t,n),sc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Dc(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function jc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)jc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Mc(n.children,i,a,t);case _:o=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case I:return(e=Pc(13,n,t,i)).elementType=I,e.lanes=a,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=a,e;case P:return Uc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:o=10;break e;case N:o=9;break e;case C:o=11;break e;case D:o=14;break e;case R:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Us(s),e}function Hc(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(ji(n))return Mi(e,n,t)}return t}function Wc(e,t,n,r,i,s,a,o,l){return(e=Bc(n,r,!0,e,0,s,0,o,l)).context=Hc(null),n=e.current,(s=Vs(r=nc(),i=rc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,i),e.current.lanes=i,yt(e,i,r),sc(e,r),e}function qc(e,t,n,r){var i=t.current,s=nc(),a=rc(i);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Vs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zs(i,t,a))&&(ic(e,i,a,s),Bs(e,i,a)),a}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Do(t),ms();break;case 5:Zs(t);break;case 1:ji(t.type)&&Ui(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(_s,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ta,1&ta.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(Ci(ta,1&ta.current),null!==(e=Ko(e,t,n))?e.sibling:null);Ci(ta,1&ta.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ta,ta.current),r)break;return null;case 22:case 23:return t.lanes=0,To(e,t,n)}return Ko(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,as&&0!==(1048576&t.flags)&&ts(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var i=Pi(t,Ai.current);Ds(t,n),i=ya(null,t,r,e,i,n);var a=va();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(r)?(a=!0,Ui(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Us(t),i.updater=so,t.stateNode=i,i._reactInternals=t,co(t,r,e,n),t=Ao(null,t,r,!0,a,n)):(t.tag=0,as&&a&&ns(t),ko(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return jc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ro(r,e),i){case 0:t=Co(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=So(null,t,r,e,n);break e;case 14:t=_o(null,t,r,ro(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:ro(r,i),n);case 1:return r=t.type,i=t.pendingProps,Io(e,t,r,i=t.elementType===r?i:ro(r,i),n);case 3:e:{if(Do(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fs(e,t),Ws(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ro(e,t,r,n,i=uo(Error(s(423)),t));break e}if(r!==i){t=Ro(e,t,r,n,i=uo(Error(s(424)),t));break e}for(ss=di(t.stateNode.containerInfo.firstChild),is=t,as=!0,os=null,n=Ss(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),r===i){t=Ko(e,t,n);break e}ko(e,t,r,n)}t=t.child}return t;case 5:return Zs(t),null===e&&ds(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ii(r,i)?o=null:null!==a&&ii(r,a)&&(t.flags|=32),No(e,t),ko(e,t,o,n),t.child;case 6:return null===e&&ds(t),null;case 13:return Fo(e,t,n);case 4:return Js(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ks(t,null,r,n):ko(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:ro(r,i),n);case 7:return ko(e,t,t.pendingProps,n),t.child;case 8:case 12:return ko(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ci(_s,r._currentValue),r._currentValue=o,null!==a)if(cr(a.value,o)){if(a.children===i.children&&!Di.current){t=Ko(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Vs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),As(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),As(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}ko(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ds(t,n),r=r(i=Rs(i)),t.flags|=1,ko(e,t,r,n),t.child;case 14:return i=ro(r=t.type,t.pendingProps),_o(e,t,r,i=ro(r.type,i),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ro(r,i),qo(e,t),t.tag=1,ji(r)?(e=!0,Ui(t)):e=!1,Ds(t,n),oo(t,r,i),co(t,r,i,n),Ao(null,t,r,!0,e,n);case 19:return Wo(e,t,n);case 22:return To(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eu(){}function tu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Kc(a);o.call(e)}}qc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kc(a);s.call(e)}}var a=Wc(t,r,e,0,null,!1,0,"",eu);return e._reactRootContainer=a,e[gi]=a.current,Wr(8===e.nodeType?e.parentNode:e),hc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Kc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",eu);return e._reactRootContainer=l,e[gi]=l.current,Wr(8===e.nodeType?e.parentNode:e),hc(function(){qc(t,l,n,r)}),l}(n,t,e,i,r);return Kc(a)}Jc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Jc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc(function(){qc(null,e,null,null)}),t[gi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),sc(t,Je()),0===(6&Al)&&(Wl=Je()+500,Wi()))}break;case 13:hc(function(){var t=Ls(e,1);if(null!==t){var n=nc();ic(t,e,1,n)}}),Qc(e,1)}},kt=function(e){if(13===e.tag){var t=Ls(e,134217728);if(null!==t)ic(t,e,134217728,nc());Qc(e,134217728)}},St=function(e){if(13===e.tag){var t=rc(e),n=Ls(e,t);if(null!==n)ic(n,e,t,nc());Qc(e,t)}},_t=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Si(r);if(!i)throw Error(s(90));G(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=dc,Ie=hc;var nu={usingClientEntryPoint:!1,Events:[xi,ki,Si,Te,Ne,dc]},ru={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{it=su.inject(iu),st=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,r="",i=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[gi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return tu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,i,0,a,o),e[gi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return tu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc(function(){tu(null,null,e,!1,function(){e._reactRootContainer=null,e[gi]=null})}),!0)},t.unstable_batchedUpdates=dc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return tu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const h=["color","size","strokeWidth","absoluteStrokeWidth","children"];var f=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{color:s="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:f}=n,p=u(n,h);return(0,r.createElement)("svg",c(c({ref:i},d),{},{width:a,height:a,stroke:s,strokeWidth:l?24*Number(o)/Number(a):o,className:"lucide lucide-".concat((m=e,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},p),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(f)?f:[f])||[]]);var m});return n.displayName="".concat(e),n};const p=f("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),m=f("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),g=f("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),y=f("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),v=f("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),b=f("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),w=f("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),x=f("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),k=f("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),S=f("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),_=f("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),E=f("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),T=f("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),N=f("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),C=f("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),I=f("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),A=f("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),D=f("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),R=f("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),P=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},j={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(P(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new O;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class O extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L=function(e){return function(e){const t=P(e);return j.encodeByteArray(t,!0)}(e).replace(/\./g,"")},M=function(e){try{return j.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function U(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const F=()=>{try{return U().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDO5KOHefWnDTKm_3E8-CHJcOiY1lLc5Qs",REACT_APP_FIREBASE_APP_ID:"1:1047795579429:web:2dc2e5afc54a807f6a1dcc",REACT_APP_FIREBASE_AUTH_DOMAIN:"a-good-man-c64ae.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1047795579429",REACT_APP_FIREBASE_PROJECT_ID:"a-good-man-c64ae",REACT_APP_FIREBASE_STORAGE_BUCKET:"a-good-man-c64ae.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&M(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},V=e=>{var t;return null===(t=F())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},z=()=>{var e;return null===(e=F())||void 0===e?void 0:e.config},B=e=>{var t;return null===(t=F())||void 0===t?void 0:t["_".concat(e)]};class H{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function W(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function q(e){return(await fetch(e,{credentials:"include"})).ok}const K={};let G=!1;function Q(e,t){if("undefined"===typeof window||"undefined"===typeof document||!W(window.location.host)||K[e]===t||K[e]||G)return;function n(e){return"__firebase__banner__".concat(e)}K[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(K))K[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{G=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function Y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function X(){var e;const t=null===(e=F())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function J(){return!X()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Z extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ee.prototype.create)}}class ee{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(te,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Z(n,s,t)}}const te=/\{\$([^}]+)}/g;function ne(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(re(n)&&re(s)){if(!ne(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function re(e){return null!==e&&"object"===typeof e}function ie(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function se(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function ae(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class oe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=le),void 0===r.error&&(r.error=le),void 0===r.complete&&(r.complete=le);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function le(){}function ce(e){return e&&e._delegate?e._delegate:e}class ue{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const de="[DEFAULT]";class he{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new H;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:de})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===de?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.component?this.component.multipleInstances?e:de:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new he(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const pe=[];var me;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(me||(me={}));const ge={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},ye=me.INFO,ve={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},be=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ve[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class we{constructor(e){this.name=e,this._logLevel=ye,this._logHandler=be,this._userLogHandler=null,pe.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ge[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...t),this._logHandler(this,me.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...t),this._logHandler(this,me.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,me.INFO,...t),this._logHandler(this,me.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,me.WARN,...t),this._logHandler(this,me.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,me.ERROR,...t),this._logHandler(this,me.ERROR,...t)}}let xe,ke;const Se=new WeakMap,_e=new WeakMap,Ee=new WeakMap,Te=new WeakMap,Ne=new WeakMap;let Ce={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return _e.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ee.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return De(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ie(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ke||(ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Re(this),n),De(Se.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return De(e.apply(Re(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Re(this),t,...r);return Ee.set(s,t.sort?t.sort():[t]),De(s)}}function Ae(e){return"function"===typeof e?Ie(e):(e instanceof IDBTransaction&&function(e){if(_e.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});_e.set(e,t)}(e),t=e,(xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ce):e);var t}function De(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(De(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Se.set(t,e)}).catch(()=>{}),Ne.set(t,e),t}(e);if(Te.has(e))return Te.get(e);const t=Ae(e);return t!==e&&(Te.set(e,t),Ne.set(t,e)),t}const Re=e=>Ne.get(e);const Pe=["get","getKey","getAll","getAllKeys","count"],je=["put","add","delete","clear"],Oe=new Map;function Le(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Oe.get(t))return Oe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=je.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Pe.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Oe.set(t,s),s}Ce=(e=>c(c({},e),{},{get:(t,n,r)=>Le(t,n)||e.get(t,n,r),has:(t,n)=>!!Le(t,n)||e.has(t,n)}))(Ce);class Me{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Ue="@firebase/app",Fe="0.14.3",Ve=new we("@firebase/app"),ze="@firebase/app-compat",Be="@firebase/analytics-compat",He="@firebase/analytics",We="@firebase/app-check-compat",qe="@firebase/app-check",Ke="@firebase/auth",Ge="@firebase/auth-compat",Qe="@firebase/database",Ye="@firebase/data-connect",Xe="@firebase/database-compat",Je="@firebase/functions",$e="@firebase/functions-compat",Ze="@firebase/installations",et="@firebase/installations-compat",tt="@firebase/messaging",nt="@firebase/messaging-compat",rt="@firebase/performance",it="@firebase/performance-compat",st="@firebase/remote-config",at="@firebase/remote-config-compat",ot="@firebase/storage",lt="@firebase/storage-compat",ct="@firebase/firestore",ut="@firebase/ai",dt="@firebase/firestore-compat",ht="firebase",ft="[DEFAULT]",pt={[Ue]:"fire-core",[ze]:"fire-core-compat",[He]:"fire-analytics",[Be]:"fire-analytics-compat",[qe]:"fire-app-check",[We]:"fire-app-check-compat",[Ke]:"fire-auth",[Ge]:"fire-auth-compat",[Qe]:"fire-rtdb",[Ye]:"fire-data-connect",[Xe]:"fire-rtdb-compat",[Je]:"fire-fn",[$e]:"fire-fn-compat",[Ze]:"fire-iid",[et]:"fire-iid-compat",[tt]:"fire-fcm",[nt]:"fire-fcm-compat",[rt]:"fire-perf",[it]:"fire-perf-compat",[st]:"fire-rc",[at]:"fire-rc-compat",[ot]:"fire-gcs",[lt]:"fire-gcs-compat",[ct]:"fire-fst",[dt]:"fire-fst-compat",[ut]:"fire-vertex","fire-js":"fire-js",[ht]:"fire-js-all"},mt=new Map,gt=new Map,yt=new Map;function vt(e,t){try{e.container.addComponent(t)}catch(n){Ve.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function bt(e){const t=e.name;if(yt.has(t))return Ve.debug("There were multiple attempts to register component ".concat(t,".")),!1;yt.set(t,e);for(const n of mt.values())vt(n,e);for(const n of gt.values())vt(n,e);return!0}function wt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function xt(e){return null!==e&&void 0!==e&&void 0!==e.settings}const kt=new ee("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class St{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ue("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kt.create("app-deleted",{appName:this._name})}}const _t="12.3.0";function Et(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:ft,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw kt.create("bad-app-name",{appName:String(i)});if(n||(n=z()),!n)throw kt.create("no-options");const s=mt.get(i);if(s){if(ne(n,s.options)&&ne(r,s.config))return s;throw kt.create("duplicate-app",{appName:i})}const a=new fe(i);for(const l of yt.values())a.addComponent(l);const o=new St(n,r,a);return mt.set(i,o),o}function Tt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft;const t=mt.get(e);if(!t&&e===ft&&z())return Et();if(!t)throw kt.create("no-app",{appName:e});return t}function Nt(e,t,n){var r;let i=null!==(r=pt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ve.warn(e.join(" "))}bt(new ue("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Ct="firebase-heartbeat-store";let It=null;function At(){return It||(It=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=De(a);return r&&a.addEventListener("upgradeneeded",e=>{r(De(a.result),e.oldVersion,e.newVersion,De(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ct)}catch(n){console.warn(n)}}}).catch(e=>{throw kt.create("idb-open",{originalErrorMessage:e.message})})),It}async function Dt(e,t){try{const n=(await At()).transaction(Ct,"readwrite"),r=n.objectStore(Ct);await r.put(t,Rt(e)),await n.done}catch(n){if(n instanceof Z)Ve.warn(n.message);else{const e=kt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Ve.warn(e.message)}}}function Rt(e){return"".concat(e.name,"!").concat(e.options.appId)}class Pt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ot(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=jt();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ve.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=jt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Lt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Lt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=L(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Ve.warn(t),""}}}function jt(){return(new Date).toISOString().substring(0,10)}class Ot{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!$()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await At()).transaction(Ct),n=await t.objectStore(Ct).get(Rt(e));return await t.done,n}catch(t){if(t instanceof Z)Ve.warn(t.message);else{const e=kt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Ve.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Dt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Dt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Lt(e){return L(JSON.stringify({version:2,heartbeats:e})).length}var Mt;Mt="",bt(new ue("platform-logger",e=>new Me(e),"PRIVATE")),bt(new ue("heartbeat",e=>new Pt(e),"PRIVATE")),Nt(Ue,Fe,Mt),Nt(Ue,Fe,"esm2020"),Nt("fire-js","");var Ut,Ft,Vt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},zt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,a=e.g[3];s=t+(a^n&(i^a))+r[0]+3614090360&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[3]+3250441966&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[4]+4118548399&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[7]+4249261313&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[8]+1770035416&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[11]+2304563134&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[12]+1804603682&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[15]+1236535329&4294967295,s=t+(i^a&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[11]+643717713&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[0]+3921069994&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[15]+3634488961&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[4]+3889429448&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[3]+4107603335&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[8]+1163531501&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[7]+1735328473&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^a)+r[5]+4294588738&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[11]+1839030562&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[1]+2763975236&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[7]+4139469664&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[13]+681279174&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[3]+3572445317&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[9]+3654602809&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[15]+530742520&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~a))+r[0]+4096336452&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[14]+2878612391&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[12]+1700485571&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[10]+4293915773&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[8]+1873313359&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[6]+2734768916&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[4]+4149444226&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[2]+718787259&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return h(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||c.l(e)>0;)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),a=e.i(t)>>>16,o=65535&e.i(t);n[2*i+2*t]+=s*o,p(n,2*i+2*t),n[2*i+2*t+1]+=r*o,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*a,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*a,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Ft=zt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let i=o;for(let o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+s),n);s<8?(s=a(Math.pow(n,s)),i=i.j(s).add(a(e))):(i=i.j(r),i=i.add(a(e)))}return i},Ut=zt.Integer=r}).apply("undefined"!==typeof Vt?Vt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Bt,Ht,Wt,qt,Kt,Gt,Qt,Yt,Xt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Jt={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Xt&&Xt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(k)}};function k(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function S(){this.u=this.u,this.C=this.C}function _(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},_.prototype.h=function(){this.defaultPrevented=!0};var E=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function T(e){return/^[\s\xa0]*$/.test(e)}function N(e,t){_.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(N,_),N.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&N.Z.h.call(this)},N.prototype.h=function(){N.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var C="closure_listenable_"+(1e6*Math.random()|0),I=0;function A(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++I,this.da=this.fa=!1}function D(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function R(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function P(e){const t={};for(const n in e)t[n]=e[n];return t}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<j.length;t++)n=j[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(D(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function U(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const a=U(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new A(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var F="closure_lm_"+(1e6*Math.random()|0),V={};function z(e,t,n,r,i){if(r&&r.once)return H(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)z(e,t[s],n,r,i);return null}return n=X(n),e&&e[C]?e.J(t,n,a(r)?!!r.capture:!!r,i):B(e,t,n,!1,r,i)}function B(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const o=a(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[F]=l=new L(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)E||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function H(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=X(n),e&&e[C]?e.K(t,n,a(r)?!!r.capture:!!r,i):B(e,t,n,!0,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=X(n),e&&e[C]?(e=e.i,(s=String(t).toString())in e.g&&((n=U(t=e.g[s],n,r,i))>-1&&(D(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=U(t,n,r,i)),(n=e>-1?t[e]:null)&&q(n))}function q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[C])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(M(n,e),0==n.h&&(n.src=null,t[F]=null)):D(e)}}}function K(e){return e in V?V[e]:V[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new N(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&q(e),e=n.call(r,t)}return e}function Q(e){return(e=e[F])instanceof L?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function J(){S.call(this),this.i=new L(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new _(t,e);else if(t instanceof _)t.target=t.target||e;else{var i=t;O(t=new _(r,e),i)}let s,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)s=t.g=n[a],i=Z(s,r,!0,t)&&i;if(s=t.g=e,i=Z(s,r,!0,t)&&i,i=Z(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)s=t.g=n[a],i=Z(s,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const a=t[s];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&M(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(J,S),J.prototype[C]=!0,J.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)D(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){S.call(this),this.h=e,this.g={}}u(ne,S);var re=[];function ie(e){R(e.g,function(e,t){this.g.hasOwnProperty(t)&&q(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,ae=s.JSON.parse,oe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){_.call(this,"d")}function he(){_.call(this,"c")}u(de,_),u(he,_);var fe={},pe=null;function me(){return pe=pe||new J}function ge(e){_.call(this,fe.Ia,e)}function ye(e){const t=me();$(t,new ge(t))}function ve(e,t){_.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();$(t,new ve(t,e))}function we(e,t){_.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Se(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,_),fe.STAT_EVENT="statevent",u(ve,_),fe.Ja="timingevent",u(we,_),ke.prototype.ua=function(){this.g=!1},ke.prototype.info=function(){};var _e,Ee={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Te={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ne(){}function Ce(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}u(Ne,le),Ne.prototype.g=function(){return new XMLHttpRequest},_e=new Ne;var Re={},Pe={};function je(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,Oe(e,null)}function Oe(e,t){e.F=Date.now(),Ue(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new De,e.g=yn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=z(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?P(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var a="",o=s.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Pe:(n=Number(t.substring(n,r)),isNaN(n)?Re:(r+=1)+n>t.length?Pe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ue(e){e.T=Date.now()+e.H,Fe(e,e.H)}function Fe(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ve(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||hn(e.j,e)}function Be(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function He(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;dn(n),en(n)}ln(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else pn(n,11)}else if((e.L||n.g==e)&&dn(n),!T(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ye(s,s.h),s.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=gn(r,r.L?r.ba:null,r.W),a.L){Xe(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(Ve(o),Ue(o)),r.g=a}else on(r);n.i.length>0&&nn(n)}else"stop"!=l[0]&&"close"!=l[0]||pn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?pn(n,7):$t(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ut(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ut(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ft(this.g)))){this.K||4!=l||7==c||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Ft(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ut(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),ze(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,be(12),Be(this),ze(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==Pe){4==l&&(this.m=4,be(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==Re){this.m=4,be(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),He(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),cn(o),o.P=!0,be(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),ze(this)}else Se(this.i,this.l,n,null),He(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?hn(this.j,this):(this.o=!1,Ue(this)))}else(function(e){const t={};e=(e.g&&Ut(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=Ie(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),ze(this)}}}catch(Rn){}},Ae.prototype.cancel=function(){this.K=!0,Be(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Be(this),this.m=2,ze(this)):Fe(this,this.T-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function qe(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}qe.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,ht)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ct,!0),"@"),e.push(Ce(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),h(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function St(){this.g=new oe}function _t(e){this.i=e.Sb||null,this.h=e.ab||!1}function Et(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Tt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Nt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Ct(e)}function Ct(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return R(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function At(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=It(n),"string"===typeof e?null!=n&&Ce(n):it(e,t,n))}function Dt(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ce(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ce(n[t])),e.push(r)}}return this.i=e.join("&")},u(_t,le),_t.prototype.g=function(){return new Et(this.i,this.h)},u(Et,J),(e=Et.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Ct(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Nt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ct(this)),this.g&&(this.readyState=3,Ct(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Nt(this):Ct(this),3==this.readyState&&Tt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Nt(this))},e.Na=function(e){this.g&&(this.response=e,Nt(this))},e.ga=function(){this.g&&Nt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Et.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Dt,J);var Rt=/^https?$/i,Pt=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Ot(e),Mt(e)}function Ot(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ut(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Ut(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match($e)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Rt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var a=Ut(e)>2?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.ca()+"]",Ot(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ut(e){return e.g?e.g.readyState:0}function Ft(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Vt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zt(e){this.za=0,this.i=[],this.j=new ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vt("baseRetryDelayMs",5e3,e),this.Za=Vt("retryDelaySeedMs",1e4,e),this.Ta=Vt("forwardChannelMaxRetries",2,e),this.va=Vt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new qe(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function $t(e){if(tn(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),sn(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=yn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Ue(t)}mn(e)}function en(e){e.g&&(cn(e),e.g.cancel(),e.g=null)}function tn(e){en(e),e.v&&(s.clearTimeout(e.v),e.v=null),dn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function nn(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),b||(v(),b=!0),w.add(t,e),e.D=0}}function rn(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),sn(e,r),e.u&&e.o&&At(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=an(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),je(n,r,t)}function sn(e,t){e.H&&R(e.H,function(e,n){it(t,n,e)}),e.l&&R({},function(e,n){it(t,n,e)})}function an(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(Zt){throw e.push(s+"type="+encodeURIComponent("_badmap")),Zt}}catch(Zt){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function on(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),b||(v(),b=!0),w.add(t,e),e.A=0}}function ln(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),fn(e,e.A)),e.A++,!0)}function cn(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function un(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),sn(e,t),e.u&&e.o&&At(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,Oe(n,e)}function dn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function hn(e,t){var n=null;if(e.g==t){dn(e),cn(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;$(r=me(),new we(r,n)),nn(e)}else on(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),fn(e,e.D)),e.D++,!0))}(e,t)||2==r&&ln(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:pn(e,5);break;case 4:pn(e,10);break;case 3:pn(e,6);break;default:pn(e,2)}}function fn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function pn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new ke;if(s.Image){const r=new Image;r.onload=c(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(kt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(r),kt(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),mn(e),tn(e)}function mn(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function gn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),sn(e,r),r}function yn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Dt(new _t({ab:n})):new Dt(e.ma)).Fa(e.L),t}function vn(){}function bn(){}function wn(e,t){J.call(this),this.g=new zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!T(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Sn(this)}function xn(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function kn(){he.call(this),this.status=1}function Sn(e){this.g=e}(e=Dt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_e.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void jt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Pt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){jt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),Dt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ut(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=gn(this,null,this.W),nn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ae(this,this.j,e);let s=this.o;if(this.U&&(s?(s=P(s),O(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=an(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),sn(this,n),s&&(this.R?t="headers="+Ce(It(s))+"&"+t:this.u&&At(n,this.u,s)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,je(i,n,null)):je(i,n,t),this.I=2}}else 3==this.I&&(e?rn(this,e):0==this.i.length||Ke(this.h)||rn(this))},e.Da=function(){if(this.v=null,un(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),en(this),un(this))},e.Va=function(){null!=this.C&&(this.C=null,en(this),ln(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=vn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},bn.prototype.g=function(e,t){return new wn(e,t)},u(wn,J),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){$t(this.g)},wn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.I&&nn(t)},wn.prototype.N=function(){this.g.l=null,delete this.j,$t(this.g),delete this.g,wn.Z.N.call(this)},u(xn,de),u(kn,he),u(Sn,vn),Sn.prototype.ra=function(){$(this.g,"a")},Sn.prototype.qa=function(e){$(this.g,new xn(e))},Sn.prototype.pa=function(e){$(this.g,new kn)},Sn.prototype.oa=function(){$(this.g,"b")},bn.prototype.createWebChannel=bn.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,Yt=Jt.createWebChannelTransport=function(){return new bn},Qt=Jt.getStatEventTarget=function(){return me()},Gt=Jt.Event=fe,Kt=Jt.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,qt=Jt.ErrorCode=Ee,Te.COMPLETE="complete",Wt=Jt.EventType=Te,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",J.prototype.listen=J.prototype.J,Ht=Jt.WebChannel=ce,Jt.FetchXmlHttpFactory=_t,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,Bt=Jt.XhrIo=Dt}).apply("undefined"!==typeof Xt?Xt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const $t="@firebase/firestore",Zt="4.9.2";class en{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");let tn="12.3.0";const nn=new we("@firebase/firestore");function rn(){return nn.logLevel}function sn(e){if(nn.logLevel<=me.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ln);nn.debug("Firestore (".concat(tn,"): ").concat(e),...i)}}function an(e){if(nn.logLevel<=me.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ln);nn.error("Firestore (".concat(tn,"): ").concat(e),...i)}}function on(e){if(nn.logLevel<=me.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ln);nn.warn("Firestore (".concat(tn,"): ").concat(e),...i)}}function ln(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function cn(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,un(e,r,n)}function un(e,t,n){let r="FIRESTORE (".concat(tn,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw an(r),new Error(r)}function dn(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||un(t,i,r)}function hn(e,t){return e}const fn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pn extends Z{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class mn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class gn{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class yn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(en.UNAUTHENTICATED))}shutdown(){}}class vn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bn{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dn(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new mn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new mn,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{sn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(sn("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new mn)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(sn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(dn("string"==typeof t.accessToken,31837,{l:t}),new gn(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dn(null===e||"string"==typeof e,2055,{h:e}),new en(e)}}class wn{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xn{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new wn(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sn{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dn(void 0===this.o,3512);const n=e=>{null!=e.error&&sn("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,sn("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{sn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):sn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kn(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(dn("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new kn(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _n(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class En{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=_n(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Tn(e,t){return e<t?-1:e>t?1:0}function Nn(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return An(n)===An(i)?Tn(n,i):An(n)?1:-1}return Tn(e.length,t.length)}const Cn=55296,In=57343;function An(e){const t=e.charCodeAt(0);return t>=Cn&&t<=In}function Dn(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Rn="__name__";class Pn{constructor(e,t,n){void 0===t?t=0:t>e.length&&cn(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&cn(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Pn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Pn.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Tn(e.length,t.length)}static compareSegments(e,t){const n=Pn.isNumericId(e),r=Pn.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Pn.extractNumericId(e).compare(Pn.extractNumericId(t)):Nn(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ut.fromString(e.substring(4,e.length-2))}}class jn extends Pn{construct(e,t,n){return new jn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new pn(fn.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new jn(e)}static emptyPath(){return new jn([])}}const On=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ln extends Pn{construct(e,t,n){return new Ln(e,t,n)}static isValidIdentifier(e){return On.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Rn}static keyField(){return new Ln([Rn])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new pn(fn.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new pn(fn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new pn(fn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new pn(fn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ln(t)}static emptyPath(){return new Ln([])}}class Mn{constructor(e){this.path=e}static fromPath(e){return new Mn(jn.fromString(e))}static fromName(e){return new Mn(jn.fromString(e).popFirst(5))}static empty(){return new Mn(jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===jn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return jn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mn(new jn(e.slice()))}}function Un(e,t,n){if(!n)throw new pn(fn.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Fn(e){if(!Mn.isDocumentKey(e))throw new pn(fn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Vn(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function zn(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":cn(12329,{type:typeof e})}function Bn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new pn(fn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zn(e);throw new pn(fn.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Hn(e,t){const n={typeString:e};return t&&(n.value=t),n}function Wn(e,t){if(!Vn(e))throw new pn(fn.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new pn(fn.INVALID_ARGUMENT,n);return!0}const qn=-62135596800,Kn=1e6;class Gn{static now(){return Gn.fromMillis(Date.now())}static fromDate(e){return Gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Kn);return new Gn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pn(fn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pn(fn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qn)throw new pn(fn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pn(fn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kn}_compareTo(e){return this.seconds===e.seconds?Tn(this.nanoseconds,e.nanoseconds):Tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wn(e,Gn._jsonSchema))return new Gn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qn;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gn._jsonSchemaVersion="firestore/timestamp/1.0",Gn._jsonSchema={type:Hn("string",Gn._jsonSchemaVersion),seconds:Hn("number"),nanoseconds:Hn("number")};class Qn{static fromTimestamp(e){return new Qn(e)}static min(){return new Qn(new Gn(0,0))}static max(){return new Qn(new Gn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Yn=-1;class Xn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Xn.UNKNOWN_ID=-1;function Jn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Qn.fromTimestamp(1e9===r?new Gn(n+1,0):new Gn(n,r));return new Zn(i,Mn.empty(),t)}function $n(e){return new Zn(e.readTime,e.key,Yn)}class Zn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Zn(Qn.min(),Mn.empty(),Yn)}static max(){return new Zn(Qn.max(),Mn.empty(),Yn)}}function er(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Mn.comparator(e.documentKey,t.documentKey),0!==n?n:Tn(e.largestBatchId,t.largestBatchId))}const tr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function rr(e){if(e.code!==fn.FAILED_PRECONDITION||e.message!==tr)throw e;sn("LocalStore","Unexpectedly lost primary lease")}class ir{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&cn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ir((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ir?t:ir.resolve(t)}catch(e){return ir.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ir.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ir.reject(t)}static resolve(e){return new ir((t,n)=>{t(e)})}static reject(e){return new ir((t,n)=>{n(e)})}static waitFor(e){return new ir((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=ir.resolve(!1);for(const n of e)t=t.next(e=>e?ir.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ir((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new ir((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function sr(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ar(e){return"IndexedDbTransactionError"===e.name}class or{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}or.ce=-1;const lr=-1;function cr(e){return null==e}function ur(e){return 0===e&&1/e==-1/0}function dr(e){return"number"==typeof e&&Number.isInteger(e)&&!ur(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const hr="\x01";function fr(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=mr(t)),t=pr(e.get(n),t);return mr(t)}function pr(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case hr:n+="\x01\x11";break;default:n+=t}}return n}function mr(e){return e+hr+"\x01"}const gr="remoteDocuments",yr="owner",vr="mutationQueues",br="mutations";const wr="documentMutations",xr="remoteDocumentsV14",kr="remoteDocumentGlobal",Sr="targets",_r="targetDocuments",Er="targetGlobal",Tr="collectionParents",Nr="clientMetadata",Cr="bundles",Ir="namedQueries",Ar="indexConfiguration",Dr="indexState",Rr="indexEntries",Pr="documentOverlays",jr="globals",Or=[vr,br,wr,gr,Sr,yr,Er,_r,Nr,kr,Tr,Cr,Ir],Lr=[vr,br,wr,xr,Sr,yr,Er,_r,Nr,kr,Tr,Cr,Ir,Pr],Mr=Lr,Ur=[...Mr,Ar,Dr,Rr];function Fr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Br{constructor(e,t){this.comparator=e,this.root=t||Wr.EMPTY}insert(e,t){return new Br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(e){return new Br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hr(this.root,e,this.comparator,!0)}}class Hr{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Wr.RED,this.left=null!=r?r:Wr.EMPTY,this.right=null!=i?i:Wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Wr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Wr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw cn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw cn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw cn(27949);return e+(this.isRed()?0:1)}}Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1,Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw cn(57766)}get value(){throw cn(16141)}get color(){throw cn(16727)}get left(){throw cn(29726)}get right(){throw cn(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Wr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qr{constructor(e){this.comparator=e,this.data=new Br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Kr(this.data.getIterator())}getIteratorFrom(e){return new Kr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof qr))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qr(this.comparator);return t.data=e,t}}class Kr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gr{constructor(e){this.fields=e,e.sort(Ln.comparator)}static empty(){return new Gr([])}unionWith(e){let t=new qr(Ln.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Gr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Dn(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Qr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Qr("Invalid base64 string: "+e):e}}(e);return new Yr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yr.EMPTY_BYTE_STRING=new Yr("");const Xr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(e){if(dn(!!e,39018),"string"==typeof e){let t=0;const n=Xr.exec(e);if(dn(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:$r(e.seconds),nanos:$r(e.nanos)}}function $r(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Zr(e){return"string"==typeof e?Yr.fromBase64String(e):Yr.fromUint8Array(e)}const ei="server_timestamp",ti="__type__",ni="__previous_value__",ri="__local_write_time__";function ii(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ti])||void 0===t?void 0:t.stringValue)===ei}function si(e){const t=e.mapValue.fields[ni];return ii(t)?si(t):t}function ai(e){const t=Jr(e.mapValue.fields[ri].timestampValue);return new Gn(t.seconds,t.nanos)}class oi{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const li="(default)";class ci{constructor(e,t){this.projectId=e,this.database=t||li}static empty(){return new ci("","")}get isDefaultDatabase(){return this.database===li}isEqual(e){return e instanceof ci&&e.projectId===this.projectId&&e.database===this.database}}const ui="__type__",di="__max__",hi={mapValue:{fields:{__type__:{stringValue:di}}}},fi="__vector__",pi="value";function mi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ii(e)?4:Di(e)?9007199254740991:Ii(e)?10:11:cn(28295,{value:e})}function gi(e,t){if(e===t)return!0;const n=mi(e);if(n!==mi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ai(e).isEqual(ai(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Jr(e.timestampValue),r=Jr(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Zr(e.bytesValue).isEqual(Zr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return $r(e.geoPointValue.latitude)===$r(t.geoPointValue.latitude)&&$r(e.geoPointValue.longitude)===$r(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return $r(e.integerValue)===$r(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=$r(e.doubleValue),r=$r(t.doubleValue);return n===r?ur(n)===ur(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Dn(e.arrayValue.values||[],t.arrayValue.values||[],gi);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fr(n)!==Fr(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gi(n[i],r[i])))return!1;return!0}(e,t);default:return cn(52216,{left:e})}}function yi(e,t){return void 0!==(e.values||[]).find(e=>gi(e,t))}function vi(e,t){if(e===t)return 0;const n=mi(e),r=mi(t);if(n!==r)return Tn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Tn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=$r(e.integerValue||e.doubleValue),r=$r(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return bi(e.timestampValue,t.timestampValue);case 4:return bi(ai(e),ai(t));case 5:return Nn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Zr(e),r=Zr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Tn(n[i],r[i]);if(0!==e)return e}return Tn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Tn($r(e.latitude),$r(t.latitude));return 0!==n?n:Tn($r(e.longitude),$r(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return wi(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const a=e.fields||{},o=t.fields||{},l=null===(n=a[pi])||void 0===n?void 0:n.arrayValue,c=null===(r=o[pi])||void 0===r?void 0:r.arrayValue,u=Tn((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:wi(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===hi.mapValue&&t===hi.mapValue)return 0;if(e===hi.mapValue)return 1;if(t===hi.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Nn(r[a],s[a]);if(0!==e)return e;const t=vi(n[r[a]],i[s[a]]);if(0!==t)return t}return Tn(r.length,s.length)}(e.mapValue,t.mapValue);default:throw cn(23264,{he:n})}}function bi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Tn(e,t);const n=Jr(e),r=Jr(t),i=Tn(n.seconds,r.seconds);return 0!==i?i:Tn(n.nanos,r.nanos)}function wi(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=vi(n[i],r[i]);if(e)return e}return Tn(n.length,r.length)}function xi(e){return ki(e)}function ki(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Jr(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Zr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Mn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ki(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ki(e.fields[i]));return n+"}"}(e.mapValue):cn(61005,{value:e})}function Si(e){switch(mi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=si(e);return t?16+Si(t):16;case 5:return 2*e.stringValue.length;case 6:return Zr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Si(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Vr(e.fields,(e,n)=>{t+=e.length+Si(n)}),t}(e.mapValue);default:throw cn(13486,{value:e})}}function _i(e){return!!e&&"integerValue"in e}function Ei(e){return!!e&&"arrayValue"in e}function Ti(e){return!!e&&"nullValue"in e}function Ni(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ci(e){return!!e&&"mapValue"in e}function Ii(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ui])||void 0===t?void 0:t.stringValue)===fi}function Ai(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Vr(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ai(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ai(e.arrayValue.values[n]);return t}return c({},e)}function Di(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===di}class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ci(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ai(t)}setAll(e){let t=Ln.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ai(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ci(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ci(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Vr(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ri(Ai(this.value))}}function Pi(e){const t=[];return Vr(e.fields,(e,n)=>{const r=new Ln([e]);if(Ci(n)){const e=Pi(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Gr(t)}class ji{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ji(e,0,Qn.min(),Qn.min(),Qn.min(),Ri.empty(),0)}static newFoundDocument(e,t,n,r){return new ji(e,1,t,Qn.min(),n,r,0)}static newNoDocument(e,t){return new ji(e,2,t,Qn.min(),Qn.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new ji(e,3,t,Qn.min(),Qn.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Oi{constructor(e,t){this.position=e,this.inclusive=t}}function Li(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?Mn.comparator(Mn.fromName(a.referenceValue),n.key):vi(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Mi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!gi(e.position[n],t.position[n]))return!1;return!0}class Ui{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Fi(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Vi{}class zi extends Vi{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Yi(e,t,n):"array-contains"===t?new Zi(e,n):"in"===t?new es(e,n):"not-in"===t?new ts(e,n):"array-contains-any"===t?new ns(e,n):new zi(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Xi(e,n):new Ji(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(vi(t,this.value)):null!==t&&mi(this.value)===mi(t)&&this.matchesComparison(vi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return cn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bi extends Vi{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Bi(e,t)}matches(e){return Hi(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hi(e){return"and"===e.op}function Wi(e){return qi(e)&&Hi(e)}function qi(e){for(const t of e.filters)if(t instanceof Bi)return!1;return!0}function Ki(e){if(e instanceof zi)return e.field.canonicalString()+e.op.toString()+xi(e.value);if(Wi(e))return e.filters.map(e=>Ki(e)).join(",");{const t=e.filters.map(e=>Ki(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Gi(e,t){return e instanceof zi?function(e,t){return t instanceof zi&&e.op===t.op&&e.field.isEqual(t.field)&&gi(e.value,t.value)}(e,t):e instanceof Bi?function(e,t){return t instanceof Bi&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Gi(n,t.filters[r]),!0)}(e,t):void cn(19439)}function Qi(e){return e instanceof zi?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xi(e.value))}(e):e instanceof Bi?function(e){return e.op.toString()+" {"+e.getFilters().map(Qi).join(" ,")+"}"}(e):"Filter"}class Yi extends zi{constructor(e,t,n){super(e,t,n),this.key=Mn.fromName(n.referenceValue)}matches(e){const t=Mn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Xi extends zi{constructor(e,t){super(e,"in",t),this.keys=$i("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ji extends zi{constructor(e,t){super(e,"not-in",t),this.keys=$i("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $i(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Mn.fromName(e.referenceValue))}class Zi extends zi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ei(t)&&yi(t.arrayValue,this.value)}}class es extends zi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yi(this.value.arrayValue,t)}}class ts extends zi{constructor(e,t){super(e,"not-in",t)}matches(e){if(yi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!yi(this.value.arrayValue,t)}}class ns extends zi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ei(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>yi(this.value.arrayValue,e))}}class rs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function is(e){return new rs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ss(e){const t=hn(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Ki(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),cr(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>xi(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>xi(e)).join(",")),t.Te=e}return t.Te}function as(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Fi(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Gi(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Mi(e.startAt,t.startAt)&&Mi(e.endAt,t.endAt)}function os(e){return Mn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class ls{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function cs(e,t,n,r,i,s,a,o){return new ls(e,t,n,r,i,s,a,o)}function us(e){return new ls(e)}function ds(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function hs(e){return null!==e.collectionGroup}function fs(e){const t=hn(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new qr(Ln.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ui(r,n))}),e.has(Ln.keyField().canonicalString())||t.Ie.push(new Ui(Ln.keyField(),n))}return t.Ie}function ps(e){const t=hn(e);return t.Ee||(t.Ee=ms(t,fs(e))),t.Ee}function ms(e,t){if("F"===e.limitType)return is(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ui(e.field,t)});const n=e.endAt?new Oi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Oi(e.startAt.position,e.startAt.inclusive):null;return is(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function gs(e,t,n){return new ls(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ys(e,t){return as(ps(e),ps(t))&&e.limitType===t.limitType}function vs(e){return"".concat(ss(ps(e)),"|lt:").concat(e.limitType)}function bs(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Qi(e)).join(", "),"]")),cr(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>xi(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>xi(e)).join(",")),"Target(".concat(t,")")}(ps(e)),"; limitType=").concat(e.limitType,")")}function ws(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Mn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of fs(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Li(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,fs(e),t))&&!(e.endAt&&!function(e,t,n){const r=Li(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,fs(e),t))}(e,t)}function xs(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ks(e){return(t,n)=>{let r=!1;for(const i of fs(e)){const e=Ss(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ss(e,t,n){const r=e.field.isKeyField()?Mn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vi(r,i):cn(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return cn(19790,{direction:e.dir})}}class _s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Vr(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return zr(this.inner)}size(){return this.innerSize}}const Es=new Br(Mn.comparator);function Ts(){return Es}const Ns=new Br(Mn.comparator);function Cs(){let e=Ns;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Is(e){let t=Ns;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function As(){return Rs()}function Ds(){return Rs()}function Rs(){return new _s(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ps=new Br(Mn.comparator),js=new qr(Mn.comparator);function Os(){let e=js;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ls=new qr(Tn);function Ms(){return Ls}function Us(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ur(t)?"-0":t}}function Fs(e){return{integerValue:""+e}}function Vs(e,t){return dr(t)?Fs(t):Us(e,t)}class zs{constructor(){this._=void 0}}function Bs(e,t,n){return e instanceof qs?function(e,t){const n={fields:{[ti]:{stringValue:ei},[ri]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ii(t)&&(t=si(t)),t&&(n.fields[ni]=t),{mapValue:n}}(n,t):e instanceof Ks?Gs(e,t):e instanceof Qs?Ys(e,t):function(e,t){const n=Ws(e,t),r=Js(n)+Js(e.Ae);return _i(n)&&_i(e.Ae)?Fs(r):Us(e.serializer,r)}(e,t)}function Hs(e,t,n){return e instanceof Ks?Gs(e,t):e instanceof Qs?Ys(e,t):n}function Ws(e,t){return e instanceof Xs?function(e){return _i(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class qs extends zs{}class Ks extends zs{constructor(e){super(),this.elements=e}}function Gs(e,t){const n=$s(t);for(const r of e.elements)n.some(e=>gi(e,r))||n.push(r);return{arrayValue:{values:n}}}class Qs extends zs{constructor(e){super(),this.elements=e}}function Ys(e,t){let n=$s(t);for(const r of e.elements)n=n.filter(e=>!gi(e,r));return{arrayValue:{values:n}}}class Xs extends zs{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Js(e){return $r(e.integerValue||e.doubleValue)}function $s(e){return Ei(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Zs{constructor(e,t){this.field=e,this.transform=t}}class ea{constructor(e,t){this.version=e,this.transformResults=t}}class ta{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ta}static exists(e){return new ta(void 0,e)}static updateTime(e){return new ta(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function na(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ra{}function ia(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new pa(e.key,ta.none()):new ca(e.key,e.data,ta.none());{const n=e.data,r=Ri.empty();let i=new qr(Ln.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ua(e.key,r,new Gr(i.toArray()),ta.none())}}function sa(e,t,n){e instanceof ca?function(e,t,n){const r=e.value.clone(),i=ha(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ua?function(e,t,n){if(!na(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ha(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(da(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function aa(e,t,n,r){return e instanceof ca?function(e,t,n,r){if(!na(e.precondition,t))return n;const i=e.value.clone(),s=fa(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ua?function(e,t,n,r){if(!na(e.precondition,t))return n;const i=fa(e.fieldTransforms,r,t),s=t.data;return s.setAll(da(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return na(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function oa(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ws(r.transform,e||null);null!=i&&(null===n&&(n=Ri.empty()),n.set(r.field,i))}return n||null}function la(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Dn(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ks&&t instanceof Ks||e instanceof Qs&&t instanceof Qs?Dn(e.elements,t.elements,gi):e instanceof Xs&&t instanceof Xs?gi(e.Ae,t.Ae):e instanceof qs&&t instanceof qs}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ca extends ra{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ua extends ra{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function da(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function ha(e,t,n){const r=new Map;dn(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Hs(a,o,n[i]))}return r}function fa(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Bs(e,s,t))}return r}class pa extends ra{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ma extends ra{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ga{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&sa(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=aa(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=aa(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ds();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=ia(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Qn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Os())}isEqual(e){return this.batchId===e.batchId&&Dn(this.mutations,e.mutations,(e,t)=>la(e,t))&&Dn(this.baseMutations,e.baseMutations,(e,t)=>la(e,t))}}class ya{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){dn(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Ps;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new ya(e,t,n,r)}}class va{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ba{constructor(e,t){this.count=e,this.unchangedNames=t}}var wa,xa;function ka(e){switch(e){case fn.OK:return cn(64938);case fn.CANCELLED:case fn.UNKNOWN:case fn.DEADLINE_EXCEEDED:case fn.RESOURCE_EXHAUSTED:case fn.INTERNAL:case fn.UNAVAILABLE:case fn.UNAUTHENTICATED:return!1;case fn.INVALID_ARGUMENT:case fn.NOT_FOUND:case fn.ALREADY_EXISTS:case fn.PERMISSION_DENIED:case fn.FAILED_PRECONDITION:case fn.ABORTED:case fn.OUT_OF_RANGE:case fn.UNIMPLEMENTED:case fn.DATA_LOSS:return!0;default:return cn(15467,{code:e})}}function Sa(e){if(void 0===e)return an("GRPC error has no .code"),fn.UNKNOWN;switch(e){case wa.OK:return fn.OK;case wa.CANCELLED:return fn.CANCELLED;case wa.UNKNOWN:return fn.UNKNOWN;case wa.DEADLINE_EXCEEDED:return fn.DEADLINE_EXCEEDED;case wa.RESOURCE_EXHAUSTED:return fn.RESOURCE_EXHAUSTED;case wa.INTERNAL:return fn.INTERNAL;case wa.UNAVAILABLE:return fn.UNAVAILABLE;case wa.UNAUTHENTICATED:return fn.UNAUTHENTICATED;case wa.INVALID_ARGUMENT:return fn.INVALID_ARGUMENT;case wa.NOT_FOUND:return fn.NOT_FOUND;case wa.ALREADY_EXISTS:return fn.ALREADY_EXISTS;case wa.PERMISSION_DENIED:return fn.PERMISSION_DENIED;case wa.FAILED_PRECONDITION:return fn.FAILED_PRECONDITION;case wa.ABORTED:return fn.ABORTED;case wa.OUT_OF_RANGE:return fn.OUT_OF_RANGE;case wa.UNIMPLEMENTED:return fn.UNIMPLEMENTED;case wa.DATA_LOSS:return fn.DATA_LOSS;default:return cn(39323,{code:e})}}(xa=wa||(wa={}))[xa.OK=0]="OK",xa[xa.CANCELLED=1]="CANCELLED",xa[xa.UNKNOWN=2]="UNKNOWN",xa[xa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xa[xa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xa[xa.NOT_FOUND=5]="NOT_FOUND",xa[xa.ALREADY_EXISTS=6]="ALREADY_EXISTS",xa[xa.PERMISSION_DENIED=7]="PERMISSION_DENIED",xa[xa.UNAUTHENTICATED=16]="UNAUTHENTICATED",xa[xa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xa[xa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xa[xa.ABORTED=10]="ABORTED",xa[xa.OUT_OF_RANGE=11]="OUT_OF_RANGE",xa[xa.UNIMPLEMENTED=12]="UNIMPLEMENTED",xa[xa.INTERNAL=13]="INTERNAL",xa[xa.UNAVAILABLE=14]="UNAVAILABLE",xa[xa.DATA_LOSS=15]="DATA_LOSS";let _a=null;function Ea(){return new TextEncoder}const Ta=new Ut([4294967295,4294967295],0);function Na(e){const t=Ea().encode(e),n=new Ft;return n.update(t),new Uint8Array(n.digest())}function Ca(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ut([n,r],0),new Ut([i,s],0)]}class Ia{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Aa("Invalid padding: ".concat(t));if(n<0)throw new Aa("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Aa("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Aa("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Ut.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Ut.fromNumber(n)));return 1===r.compare(Ta)&&(r=new Ut([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Na(e),[n,r]=Ca(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Ia(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Na(e),[n,r]=Ca(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Da{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ra.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Da(Qn.min(),r,new Br(Tn),Ts(),Os())}}class Ra{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ra(n,t,Os(),Os(),Os())}}class Pa{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class ja{constructor(e,t){this.targetId=e,this.Ce=t}}class Oa{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yr.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class La{constructor(){this.ve=0,this.Fe=Fa(),this.Me=Yr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Os(),t=Os(),n=Os();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:cn(38017,{changeType:i})}}),new Ra(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Fa()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ma{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ts(),this.Je=Ua(),this.He=Ua(),this.Ye=new Br(Tn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:cn(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(os(s))if(0===n){const e=new Mn(s.path);this.et(t,e,ji.newNoDocument(e,Qn.min()))}else dn(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=_a)||void 0===i||i.lt(function(e,t,n,r,i,s,a,o,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===d||void 0===d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Zr(n).toUint8Array()}catch(e){if(e instanceof Qr)return on("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Ia(s,r,i)}catch(e){return on(e instanceof Aa?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&os(i.target)){const t=new Mn(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,ji.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Os();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Da(e,t,this.Ye,this.je,n);return this.je=Ts(),this.Je=Ua(),this.He=Ua(),this.Ye=new Br(Tn),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new La,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new qr(Tn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new qr(Tn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||sn("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new La),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ua(){return new Br(Mn.comparator)}function Fa(){return new Br(Mn.comparator)}const Va={asc:"ASCENDING",desc:"DESCENDING"},za={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ba={and:"AND",or:"OR"};class Ha{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wa(e,t){return e.useProto3Json||cr(t)?t:{value:t}}function qa(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ka(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ga(e,t){return qa(e,t.toTimestamp())}function Qa(e){return dn(!!e,49232),Qn.fromTimestamp(function(e){const t=Jr(e);return new Gn(t.seconds,t.nanos)}(e))}function Ya(e,t){return Xa(e,t).canonicalString()}function Xa(e,t){const n=function(e){return new jn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ja(e){const t=jn.fromString(e);return dn(vo(t),10190,{key:t.toString()}),t}function $a(e,t){return Ya(e.databaseId,t.path)}function Za(e,t){const n=Ja(t);if(n.get(1)!==e.databaseId.projectId)throw new pn(fn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new pn(fn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Mn(ro(n))}function eo(e,t){return Ya(e.databaseId,t)}function to(e){const t=Ja(e);return 4===t.length?jn.emptyPath():ro(t)}function no(e){return new jn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ro(e){return dn(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function io(e,t,n){return{name:$a(e,t),fields:n.value.mapValue.fields}}function so(e,t){let n;if(t instanceof ca)n={update:io(e,t.key,t.value)};else if(t instanceof pa)n={delete:$a(e,t.key)};else if(t instanceof ua)n={update:io(e,t.key,t.data),updateMask:yo(t.fieldMask)};else{if(!(t instanceof ma))return cn(16599,{Vt:t.type});n={verify:$a(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof qs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ks)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Qs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Xs)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw cn(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ga(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:cn(27497)}(e,t.precondition)),n}function ao(e,t){return{documents:[eo(e,t.path)]}}function oo(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eo(e,i);const s=function(e){if(0!==e.length)return go(Bi.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:po(e.field),direction:uo(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Wa(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function lo(e){let t=to(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){dn(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=co(e);return t instanceof Bi&&Wi(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Ui(mo(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,cr(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Oi(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Oi(n,t)}(n.endAt)),cs(t,i,a,s,o,"F",l,c)}function co(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=mo(e.unaryFilter.field);return zi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=mo(e.unaryFilter.field);return zi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mo(e.unaryFilter.field);return zi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=mo(e.unaryFilter.field);return zi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return cn(61313);default:return cn(60726)}}(e):void 0!==e.fieldFilter?function(e){return zi.create(mo(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return cn(58110);default:return cn(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Bi.create(e.compositeFilter.filters.map(e=>co(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return cn(1026)}}(e.compositeFilter.op))}(e):cn(30097,{filter:e})}function uo(e){return Va[e]}function ho(e){return za[e]}function fo(e){return Ba[e]}function po(e){return{fieldPath:e.canonicalString()}}function mo(e){return Ln.fromServerFormat(e.fieldPath)}function go(e){return e instanceof zi?function(e){if("=="===e.op){if(Ni(e.value))return{unaryFilter:{field:po(e.field),op:"IS_NAN"}};if(Ti(e.value))return{unaryFilter:{field:po(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ni(e.value))return{unaryFilter:{field:po(e.field),op:"IS_NOT_NAN"}};if(Ti(e.value))return{unaryFilter:{field:po(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(e.field),op:ho(e.op),value:e.value}}}(e):e instanceof Bi?function(e){const t=e.getFilters().map(e=>go(e));return 1===t.length?t[0]:{compositeFilter:{op:fo(e.op),filters:t}}}(e):cn(54877,{filter:e})}function yo(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function vo(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class bo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qn.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Qn.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yr.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wo{constructor(e){this.yt=e}}function xo(e){const t=lo({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?gs(t,t.limit,"L"):t}class ko{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt($r(e.integerValue));else if("doubleValue"in e){const n=$r(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),ur(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Jr(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Zr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Di(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ii(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):cn(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=pi,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt($r(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Mn.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ko.Kt=new ko;class So{constructor(){this.Cn=new _o}addToCollectionParentIndex(e,t){return this.Cn.add(t),ir.resolve()}getCollectionParents(e,t){return ir.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ir.resolve()}deleteFieldIndex(e,t){return ir.resolve()}deleteAllFieldIndexes(e){return ir.resolve()}createTargetIndexes(e,t){return ir.resolve()}getDocumentsMatchingTarget(e,t){return ir.resolve(null)}getIndexType(e,t){return ir.resolve(0)}getFieldIndexes(e,t){return ir.resolve([])}getNextCollectionGroupToUpdate(e){return ir.resolve(null)}getMinOffset(e,t){return ir.resolve(Zn.min())}getMinOffsetFromCollectionGroup(e,t){return ir.resolve(Zn.min())}updateCollectionGroup(e,t,n){return ir.resolve()}updateIndexEntries(e,t){return ir.resolve()}}class _o{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new qr(jn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new qr(jn.comparator)).toArray()}}new Uint8Array(0);const Eo={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},To=41943040;class No{static withCacheSize(e){return new No(e,No.DEFAULT_COLLECTION_PERCENTILE,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}No.DEFAULT_COLLECTION_PERCENTILE=10,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,No.DEFAULT=new No(To,No.DEFAULT_COLLECTION_PERCENTILE,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),No.DISABLED=new No(-1,0,0);class Co{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Co(0)}static cr(){return new Co(-1)}}const Io="LruGarbageCollector",Ao=1048576;function Do(e,t){let[n,r]=e,[i,s]=t;const a=Tn(n,i);return 0===a?Tn(r,s):a}class Ro{constructor(e){this.Ir=e,this.buffer=new qr(Do),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Do(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Po{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){sn(Io,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ar(e)?sn(Io,"Ignoring IndexedDB error during garbage collection: ",e):await rr(e)}await this.Vr(3e5)})}}class jo{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ir.resolve(or.ce);const n=new Ro(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(sn("LruGarbageCollector","Garbage collection skipped; disabled"),ir.resolve(Eo)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(sn("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Eo):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(sn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),rn()<=me.DEBUG&&sn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),ir.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Oo(e,t){return new jo(e,t)}class Lo{constructor(){this.changes=new _s(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ji.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ir.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Mo{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Uo{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&aa(n.mutation,e,Gr.empty(),Gn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Os()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Os();const r=As();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Cs();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=As();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Os()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Ts();const s=Rs(),a=Rs();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof ua)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),aa(a.mutation,t,a.mutation.getFieldMask(),Gn.now())):s.set(t.key,Gr.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Mo(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Rs();let r=new Br((e,t)=>e-t),i=Os();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Gr.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Os()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Ds();l.forEach(e=>{if(!i.has(e)){const r=ia(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ir.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Mn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hs(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ir.resolve(As());let a=Yn,o=i;return s.next(t=>ir.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?ir.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Os())).next(e=>({batchId:a,changes:Is(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Mn(t)).next(e=>{let t=Cs();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Cs();return this.indexManager.getCollectionParents(e,i).next(a=>ir.forEach(a,a=>{const o=function(e,t){return new ls(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ji.newInvalidDocument(r)))});let n=Cs();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&aa(s.mutation,r,Gr.empty(),Gn.now()),ws(t,r)&&(n=n.insert(e,r))}),n})}}class Fo{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ir.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Qa(e.createTime)}}(t)),ir.resolve()}getNamedQuery(e,t){return ir.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:xo(e.bundledQuery),readTime:Qa(e.readTime)}}(t)),ir.resolve()}}class Vo{constructor(){this.overlays=new Br(Mn.comparator),this.qr=new Map}getOverlay(e,t){return ir.resolve(this.overlays.get(t))}getOverlays(e,t){const n=As();return ir.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),ir.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),ir.resolve()}getOverlaysForCollection(e,t,n){const r=As(),i=t.length+1,s=new Mn(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ir.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Br((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=As(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=As(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return ir.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new va(t,n));let i=this.qr.get(t);void 0===i&&(i=Os(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class zo{constructor(){this.sessionToken=Yr.EMPTY_BYTE_STRING}getSessionToken(e){return ir.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ir.resolve()}}class Bo{constructor(){this.Qr=new qr(Ho.$r),this.Ur=new qr(Ho.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Ho(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Ho(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Mn(new jn([])),n=new Ho(t,e),r=new Ho(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Mn(new jn([])),n=new Ho(t,e),r=new Ho(t,e+1);let i=Os();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Ho(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ho{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Mn.comparator(e.key,t.key)||Tn(e.Yr,t.Yr)}static Kr(e,t){return Tn(e.Yr,t.Yr)||Mn.comparator(e.key,t.key)}}class Wo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new qr(Ho.$r)}checkEmpty(e){return ir.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ga(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new Ho(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ir.resolve(s)}lookupMutationBatch(e,t){return ir.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return ir.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ir.resolve(0===this.mutationQueue.length?lr:this.tr-1)}getAllMutationBatches(e){return ir.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ho(t,0),r=new Ho(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),ir.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new qr(Tn);return t.forEach(e=>{const t=new Ho(e,0),r=new Ho(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),ir.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Mn.isDocumentKey(i)||(i=i.child(""));const s=new Ho(new Mn(i),0);let a=new qr(Tn);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),ir.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){dn(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return ir.forEach(t.mutations,r=>{const i=new Ho(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Ho(t,0),r=this.Zr.firstAfterOrEqual(n);return ir.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ir.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class qo{constructor(e){this.ri=e,this.docs=new Br(Mn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ir.resolve(n?n.document.mutableCopy():ji.newInvalidDocument(t))}getEntries(e,t){let n=Ts();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ji.newInvalidDocument(e))}),ir.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ts();const s=t.path,a=new Mn(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||er($n(a),n)<=0||(r.has(a.key)||ws(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return ir.resolve(i)}getAllFromCollectionGroup(e,t,n,r){cn(9500)}ii(e,t){return ir.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ko(this)}getSize(e){return ir.resolve(this.size)}}class Ko extends Lo{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),ir.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Go{constructor(e){this.persistence=e,this.si=new _s(e=>ss(e),as),this.lastRemoteSnapshotVersion=Qn.min(),this.highestTargetId=0,this.oi=0,this._i=new Bo,this.targetCount=0,this.ai=Co.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),ir.resolve()}getLastRemoteSnapshotVersion(e){return ir.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ir.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ir.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ir.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Co(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ir.resolve()}updateTargetData(e,t){return this.Pr(t),ir.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ir.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ir.waitFor(i).next(()=>r)}getTargetCount(e){return ir.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ir.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ir.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ir.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ir.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ir.resolve(n)}containsKey(e,t){return ir.resolve(this._i.containsKey(t))}}class Qo{constructor(e,t){this.ui={},this.overlays={},this.ci=new or(0),this.li=!1,this.li=!0,this.hi=new zo,this.referenceDelegate=e(this),this.Pi=new Go(this),this.indexManager=new So,this.remoteDocumentCache=function(e){return new qo(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new wo(t),this.Ii=new Fo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Wo(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){sn("MemoryPersistence","Starting transaction:",e);const r=new Yo(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return ir.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Yo extends nr{constructor(e){super(),this.currentSequenceNumber=e}}class Xo{constructor(e){this.persistence=e,this.Ri=new Bo,this.Vi=null}static mi(e){return new Xo(e)}get fi(){if(this.Vi)return this.Vi;throw cn(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ir.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ir.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ir.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ir.forEach(this.fi,n=>{const r=Mn.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Qn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ir.or([()=>ir.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Jo{constructor(e,t){this.persistence=e,this.pi=new _s(e=>fr(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Oo(this,t)}static mi(e,t){return new Jo(e,t)}Ei(){}di(e){return ir.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return ir.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?ir.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Qn.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ir.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ir.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ir.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ir.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Si(e.data.value)),t}br(e,t,n){return ir.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return ir.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class $o{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Os(),r=Os();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new $o(e,t.fromCache,n,r)}}class Zo{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class el{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=J()?8:sr(Y())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Zo;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(rn()<=me.DEBUG&&sn("QueryEngine","SDK will not create cache indexes for query:",bs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ir.resolve()):(rn()<=me.DEBUG&&sn("QueryEngine","Query:",bs(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(rn()<=me.DEBUG&&sn("QueryEngine","The SDK decides to create cache indexes for query:",bs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ps(t))):ir.resolve())}ys(e,t){if(ds(t))return ir.resolve(null);let n=ps(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=gs(t,null,"F"),n=ps(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Os(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,gs(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return ds(t)||r.isEqual(Qn.min())?ir.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?ir.resolve(null):(rn()<=me.DEBUG&&sn("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),bs(t)),this.vs(e,s,t,Jn(r,Yn)).next(e=>e))})}Ds(e,t){let n=new qr(ks(e));return t.forEach((t,r)=>{ws(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return rn()<=me.DEBUG&&sn("QueryEngine","Using full collection scan to execute query:",bs(t)),this.ps.getDocumentsMatchingQuery(e,t,Zn.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const tl="LocalStore";class nl{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Br(Tn),this.xs=new _s(e=>ss(e),as),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uo(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function rl(e,t,n,r){return new nl(e,t,n,r)}async function il(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=Os();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function sl(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function al(e,t,n){let r=Os(),i=Os();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ts();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Qn.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):sn(tl,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function ol(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=lr),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function ll(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,ir.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new bo(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function cl(e,t,n){const r=hn(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!ar(e))throw e;sn(tl,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function ul(e,t,n){const r=hn(e);let i=Qn.min(),s=Os();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=hn(e),i=r.xs.get(n);return void 0!==i?ir.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,ps(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Qn.min(),n?s:Os())).next(e=>(dl(r,xs(t),e),{documents:e,Qs:s})))}function dl(e,t,n){let r=e.Os.get(t)||Qn.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class hl{constructor(){this.activeTargetIds=Ms()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fl{constructor(){this.Mo=new hl,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hl,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pl{Oo(e){}shutdown(){}}const ml="ConnectivityMonitor";class gl{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){sn(ml,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){sn(ml,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let yl=null;function vl(){return null===yl?yl=268435456+Math.round(2147483648*Math.random()):yl++,"0x"+yl.toString(16)}const bl="RestConnection",wl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xl{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===li?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=vl(),a=this.zo(e,t.toUriEncodedString());sn(bl,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),c=W(l);return this.Jo(e,a,o,n,c).then(t=>(sn(bl,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw on(bl,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+tn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=wl[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class kl{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Sl="WebChannelConnection";class _l extends xl{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=vl();return new Promise((i,a)=>{const o=new Bt;o.setWithCredentials(!0),o.listenOnce(Wt.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case qt.NO_ERROR:const n=o.getResponseJson();sn(Sl,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case qt.TIMEOUT:sn(Sl,"RPC '".concat(e,"' ").concat(s," timed out")),a(new pn(fn.DEADLINE_EXCEEDED,"Request time out"));break;case qt.HTTP_ERROR:const r=o.getStatus();if(sn(Sl,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(fn).indexOf(t)>=0?t:fn.UNKNOWN}(n.status);a(new pn(e,n.message))}else a(new pn(fn.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new pn(fn.UNAVAILABLE,"Connection failed."));break;default:cn(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{sn(Sl,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);sn(Sl,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=vl(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Yt(),a=Qt(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");sn(Sl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new kl({Yo:t=>{h?sn(Sl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(sn(Sl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),sn(Sl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Ht.EventType.OPEN,()=>{h||(sn(Sl,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Ht.EventType.CLOSE,()=>{h||(h=!0,sn(Sl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Ht.EventType.ERROR,t=>{h||(h=!0,on(Sl,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new pn(fn.UNAVAILABLE,"The operation could not be completed")))}),p(u,Ht.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];dn(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){sn(Sl,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=wa[e];if(void 0!==t)return Sa(t)}(t),i=a.message;void 0===n&&(n=fn.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new pn(n,i)),u.close()}else sn(Sl,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(a,Gt.STAT_EVENT,t=>{t.stat===Kt.PROXY?sn(Sl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Kt.NOPROXY&&sn(Sl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function El(){return"undefined"!=typeof document?document:null}function Tl(e){return new Ha(e,!0)}class Nl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&sn("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Cl="PersistentStream";class Il{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Nl(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===fn.RESOURCE_EXHAUSTED?(an(t.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===fn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new pn(fn.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return sn(Cl,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(sn(Cl,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Al extends Il{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:cn(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(dn(void 0===t||"string"==typeof t,58123),Yr.fromBase64String(t||"")):(dn(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Yr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?fn.UNKNOWN:Sa(e.code);return new pn(t,e.message||"")}(a);n=new Oa(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Za(e,r.document.name),s=Qa(r.document.updateTime),a=r.document.createTime?Qa(r.document.createTime):Qn.min(),o=new Ri({mapValue:{fields:r.document.fields}}),l=ji.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Pa(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Za(e,r.document),s=r.readTime?Qa(r.readTime):Qn.min(),a=ji.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Pa([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Za(e,r.document),s=r.removedTargetIds||[];n=new Pa([],s,i,null)}else{if(!("filter"in t))return cn(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ba(r,i),a=e.targetId;n=new ja(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Qn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Qn.min():t.readTime?Qa(t.readTime):Qn.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=no(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=os(r)?{documents:ao(e,r)}:{query:oo(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ka(e,t.resumeToken);const r=Wa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Qn.min())>0){n.readTime=qa(e,t.snapshotVersion.toTimestamp());const r=Wa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return cn(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=no(this.serializer),t.removeTarget=e,this.q_(t)}}class Dl extends Il{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return dn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dn(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){dn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(dn(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Qa(e.updateTime):Qa(t);return n.isEqual(Qn.min())&&(n=Qa(t)),new ea(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Qa(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=no(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>so(this.serializer,e))};this.q_(t)}}class Rl{}class Pl extends Rl{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new pn(fn.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,Xa(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===fn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new pn(fn.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,Xa(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===fn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new pn(fn.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class jl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(an(t),this.aa=!1):sn("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Ol="RemoteStore";class Ll{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{ql(this)&&(sn(Ol,"Restarting streams for network reachability change."),await async function(e){const t=hn(e);t.Ea.add(4),await Ul(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Ml(t)}(this))})}),this.Ra=new jl(n,r)}}async function Ml(e){if(ql(e))for(const t of e.da)await t(!0)}async function Ul(e){for(const t of e.da)await t(!1)}function Fl(e,t){const n=hn(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Wl(n)?Hl(n):uc(n).O_()&&zl(n,t))}function Vl(e,t){const n=hn(e),r=uc(n);n.Ia.delete(t),r.O_()&&Bl(n,t),0===n.Ia.size&&(r.O_()?r.L_():ql(n)&&n.Ra.set("Unknown"))}function zl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Qn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}uc(e).Y_(t)}function Bl(e,t){e.Va.Ue(t),uc(e).Z_(t)}function Hl(e){e.Va=new Ma({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),uc(e).start(),e.Ra.ua()}function Wl(e){return ql(e)&&!uc(e).x_()&&e.Ia.size>0}function ql(e){return 0===hn(e).Ea.size}function Kl(e){e.Va=void 0}async function Gl(e){e.Ra.set("Online")}async function Ql(e){e.Ia.forEach((t,n)=>{zl(e,t)})}async function Yl(e,t){Kl(e),Wl(e)?(e.Ra.ha(t),Hl(e)):e.Ra.set("Unknown")}async function Xl(e,t,n){if(e.Ra.set("Online"),t instanceof Oa&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){sn(Ol,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Jl(e,n)}else if(t instanceof Pa?e.Va.Ze(t):t instanceof ja?e.Va.st(t):e.Va.tt(t),!n.isEqual(Qn.min()))try{const t=await sl(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Yr.EMPTY_BYTE_STRING,r.snapshotVersion)),Bl(e,t);const i=new bo(r.target,t,n,r.sequenceNumber);zl(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){sn(Ol,"Failed to raise snapshot:",t),await Jl(e,t)}}async function Jl(e,t,n){if(!ar(t))throw t;e.Ea.add(1),await Ul(e),e.Ra.set("Offline"),n||(n=()=>sl(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{sn(Ol,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Ml(e)})}function $l(e,t){return t().catch(n=>Jl(e,n,t))}async function Zl(e){const t=hn(e),n=dc(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:lr;for(;ec(t);)try{const e=await ol(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,tc(t,e)}catch(e){await Jl(t,e)}nc(t)&&rc(t)}function ec(e){return ql(e)&&e.Ta.length<10}function tc(e,t){e.Ta.push(t);const n=dc(e);n.O_()&&n.X_&&n.ea(t.mutations)}function nc(e){return ql(e)&&!dc(e).x_()&&e.Ta.length>0}function rc(e){dc(e).start()}async function ic(e){dc(e).ra()}async function sc(e){const t=dc(e);for(const n of e.Ta)t.ea(n.mutations)}async function ac(e,t,n){const r=e.Ta.shift(),i=ya.from(r,t,n);await $l(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Zl(e)}async function oc(e,t){t&&dc(e).X_&&await async function(e,t){if(function(e){return ka(e)&&e!==fn.ABORTED}(t.code)){const n=e.Ta.shift();dc(e).B_(),await $l(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Zl(e)}}(e,t),nc(e)&&rc(e)}async function lc(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),sn(Ol,"RemoteStore received new credentials");const r=ql(n);n.Ea.add(3),await Ul(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ml(n)}async function cc(e,t){const n=hn(e);t?(n.Ea.delete(2),await Ml(n)):t||(n.Ea.add(2),await Ul(n),n.Ra.set("Unknown"))}function uc(e){return e.ma||(e.ma=function(e,t,n){const r=hn(e);return r.sa(),new Al(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Gl.bind(null,e),t_:Ql.bind(null,e),r_:Yl.bind(null,e),H_:Xl.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Wl(e)?Hl(e):e.Ra.set("Unknown")):(await e.ma.stop(),Kl(e))})),e.ma}function dc(e){return e.fa||(e.fa=function(e,t,n){const r=hn(e);return r.sa(),new Dl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:ic.bind(null,e),r_:oc.bind(null,e),ta:sc.bind(null,e),na:ac.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Zl(e)):(await e.fa.stop(),e.Ta.length>0&&(sn(Ol,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class hc{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new hc(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new pn(fn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fc(e,t){if(an("AsyncQueue","".concat(t,": ").concat(e)),ar(e))return new pn(fn.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class pc{static emptySet(e){return new pc(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Mn.comparator(t.key,n.key):(e,t)=>Mn.comparator(e.key,t.key),this.keyedMap=Cs(),this.sortedSet=new Br(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new pc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class mc{constructor(){this.ga=new Br(Mn.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):cn(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class gc{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new gc(e,t,pc.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ys(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class yc{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class vc{constructor(){this.queries=bc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=hn(e),r=n.queries;n.queries=bc(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new pn(fn.ABORTED,"Firestore shutting down"))}}function bc(){return new _s(e=>vs(e),ys)}async function wc(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new yc,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=fc(e,"Initialization of query '".concat(bs(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&_c(n)}async function xc(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kc(e,t){const n=hn(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&_c(n)}function Sc(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function _c(e){e.Ca.forEach(e=>{e.next()})}var Ec,Tc;(Tc=Ec||(Ec={})).Ma="default",Tc.Cache="cache";class Nc{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new gc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ec.Cache}}class Cc{constructor(e){this.key=e}}class Ic{constructor(e){this.key=e}}class Ac{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Os(),this.mutatedKeys=Os(),this.eu=ks(e),this.tu=new pc(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new mc,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=ws(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cn(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new gc(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Os(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Ic(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Cc(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Os();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return gc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Dc="SyncEngine";class Rc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Pc{constructor(e){this.key=e,this.hu=!1}}class jc{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new _s(e=>vs(e),ys),this.Iu=new Map,this.Eu=new Set,this.du=new Br(Mn.comparator),this.Au=new Map,this.Ru=new Bo,this.Vu={},this.mu=new Map,this.fu=Co.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Oc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=nu(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Mc(r,t,n,!0),i}async function Lc(e,t){const n=nu(e);await Mc(n,t,!0,!1)}async function Mc(e,t,n,r){const i=await ll(e.localStore,ps(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Uc(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Fl(e.remoteStore,i),o}async function Uc(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await ul(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Xc(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await ul(e.localStore,t,!0),a=new Ac(t,s.Qs),o=a.ru(s.documents),l=Ra.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);Xc(e,n,c.au);const u=new Rc(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Fc(e,t,n){const r=hn(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!ys(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await cl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Vl(r.remoteStore,i.targetId),Qc(r,i.targetId)}).catch(rr)):(Qc(r,i.targetId),await cl(r.localStore,i.targetId,!0))}async function Vc(e,t){const n=hn(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Vl(n.remoteStore,r.targetId))}async function zc(e,t){const n=hn(e);try{const e=await function(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Yr.EMPTY_BYTE_STRING,Qn.min()).withLastLimboFreeSnapshotVersion(Qn.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Pi.updateTargetData(e,c))});let o=Ts(),l=Os();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(al(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Qn.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return ir.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(dn(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?dn(r.hu,14607):e.removedDocuments.size>0&&(dn(r.hu,42227),r.hu=!1))}),await Zc(n,e,t)}catch(e){await rr(e)}}function Bc(e,t,n){const r=hn(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=hn(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&_c(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Hc(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Br(Mn.comparator);e=e.insert(s,ji.newNoDocument(s,Qn.min()));const n=Os().add(s),i=new Da(Qn.min(),new Map,new Br(Tn),e,n);await zc(r,i),r.du=r.du.remove(s),r.Au.delete(t),$c(r)}else await cl(r.localStore,t,!1).then(()=>Qc(r,t,n)).catch(rr)}async function Wc(e,t){const n=hn(e),r=t.batch.batchId;try{const e=await function(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=ir.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);dn(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Os();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Gc(n,r,null),Kc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zc(n,e)}catch(e){await rr(e)}}async function qc(e,t,n){const r=hn(e);try{const e=await function(e,t){const n=hn(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(dn(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Gc(r,t,n),Kc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Zc(r,e)}catch(n){await rr(n)}}function Kc(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Gc(e,t,n){const r=hn(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Qc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Yc(e,t)})}function Yc(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Vl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),$c(e))}function Xc(e,t,n){for(const r of n)r instanceof Cc?(e.Ru.addReference(r.key,t),Jc(e,r)):r instanceof Ic?(sn(Dc,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Yc(e,r.key)):cn(19791,{wu:r})}function Jc(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(sn(Dc,"New document in limbo: "+n),e.Eu.add(r),$c(e))}function $c(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Mn(jn.fromString(t)),r=e.fu.next();e.Au.set(r,new Pc(n)),e.du=e.du.insert(n,r),Fl(e.remoteStore,new bo(ps(us(n.path)),r,"TargetPurposeLimboResolution",or.ce))}}async function Zc(e,t,n){const r=hn(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=$o.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=hn(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ir.forEach(t,t=>ir.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ir.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ar(e))throw e;sn(tl,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function eu(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){sn(Dc,"User change. New user:",t.toKey());const e=await il(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new pn(fn.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Zc(n,e.Ls)}}function tu(e,t){const n=hn(e),r=n.Au.get(t);if(r&&r.hu)return Os().add(r.key);{let e=Os();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function nu(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=zc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Hc.bind(null,t),t.Pu.H_=kc.bind(null,t.eventManager),t.Pu.yu=Sc.bind(null,t.eventManager),t}function ru(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Wc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qc.bind(null,t),t}class iu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return rl(this.persistence,new el,e.initialUser,this.serializer)}Cu(e){return new Qo(Xo.mi,this.serializer)}Du(e){return new fl}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}iu.provider={build:()=>new iu};class su extends iu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){dn(this.persistence.referenceDelegate instanceof Jo,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Po(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?No.withCacheSize(this.cacheSizeBytes):No.DEFAULT;return new Qo(e=>Jo.mi(e,t),this.serializer)}}class au{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Bc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=eu.bind(null,this.syncEngine),await cc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new vc}createDatastore(e){const t=Tl(e.databaseInfo.databaseId),n=function(e){return new _l(e)}(e.databaseInfo);return function(e,t,n,r){return new Pl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ll(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Bc(this.syncEngine,e,0),gl.v()?new gl:new pl)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new jc(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=hn(e);sn(Ol,"RemoteStore shutting down."),t.Ea.add(5),await Ul(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}au.provider={build:()=>new au};class ou{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):an("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const lu="FirestoreClient";class cu{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=en.UNAUTHENTICATED,this.clientId=En.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{sn(lu,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(sn(lu,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=fc(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function uu(e,t){e.asyncQueue.verifyOperationInProgress(),sn(lu,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await il(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function du(e,t){e.asyncQueue.verifyOperationInProgress();const n=await hu(e);sn(lu,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>lc(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>lc(t.remoteStore,n)),e._onlineComponents=t}async function hu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){sn(lu,"Using user provided OfflineComponentProvider");try{await uu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===fn.FAILED_PRECONDITION||e.code===fn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;on("Error using user provided cache. Falling back to memory cache: "+n),await uu(e,new iu)}}else sn(lu,"Using default OfflineComponentProvider"),await uu(e,new su(void 0));return e._offlineComponents}async function fu(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(sn(lu,"Using user provided OnlineComponentProvider"),await du(e,e._uninitializedComponentsProvider._online)):(sn(lu,"Using default OnlineComponentProvider"),await du(e,new au))),e._onlineComponents}function pu(e){return fu(e).then(e=>e.syncEngine)}async function mu(e){const t=await fu(e),n=t.eventManager;return n.onListen=Oc.bind(null,t.syncEngine),n.onUnlisten=Fc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Lc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Vc.bind(null,t.syncEngine),n}function gu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new mn;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ou({next:o=>{s.Nu(),t.enqueueAndForget(()=>xc(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new pn(fn.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new pn(fn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Nc(us(n.path),s,{includeMetadataChanges:!0,qa:!0});return wc(e,a)}(await mu(e),e.asyncQueue,t,n,r)),r.promise}function yu(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const vu=new Map,bu="firestore.googleapis.com",wu=!0;class xu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new pn(fn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bu,this.ssl=wu}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:wu;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=To;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Ao)throw new pn(fn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new pn(fn.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yu(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new pn(fn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new pn(fn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new pn(fn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ku{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pn(fn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new pn(fn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xu(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new yn;switch(e.type){case"firstParty":return new xn(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new pn(fn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vu.get(e);t&&(sn("ComponentProvider","Removing Datastore"),vu.delete(e),t.terminate())}(this),Promise.resolve()}}function Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Bn(e,ku);const i=W(t),s=e._getSettings(),a=c(c({},s),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);i&&(q("https://".concat(o)),Q("Firestore",!0)),s.host!==bu&&s.host!==o&&on("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},s),{},{host:o,ssl:i,emulatorOptions:r});if(!ne(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=en.MOCK_USER;else{var u;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[L(JSON.stringify({alg:"none",type:"JWT"})),L(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new pn(fn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new en(i)}e._authCredentials=new vn(new gn(t,n))}}class _u{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new _u(this.firestore,e,this._query)}}class Eu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Eu(this.firestore,e,this._key)}toJSON(){return{type:Eu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Wn(t,Eu._jsonSchema))return new Eu(e,n||null,new Mn(jn.fromString(t.referencePath)))}}Eu._jsonSchemaVersion="firestore/documentReference/1.0",Eu._jsonSchema={type:Hn("string",Eu._jsonSchemaVersion),referencePath:Hn("string")};class Tu extends _u{constructor(e,t,n){super(e,t,us(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Eu(this.firestore,null,new Mn(e))}withConverter(e){return new Tu(this.firestore,e,this._path)}}function Nu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ce(e),1===arguments.length&&(t=En.newId()),Un("doc","path",t),e instanceof ku){const n=jn.fromString(t,...r);return Fn(n),new Eu(e,null,new Mn(n))}{if(!(e instanceof Eu||e instanceof Tu))throw new pn(fn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(jn.fromString(t,...r));return Fn(n),new Eu(e.firestore,e instanceof Tu?e.converter:null,new Mn(n))}}const Cu="AsyncQueue";class Iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Nl(this,"async_queue_retry"),this._c=()=>{const e=El();e&&sn(Cu,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=El();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=El();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new mn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ar(e))throw e;sn(Cu,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,an("INTERNAL UNHANDLED ERROR: ",Au(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=hc.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&cn(47125,{Pc:Au(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Au(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Du extends ku{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Iu,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iu(e),this._firestoreClient=void 0,await e}}}function Ru(e){if(e._terminated)throw new pn(fn.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Pu(e),e._firestoreClient}function Pu(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new oi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,yu(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new cu(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class ju{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ju(Yr.fromBase64String(e))}catch(e){throw new pn(fn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ju(Yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ju._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wn(e,ju._jsonSchema))return ju.fromBase64String(e.bytes)}}ju._jsonSchemaVersion="firestore/bytes/1.0",ju._jsonSchema={type:Hn("string",ju._jsonSchemaVersion),bytes:Hn("string")};class Ou{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new pn(fn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ln(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lu{constructor(e){this._methodName=e}}class Mu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pn(fn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pn(fn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Tn(this._lat,e._lat)||Tn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mu._jsonSchemaVersion}}static fromJSON(e){if(Wn(e,Mu._jsonSchema))return new Mu(e.latitude,e.longitude)}}Mu._jsonSchemaVersion="firestore/geoPoint/1.0",Mu._jsonSchema={type:Hn("string",Mu._jsonSchemaVersion),latitude:Hn("number"),longitude:Hn("number")};class Uu{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Uu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wn(e,Uu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Uu(e.vectorValues);throw new pn(fn.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Uu._jsonSchemaVersion="firestore/vectorValue/1.0",Uu._jsonSchema={type:Hn("string",Uu._jsonSchemaVersion),vectorValues:Hn("object")};const Fu=/^__.*__$/;class Vu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new ca(e,this.data,t,this.fieldTransforms)}}class zu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Bu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cn(40011,{Ac:e})}}class Hu{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hu(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return id(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Bu(this.Ac)&&Fu.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Wu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Tl(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Hu({Ac:e,methodName:t,Dc:n,path:Ln.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qu(e){const t=e._freezeSettings(),n=Tl(e._databaseId);return new Wu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ku(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);ed("Data must be an object, but it was:",a,r);const o=$u(r,a);let l,c;if(s.merge)l=new Gr(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=td(t,r,n);if(!a.contains(i))throw new pn(fn.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));sd(e,i)||e.push(i)}l=new Gr(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Vu(new Ri(o),l,c)}class Gu extends Lu{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gu}}class Qu extends Lu{_toFieldTransform(e){return new Zs(e.path,new qs)}isEqual(e){return e instanceof Qu}}function Yu(e,t,n,r){const i=e.Cc(1,t,n);ed("Data must be an object, but it was:",i,r);const s=[],a=Ri.empty();Vr(r,(e,r)=>{const o=rd(t,e,n);r=ce(r);const l=i.yc(o);if(r instanceof Gu)s.push(o);else{const e=Ju(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new Gr(s);return new zu(a,o,i.fieldTransforms)}function Xu(e,t,n,r,i,s){const a=e.Cc(1,t,n),o=[td(t,r,n)],l=[i];if(s.length%2!=0)throw new pn(fn.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)o.push(td(t,s[h])),l.push(s[h+1]);const c=[],u=Ri.empty();for(let h=o.length-1;h>=0;--h)if(!sd(c,o[h])){const e=o[h];let t=l[h];t=ce(t);const n=a.yc(e);if(t instanceof Gu)c.push(e);else{const r=Ju(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Gr(c);return new zu(u,d,a.fieldTransforms)}function Ju(e,t){if(Zu(e=ce(e)))return ed("Unsupported field value:",t,e),$u(e,t);if(e instanceof Lu)return function(e,t){if(!Bu(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ju(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ce(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Vs(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Gn.fromDate(e);return{timestampValue:qa(t.serializer,n)}}if(e instanceof Gn){const n=new Gn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:qa(t.serializer,n)}}if(e instanceof Mu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ju)return{bytesValue:Ka(t.serializer,e._byteString)};if(e instanceof Eu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ya(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Uu)return function(e,t){return{mapValue:{fields:{[ui]:{stringValue:fi},[pi]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Us(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(zn(e)))}(e,t)}function $u(e,t){const n={};return zr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vr(e,(e,r)=>{const i=Ju(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Zu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Gn||e instanceof Mu||e instanceof ju||e instanceof Eu||e instanceof Lu||e instanceof Uu)}function ed(e,t,n){if(!Zu(n)||!Vn(n)){const r=zn(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function td(e,t,n){if((t=ce(t))instanceof Ou)return t._internalPath;if("string"==typeof t)return rd(e,t);throw id("Field path arguments must be of type string or ",e,!1,void 0,n)}const nd=new RegExp("[~\\*/\\[\\]]");function rd(e,t,n){if(t.search(nd)>=0)throw id("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ou(...t.split("."))._internalPath}catch(r){throw id("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function id(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new pn(fn.INVALID_ARGUMENT,o+e+l)}function sd(e,t){return e.some(e=>e.isEqual(t))}class ad{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Eu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new od(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ld("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class od extends ad{data(){return super.data()}}function ld(e,t){return"string"==typeof t?rd(e,t):t instanceof Ou?t._internalPath:t._delegate._internalPath}class cd{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw cn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Vr(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[pi].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>$r(e.doubleValue));return new Uu(n)}convertGeoPoint(e){return new Mu($r(e.latitude),$r(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=si(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ai(e));default:return null}}convertTimestamp(e){const t=Jr(e);return new Gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=jn.fromString(e);dn(vo(n),9688,{name:e});const r=new ci(n.get(1),n.get(3)),i=new Mn(n.popFirst(5));return r.isEqual(t)||an("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ud(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class dd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hd extends ad{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ld("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pn(fn.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=hd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}hd._jsonSchemaVersion="firestore/documentSnapshot/1.0",hd._jsonSchema={type:Hn("string",hd._jsonSchemaVersion),bundleSource:Hn("string","DocumentSnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class fd extends hd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class pd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new dd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new fd(this._firestore,this._userDataWriter,n.key,n,new dd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new pn(fn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new fd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new dd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new fd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:md(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pn(fn.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=En.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function md(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cn(61501,{type:e})}}function gd(e){e=Bn(e,Eu);const t=Bn(e.firestore,Du);return gu(Ru(t),e._key).then(n=>bd(t,e,n))}pd._jsonSchemaVersion="firestore/querySnapshot/1.0",pd._jsonSchema={type:Hn("string",pd._jsonSchemaVersion),bundleSource:Hn("string","QuerySnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class yd extends cd{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Eu(this.firestore,null,t)}}function vd(e,t){return function(e,t){const n=new mn;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=ru(e);try{const e=await function(e,t){const n=hn(e),r=Gn.now(),i=t.reduce((e,t)=>e.add(t.key),Os());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Ts(),l=Os();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=oa(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new ua(e.key,t,Pi(t.value.mapValue),ta.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Is(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Br(Tn)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Zc(r,e.changes),await Zl(r.remoteStore)}catch(e){const t=fc(e,"Failed to persist write");n.reject(t)}}(await pu(e),t,n)),n.promise}(Ru(e),t)}function bd(e,t,n){const r=n.docs.get(t._key),i=new yd(e);return new hd(e,i,t._key,r,new dd(n.hasPendingWrites,n.fromCache),t.converter)}function wd(){return new Qu("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){tn=e}(_t),bt(new ue("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Du(new bn(e.getProvider("auth-internal")),new Sn(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new pn(fn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ci(e.options.projectId,t)}(s,r),s);return i=c({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Nt($t,Zt,e),Nt($t,Zt,"esm2020")}();Nt("firebase","12.3.0","app");const xd=["providerId"],kd=["uid","auth","stsTokenManager"],Sd=["providerId","signInMethod"];function _d(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ed=_d,Td=new ee("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nd=new we("@firebase/auth");function Cd(e){if(Nd.logLevel<=me.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Nd.error("Auth (".concat(_t,"): ").concat(e),...n)}}function Id(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw jd(e,...n)}function Ad(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jd(e,...n)}function Dd(e,t,n){const r=c(c({},Ed()),{},{[t]:n});return new ee("auth","Firebase",r).create(t,{appName:e.name})}function Rd(e){return Dd(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pd(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Id(e,"argument-error"),Dd(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function jd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Td.create(e,...n)}function Od(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw jd(t,...r)}}function Ld(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Cd(t),new Error(t)}function Md(e,t){e||Ld(t)}function Ud(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Fd(){return"http:"===Vd()||"https:"===Vd()}function Vd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function zd(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Fd()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Bd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Md(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Y())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return zd()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hd(e,t){Md(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Wd{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ld("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ld("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ld("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Kd=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Gd=new Bd(3e4,6e4);function Qd(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function Yd(e,t,n,r){return Xd(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=ie(c({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=c({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&W(e.emulatorConfig.host)&&(l.credentials="include"),Wd.fetch()(await $d(e,e.config.apiHost,n,a),l)})}async function Xd(e,t,n){e._canInitEmulator=!1;const r=c(c({},qd),t);try{const t=new eh(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw th(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw th(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw th(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw th(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Dd(e,o,a);Id(e,o)}}catch(i){if(i instanceof Z)throw i;Id(e,"network-request-failed",{message:String(i)})}}async function Jd(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Yd(e,t,n,r,i);return"mfaPendingCredential"in s&&Id(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function $d(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?Hd(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(Kd.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function Zd(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eh{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ad(this.auth,"network-request-failed")),Gd.get())})}}function th(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ad(e,t,r);return i.customData._tokenResponse=n,i}function nh(e){return void 0!==e&&void 0!==e.enterprise}class rh{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Zd(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ih(e,t){return Yd(e,"GET","/v2/recaptchaConfig",Qd(e,t))}async function sh(e,t){return Yd(e,"POST","/v1/accounts:lookup",t)}function ah(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function oh(e){return 1e3*Number(e)}function lh(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Cd("JWT malformed, contained fewer than 3 sections"),null;try{const e=M(n);return e?JSON.parse(e):(Cd("Failed to decode base64 JWT payload"),null)}catch(i){return Cd("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function ch(e){const t=lh(e);return Od(t,"internal-error"),Od("undefined"!==typeof t.exp,"internal-error"),Od("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function uh(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Z&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class dh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class hh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ah(this.lastLoginAt),this.creationTime=ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function fh(e){var t;const n=e.auth,r=await e.getIdToken(),i=await uh(e,sh(n,{idToken:r}));Od(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?ph(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new hh(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function ph(e){return e.map(e=>{let{providerId:t}=e,n=u(e,xd);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class mh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Od(e.idToken,"internal-error"),Od("undefined"!==typeof e.idToken,"internal-error"),Od("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ch(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Od(0!==e.length,"internal-error");const t=ch(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Od(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Xd(e,{},async()=>{const n=ie({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await $d(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&W(e.emulatorConfig.host)&&(o.credentials="include"),Wd.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new mh;return n&&(Od("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Od("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Od("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mh,this.toJSON())}_performRefresh(){return Ld("not implemented")}}function gh(e,t){Od("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class yh{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=u(e,kd);this.providerId="firebase",this.proactiveRefresh=new dh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new hh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await uh(this,this.stsTokenManager.getToken(this.auth,e));return Od(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ce(e),r=await n.getIdToken(t),i=lh(r);Od(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ah(oh(i.auth_time)),issuedAtTime:ah(oh(i.iat)),expirationTime:ah(oh(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ce(e);await fh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Od(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yh(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Od(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await fh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xt(this.auth.app))return Promise.reject(Rd(this.auth));const e=await this.getIdToken();return await uh(this,async function(e,t){return Yd(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:k,stsTokenManager:S}=t;Od(b&&S,e,"internal-error");const _=mh.fromJSON(this.name,S);Od("string"===typeof b,e,"internal-error"),gh(d,e.name),gh(h,e.name),Od("boolean"===typeof w,e,"internal-error"),Od("boolean"===typeof x,e,"internal-error"),gh(f,e.name),gh(p,e.name),gh(m,e.name),gh(g,e.name),gh(y,e.name),gh(v,e.name);const E=new yh({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:_,createdAt:y,lastLoginAt:v});return k&&Array.isArray(k)&&(E.providerData=k.map(e=>c({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new mh;r.updateFromServerResponse(t);const i=new yh({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await fh(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Od(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ph(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new mh;a.updateFromIdToken(n);const o=new yh({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new hh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const vh=new Map;function bh(e){Md(e instanceof Function,"Expected a class definition");let t=vh.get(e);return t?(Md(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vh.set(e,t),t)}class wh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wh.type="NONE";const xh=wh;function kh(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Sh{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=kh(this.userKey,r.apiKey,i),this.fullPersistenceKey=kh("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await sh(this.auth,{idToken:e}).catch(()=>{});return t?yh._fromGetAccountInfoResponse(this.auth,t,e):null}return yh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Sh(bh(xh),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||bh(xh);const s=kh(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await sh(e,{idToken:t}).catch(()=>{});if(!r)break;n=await yh._fromGetAccountInfoResponse(e,r,t)}else n=yh._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new Sh(i,e,n)):new Sh(i,e,n)}}function _h(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ch(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Eh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ah(t))return"Blackberry";if(Dh(t))return"Webos";if(Th(t))return"Safari";if((t.includes("chrome/")||Nh(t))&&!t.includes("edge/"))return"Chrome";if(Ih(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Eh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y();return/firefox\//i.test(e)}function Th(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y();return/crios\//i.test(e)}function Ch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y();return/iemobile/i.test(e)}function Ih(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y();return/android/i.test(e)}function Ah(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y();return/blackberry/i.test(e)}function Dh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y();return/webos/i.test(e)}function Rh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ph(){return function(){const e=Y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function jh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y();return Rh(e)||Ih(e)||Dh(e)||Ah(e)||/windows phone/i.test(e)||Ch(e)}function Oh(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=_h(Y());break;case"Worker":t="".concat(_h(Y()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(_t,"/").concat(r)}class Lh{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Mh{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Uh{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vh(this),this.idTokenSubscription=new Vh(this),this.beforeStateQueue=new Lh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Td,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bh(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Sh.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await sh(this,{idToken:e}),n=await yh._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xt(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null===(s=n)||void 0===s?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Od(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await fh(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xt(this.app))return Promise.reject(Rd(this));const t=e?ce(e):null;return t&&Od(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Od(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xt(this.app)?Promise.reject(Rd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xt(this.app)?Promise.reject(Rd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bh(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Yd(e,"GET","/v2/passwordPolicy",Qd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Mh(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ee("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Yd(e,"POST","/v2/accounts:revokeToken",Qd(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bh(e)||this._popupRedirectResolver;Od(t,this,"argument-error"),this.redirectPersistenceManager=await Sh.create(this,[bh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Od(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Od(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Oh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Nd.logLevel<=me.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Nd.warn("Auth (".concat(_t,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Fh(e){return ce(e)}class Vh{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new oe(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Od(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bh(e){return zh.loadJS(e)}function Hh(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Wh{constructor(){this.enterprise=new qh}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class qh{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Kh="NO_RECAPTCHA";class Gh{constructor(e){this.type="recaptcha-enterprise",this.auth=Fh(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;nh(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Kh)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Wh).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{ih(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new rh(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&nh(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=zh.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Bh(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Qh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Gh(e);let a;if(i)a=Kh;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Yh(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Qh(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Qh(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await Qh(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Qh(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Qh(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Xh(e){const t=Fh(e),n=await ih(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new rh(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Gh(t).verify()}}function Jh(e,t,n){const r=Fh(e);Od(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=$h(t),{host:a,port:o}=function(e){const t=$h(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Zh(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Zh(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(s,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Od(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Od(ne(c,r.config.emulator)&&ne(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,W(a)?(q("".concat(s,"//").concat(a).concat(l)),Q("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function $h(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Zh(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ef{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ld("not implemented")}_getIdTokenResponse(e){return Ld("not implemented")}_linkToIdToken(e,t){return Ld("not implemented")}_getReauthenticationResolver(e){return Ld("not implemented")}}async function tf(e,t){return Yd(e,"POST","/v1/accounts:signUp",t)}async function nf(e,t){return Jd(e,"POST","/v1/accounts:signInWithPassword",Qd(e,t))}class rf extends ef{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new rf(e,t,"password")}static _fromEmailAndCode(e,t){return new rf(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Yh(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",nf,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Jd(e,"POST","/v1/accounts:signInWithEmailLink",Qd(e,t))}(e,{email:this._email,oobCode:this._password});default:Id(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Yh(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tf,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Jd(e,"POST","/v1/accounts:signInWithEmailLink",Qd(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Id(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function sf(e,t){return Jd(e,"POST","/v1/accounts:signInWithIdp",Qd(e,t))}class af extends ef{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new af(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Id("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=u(t,Sd);if(!n||!r)return null;const s=new af(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return sf(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,sf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sf(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ie(t)}return e}}async function of(e,t){return Yd(e,"POST","/v1/accounts:sendVerificationCode",Qd(e,t))}const lf={USER_NOT_FOUND:"user-not-found"};class cf extends ef{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new cf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new cf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Jd(e,"POST","/v1/accounts:signInWithPhoneNumber",Qd(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Jd(e,"POST","/v1/accounts:signInWithPhoneNumber",Qd(e,t));if(n.temporaryProof)throw th(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Jd(e,"POST","/v1/accounts:signInWithPhoneNumber",Qd(e,c(c({},t),{},{operation:"REAUTH"})),lf)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new cf({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class uf{constructor(e){var t,n,r,i,s,a;const o=se(ae(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Od(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=se(ae(e)).link,n=t?se(ae(t)).deep_link_id:null,r=se(ae(e)).deep_link_id;return(r?se(ae(r)).link:null)||r||n||t||e}(e);try{return new uf(t)}catch(n){return null}}}class df{constructor(){this.providerId=df.PROVIDER_ID}static credential(e,t){return rf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=uf.parseLink(t);return Od(n,"argument-error"),rf._fromEmailAndCode(e,n.code,n.tenantId)}}df.PROVIDER_ID="password",df.EMAIL_PASSWORD_SIGN_IN_METHOD="password",df.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class hf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ff extends hf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pf extends ff{constructor(){super("facebook.com")}static credential(e){return af._fromParams({providerId:pf.PROVIDER_ID,signInMethod:pf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pf.credentialFromTaggedObject(e)}static credentialFromError(e){return pf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pf.credential(t.oauthAccessToken)}catch(n){return null}}}pf.FACEBOOK_SIGN_IN_METHOD="facebook.com",pf.PROVIDER_ID="facebook.com";class mf extends ff{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return af._fromParams({providerId:mf.PROVIDER_ID,signInMethod:mf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mf.credentialFromTaggedObject(e)}static credentialFromError(e){return mf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return mf.credential(n,r)}catch(i){return null}}}mf.GOOGLE_SIGN_IN_METHOD="google.com",mf.PROVIDER_ID="google.com";class gf extends ff{constructor(){super("github.com")}static credential(e){return af._fromParams({providerId:gf.PROVIDER_ID,signInMethod:gf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gf.credentialFromTaggedObject(e)}static credentialFromError(e){return gf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return gf.credential(t.oauthAccessToken)}catch(n){return null}}}gf.GITHUB_SIGN_IN_METHOD="github.com",gf.PROVIDER_ID="github.com";class yf extends ff{constructor(){super("twitter.com")}static credential(e,t){return af._fromParams({providerId:yf.PROVIDER_ID,signInMethod:yf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yf.credentialFromTaggedObject(e)}static credentialFromError(e){return yf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return yf.credential(n,r)}catch(i){return null}}}yf.TWITTER_SIGN_IN_METHOD="twitter.com",yf.PROVIDER_ID="twitter.com";class vf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await yh._fromIdTokenResponse(e,n,r),s=bf(n);return new vf({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=bf(n);return new vf({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function bf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class wf extends Z{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,wf.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new wf(e,t,n,r)}}function xf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw wf._fromErrorAndOperation(e,n,t,r);throw n})}async function kf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await uh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return vf._forOperation(e,"link",r)}async function Sf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(xt(r.app))return Promise.reject(Rd(r));const i="reauthenticate";try{const s=await uh(e,xf(r,i,t,e),n);Od(s.idToken,r,"internal-error");const a=lh(s.idToken);Od(a,r,"internal-error");const{sub:o}=a;return Od(e.uid===o,r,"user-mismatch"),vf._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Id(r,"user-mismatch"),s}}async function _f(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(xt(e.app))return Promise.reject(Rd(e));const r="signIn",i=await xf(e,r,t),s=await vf._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Ef(e,t){return Yd(e,"POST","/v2/accounts/mfaEnrollment:start",Qd(e,t))}new WeakMap;const Tf="__sak";class Nf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tf,"1"),this.storage.removeItem(Tf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Cf extends Nf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jh(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ph()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cf.type="LOCAL";const If=Cf;function Af(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Df(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Rf{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Df(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Af(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Df(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Df(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Af(n);const i=setInterval(()=>{const e=Af(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Rf.type="COOKIE";class Pf extends Nf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Pf.type="SESSION";const jf=Pf;class Of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Of(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Lf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Of.receivers=[];class Mf{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=Lf("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Uf(){return window}function Ff(){return"undefined"!==typeof Uf().WorkerGlobalScope&&"function"===typeof Uf().importScripts}const Vf="firebaseLocalStorageDb",zf="firebaseLocalStorage",Bf="fbase_key";class Hf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wf(e,t){return e.transaction([zf],t?"readwrite":"readonly").objectStore(zf)}function qf(){const e=indexedDB.open(Vf,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(zf,{keyPath:Bf})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(zf)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Vf);return new Hf(e).toPromise()}(),t(await qf()))})})}async function Kf(e,t,n){const r=Wf(e,!0).put({[Bf]:t,value:n});return new Hf(r).toPromise()}function Gf(e,t){const n=Wf(e,!0).delete(t);return new Hf(n).toPromise()}class Qf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await qf()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ff()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Of._getInstance(Ff()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Mf(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qf();return await Kf(e,Tf,"1"),await Gf(e,Tf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kf(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Wf(e,!1).get(t),r=await new Hf(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gf(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Wf(e,!1).getAll();return new Hf(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Qf.type="LOCAL";const Yf=Qf;function Xf(e,t){return Yd(e,"POST","/v2/accounts/mfaSignIn:start",Qd(e,t))}Hh("rcb"),new Bd(3e4,6e4);const Jf="recaptcha";async function $f(e,t,n){if(!e._getRecaptchaConfig())try{await Xh(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Od("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Yh(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Kh){Od((null===n||void 0===n?void 0:n.type)===Jf,e,"argument-error");return Ef(e,await Zf(e,t,n))}return Ef(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Od("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Od(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Yh(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Kh){Od((null===n||void 0===n?void 0:n.type)===Jf,e,"argument-error");return Xf(e,await Zf(e,t,n))}return Xf(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Yh(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Kh){Od((null===n||void 0===n?void 0:n.type)===Jf,e,"argument-error");return of(e,await Zf(e,t,n))}return of(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Zf(e,t,n){Od(n.type===Jf,e,"argument-error");const r=await n.verify();Od("string"===typeof r,e,"argument-error");const i=c({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ep{constructor(e){this.providerId=ep.PROVIDER_ID,this.auth=Fh(e)}verifyPhoneNumber(e,t){return $f(this.auth,e,ce(t))}static credential(e,t){return cf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ep.credentialFromTaggedObject(t)}static credentialFromError(e){return ep.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?cf._fromTokenResponse(n,r):null}}function tp(e,t){return t?bh(t):(Od(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ep.PROVIDER_ID="phone",ep.PHONE_SIGN_IN_METHOD="phone";class np extends ef{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rp(e){return _f(e.auth,new np(e),e.bypassAuthState)}function ip(e){const{auth:t,user:n}=e;return Od(n,t,"internal-error"),Sf(n,new np(e),e.bypassAuthState)}async function sp(e){const{auth:t,user:n}=e;return Od(n,t,"internal-error"),kf(n,new np(e),e.bypassAuthState)}class ap{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rp;case"linkViaPopup":case"linkViaRedirect":return sp;case"reauthViaPopup":case"reauthViaRedirect":return ip;default:Id(this.auth,"internal-error")}}resolve(e){Md(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Md(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const op=new Bd(2e3,1e4);class lp extends ap{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,lp.currentPopupAction&&lp.currentPopupAction.cancel(),lp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Od(e,this.auth,"internal-error"),e}async onExecution(){Md(1===this.filter.length,"Popup operations only handle one event");const e=Lf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ad(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ad(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lp.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ad(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,op.get())};e()}}lp.currentPopupAction=null;const cp=new Map;class up extends ap{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=cp.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=fp(t),r=hp(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}cp.set(this.auth._key(),e)}return this.bypassAuthState||cp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function dp(e,t){cp.set(e._key(),t)}function hp(e){return bh(e._redirectPersistence)}function fp(e){return kh("pendingRedirect",e.config.apiKey,e.name)}async function pp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(xt(e.app))return Promise.reject(Rd(e));const r=Fh(e),i=tp(r,t),s=new up(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class mp{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yp(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!yp(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ad(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gp(e))}saveEventToCache(e){this.cachedEventUids.add(gp(e)),this.lastProcessedEventTime=Date.now()}}function gp(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function yp(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const vp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bp=/^https?/;async function wp(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Yd(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(xp(r))return}catch(n){}Id(e,"unauthorized-domain")}function xp(e){const t=Ud(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!bp.test(n))return!1;if(vp.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const kp=new Bd(3e4,6e4);function Sp(){const e=Uf().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function _p(e){return new Promise((t,n)=>{var r,i;function s(){Sp(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Sp(),n(Ad(e,"network-request-failed"))},timeout:kp.get()})}if(null!==(r=Uf().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Uf().gapi)||void 0===i||!i.load){const t=Hh("iframefcb");return Uf()[t]=()=>{gapi.load?s():n(Ad(e,"network-request-failed"))},Bh("".concat(zh.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Ep=null,e})}let Ep=null;const Tp=new Bd(5e3,15e3),Np={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ip(e){const t=e.config;Od(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Hd(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:_t},i=Cp.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(ie(r).slice(1))}async function Ap(e){const t=await function(e){return Ep=Ep||_p(e),Ep}(e),n=Uf().gapi;return Od(n,e,"internal-error"),t.open({where:document.body,url:Ip(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Np,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ad(e,"network-request-failed"),s=Uf().setTimeout(()=>{r(i)},Tp.get());function a(){Uf().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Dp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Pp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=c(c({},Dp),{},{width:r.toString(),height:i.toString(),top:s,left:a}),u=Y().toLowerCase();n&&(o=Nh(u)?"_blank":n),Eh(u)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Rh(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Rp(null);const h=window.open(t||"",o,d);Od(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Rp(h)}const jp="__/auth/handler",Op="emulator/auth/handler",Lp=encodeURIComponent("fac");async function Mp(e,t,n,r,i,s){Od(e.config.authDomain,e,"auth-domain-config-required"),Od(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:_t,eventId:i};if(t instanceof hf){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof ff){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Lp,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(jp);return Hd(t,Op)}(e),"?").concat(ie(o).slice(1)).concat(c)}const Up="webStorageSupport";const Fp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jf,this._completeRedirectFn=pp,this._overrideRedirectResult=dp}async _openPopup(e,t,n,r){var i;Md(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Pp(e,await Mp(e,t,n,Ud(),r),Lf())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Uf().location.href=e}(await Mp(e,t,n,Ud(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Md(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ap(e),n=new mp(e);return t.register("authEvent",t=>{Od(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Up,{type:Up},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Up];void 0!==i&&t(!!i),Id(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wp(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jh()||Th()||Rh()}};var Vp="@firebase/auth",zp="1.11.0";class Bp{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Od(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Hp=B("authIdTokenMaxAge")||300;let Wp=null;var qp;zh={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ad("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},qp="Browser",bt(new ue("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Od(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:qp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oh(qp)},c=new Uh(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(bh);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),bt(new ue("auth-internal",e=>(e=>new Bp(e))(Fh(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Nt(Vp,zp,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(qp)),Nt(Vp,zp,"esm2020");const Kp={apiKey:"AIzaSyDO5KOHefWnDTKm_3E8-CHJcOiY1lLc5Qs",authDomain:"a-good-man-c64ae.firebaseapp.com",projectId:"a-good-man-c64ae",storageBucket:"a-good-man-c64ae.firebasestorage.app",messagingSenderId:"1047795579429",appId:"1:1047795579429:web:2dc2e5afc54a807f6a1dcc"};let Gp,Qp,Yp,Xp;try{Gp=Et(Kp),Qp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();const t=wt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=wt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(ne(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Id(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Fp,persistence:[Yf,If,jf]}),r=B("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Hp)return;const r=null===t||void 0===t?void 0:t.token;Wp!==r&&(Wp=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){ce(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){ce(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=V("auth");return s&&Jh(n,"http://".concat(s)),n}(Gp),Yp=function(e,t){const n="object"==typeof e?e:Tt(),r="string"==typeof e?e:t||li,i=wt(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(()=>{const e=V("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const n=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),n]:[e.substring(0,t),n]})();e&&Su(i,...e)}return i}(Gp),Xp=new mf}catch(om){console.error("Firebase initialization failed:",om)}const Jp=()=>Qp&&Xp;const $p=new class{constructor(){this.currentUser=null,this.listeners=[]}async signInWithGoogle(){if(!Jp())throw new Error("Firebase is not configured. Please set up your Firebase project.");try{const e=await async function(e,t,n){if(xt(e.app))return Promise.reject(Ad(e,"operation-not-supported-in-this-environment"));const r=Fh(e);Pd(e,t,hf);const i=tp(r,n);return new lp(r,"signInViaPopup",t,i).executeNotNull()}(Qp,Xp),t=e.user,n={uid:t.uid,name:t.displayName,email:t.email,photoURL:t.photoURL,createdAt:t.metadata.creationTime,lastSignIn:t.metadata.lastSignInTime};return this.currentUser=n,this.notifyListeners(),n}catch(om){throw console.error("Error signing in with Google:",om),om}}async signOut(){if(!Jp())return this.currentUser=null,void this.notifyListeners();try{await function(e){return ce(e).signOut()}(Qp),this.currentUser=null,this.notifyListeners()}catch(om){throw console.error("Error signing out:",om),om}}getCurrentUser(){return this.currentUser}onAuthStateChanged(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(){this.listeners.forEach(e=>e(this.currentUser))}init(){Jp()?function(e,t,n,r){ce(e).onAuthStateChanged(t,n,r)}(Qp,e=>{this.currentUser=e?{uid:e.uid,name:e.displayName,email:e.email,photoURL:e.photoURL,createdAt:e.metadata.creationTime,lastSignIn:e.metadata.lastSignInTime}:null,this.notifyListeners()}):console.warn("Firebase not available, skipping auth initialization")}},Zp=$p;const em=new class{constructor(){this.currentUser=null,this.listeners=[],Zp.onAuthStateChanged(e=>{this.currentUser=e})}getCurrentUserId(){var e;if(void 0===Yp)throw new Error("Firebase is not configured. Please set up your Firebase project.");return null===(e=this.currentUser)||void 0===e?void 0:e.uid}getUserDocRef(){const e=this.getCurrentUserId();if(!e)throw new Error("No authenticated user");return Nu(Yp,"users",e)}async initializeUserData(){if(!this.getCurrentUserId())throw new Error("No authenticated user");const e=this.getUserDocRef(),t=await gd(e);if(!t.exists()){const t={userInfo:{name:this.currentUser.name,email:this.currentUser.email,photoURL:this.currentUser.photoURL,createdAt:wd(),lastActive:wd()},data:{settings:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"},routines:[{id:1,name:"Morning Routine",timeOfDay:"morning",days:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],habits:[]},{id:2,name:"Afternoon Routine",timeOfDay:"afternoon",days:["monday","tuesday","wednesday","thursday","friday"],habits:[]},{id:3,name:"Evening Routine",timeOfDay:"evening",days:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],habits:[]}],habits:[],goals:[],todos:[],habitCompletions:{},habitCompletionTimes:{},routineCompletions:{},lastResetDate:null}};return await function(e,t,n){e=Bn(e,Eu);const r=Bn(e.firestore,Du),i=ud(e.converter,t,n);return vd(r,[Ku(qu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ta.none())])}(e,t),t}return t.data()}async getCurrentUserData(){try{const e=this.getUserDocRef(),t=await gd(e);return t.exists()?t.data():await this.initializeUserData()}catch(om){throw console.error("Error getting user data:",om),om}}async updateUserData(e){try{const t=this.getUserDocRef();await function(e,t,n){e=Bn(e,Eu);const r=Bn(e.firestore,Du),i=qu(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=ce(t))||t instanceof Ou?Xu(i,"updateDoc",e._key,t,n,o):Yu(i,"updateDoc",e._key,t),vd(r,[s.toMutation(e._key,ta.exists(!0))])}(t,{data:e,"userInfo.lastActive":wd()})}catch(om){throw console.error("Error updating user data:",om),om}}async getRoutines(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.routines)||[]}async getHabits(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.habits)||[]}async getGoals(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.goals)||[]}async getTodos(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.todos)||[]}async getHabitCompletions(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.habitCompletions)||{}}async getHabitCompletionTimes(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.habitCompletionTimes)||{}}async getRoutineCompletions(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.routineCompletions)||{}}async getLastResetDate(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.lastResetDate)||null}async getUserSettings(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.settings)||{timezone:"UTC"}}async updateRoutines(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.routines=e,await this.updateUserData(t.data)}async updateHabits(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.habits=e,await this.updateUserData(t.data)}async updateGoals(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.goals=e,await this.updateUserData(t.data)}async updateTodos(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.todos=e,await this.updateUserData(t.data)}async updateHabitCompletions(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.habitCompletions=e,await this.updateUserData(t.data)}async updateHabitCompletionTimes(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.habitCompletionTimes=e,await this.updateUserData(t.data)}async updateRoutineCompletions(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.routineCompletions=e,await this.updateUserData(t.data)}async updateLastResetDate(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.lastResetDate=e,await this.updateUserData(t.data)}async updateUserSettings(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.settings=e,await this.updateUserData(t.data)}async exportUserData(){try{const e=await this.getCurrentUserData();return e?{version:"1.0",exportDate:(new Date).toISOString(),userData:e.data,userInfo:e.userInfo}:null}catch(om){throw console.error("Error exporting user data:",om),om}}async importUserData(e){try{if(!e.userData)throw new Error("Invalid import data");const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");return t.data=e.userData,await this.updateUserData(t.data),!0}catch(om){throw console.error("Error importing user data:",om),om}}async ensureDefaultRoutines(){try{const e=await this.getCurrentUserData();if(!e)return!1;const t=[{id:1,name:"Morning Routine",timeOfDay:"morning",days:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],habits:[]},{id:2,name:"Afternoon Routine",timeOfDay:"afternoon",days:["monday","tuesday","wednesday","thursday","friday"],habits:[]},{id:3,name:"Evening Routine",timeOfDay:"evening",days:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],habits:[]}];let n=!1;const r=e.data.routines.map(e=>e.id),i=t.filter(e=>!r.includes(e.id));return i.length>0&&(e.data.routines=[...e.data.routines,...i],n=!0),e.data.settings||(e.data.settings={timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"},n=!0),n&&await this.updateUserData(e.data),!0}catch(om){return console.error("Error ensuring default routines:",om),!1}}generateUserId(){return"user_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}clearAllData(){console.warn("clearAllData() is not supported in Firestore mode. Data is stored in the cloud.")}};var tm=n(579);const nm=()=>{const[e,t]=(0,r.useState)("dashboard"),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)(new Date),[o,l]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[P,j]=(0,r.useState)(!1),[O,L]=(0,r.useState)(null),[M,U]=(0,r.useState)(!0),[F,V]=(0,r.useState)(!1),[z,B]=(0,r.useState)(null),[H,W]=(0,r.useState)(!1),[q,K]=(0,r.useState)(null),[G,Q]=(0,r.useState)({}),[Y,X]=(0,r.useState)({}),[J,$]=(0,r.useState)({}),[Z,ee]=(0,r.useState)(!1),[te,ne]=(0,r.useState)(0),[re,ie]=(0,r.useState)(!1),[se,ae]=(0,r.useState)(null),[oe,le]=(0,r.useState)(!1),ce=["The secret of getting ahead is getting started.","Success is the sum of small efforts repeated day in and day out.","You don't have to be great to start, but you have to start to be great.","The only way to do great work is to love what you do.","Believe you can and you're halfway there."],ue=[{virtue:"Present",focus:"A Good Man Is Present. Be fully where you are this week."},{virtue:"Determined",focus:"A Good Man Is Determined. Know your why and stand firm this week."},{virtue:"Confident",focus:"A Good Man Is Confident. Keep your promises to yourself this week."},{virtue:"Patient",focus:"A Good Man Is Patient. Do not complain this week."},{virtue:"Genuine",focus:"A Good Man Is Genuine. Be your authentic self this week."},{virtue:"Responsible",focus:"A Good Man Is Responsible. Take ownership this week."},{virtue:"Strong",focus:"A Good Man Is Strong. Build your strength in all forms this week."},{virtue:"Disciplined",focus:"A Good Man Is Disciplined. Master yourself this week."},{virtue:"Humble",focus:"A Good Man Is Humble. Serve others before yourself this week."}],[de,he]=(0,r.useState)([]),[fe,pe]=(0,r.useState)([]),[me,ge]=(0,r.useState)([]),[ye,ve]=(0,r.useState)([]),[be,we]=(0,r.useState)({}),[xe,ke]=(0,r.useState)({}),[Se,_e]=(0,r.useState)(null),[Ee,Te]=(0,r.useState)(0),[Ne,Ce]=(0,r.useState)(null),[Ie,Ae]=(0,r.useState)(!1),[De,Re]=(0,r.useState)({}),[Pe,je]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{(async()=>{try{U(!0);const e=Zp.getCurrentUser();e&&(L(e),await Oe(),Le())}catch(om){console.error("Error initializing app:",om)}finally{U(!1)}})()},[]),(0,r.useEffect)(()=>{const e=Object.keys(G).length>0,t=Object.keys(J).length>0;if(e||t){const e=setInterval(()=>{ne(e=>e+1)},1e3);return()=>clearInterval(e)}},[G,J]);const Oe=async()=>{try{await em.ensureDefaultRoutines();const[e,t,n,r,i,s,a,o]=await Promise.all([em.getRoutines(),em.getHabits(),em.getGoals(),em.getTodos(),em.getHabitCompletions(),em.getHabitCompletionTimes(),em.getRoutineCompletions(),em.getUserSettings()]);he(e),pe(t),ge(n),ve(r),we(i),ke(s),Re(a),ae(o)}catch(om){console.error("Error loading user data:",om)}};(0,r.useEffect)(()=>{if(de.length>0){const e=Xe();e&&je(new Set([e.id]))}},[de,be,s]),(0,r.useEffect)(()=>{if(null===se||void 0===se||!se.timezone)return;const e=()=>{Le()};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[null===se||void 0===se?void 0:se.timezone]);const Le=async()=>{const e=Me();if(await em.getLastResetDate()!==e){const t=await em.getHabitCompletions(),n=await em.getHabitCompletionTimes(),r=await em.getRoutineCompletions();t[e]&&delete t[e],n[e]&&delete n[e],r[e]&&delete r[e],await em.updateHabitCompletions(t),await em.updateHabitCompletionTimes(n),await em.updateRoutineCompletions(r),we(t),ke(n),Re(r),await em.updateLastResetDate(e);const i=(await em.getTodos()).filter(t=>t.addedAt!==e);await em.updateTodos(i),ve(i),console.log("Daily reset completed for",e,"in timezone",(null===se||void 0===se?void 0:se.timezone)||"UTC")}};(0,r.useEffect)(()=>{const e=e=>{P&&!e.target.closest(".data-menu-container")&&j(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[P]),(0,r.useEffect)(()=>{if(!G||0===Object.keys(G).length)return;const e=setInterval(()=>{Object.keys(G).forEach(e=>{const t=G[e],n=Y[e];if(t&&n){(Date.now()-t)/1e3/60>=n&&et(e,!0)}}),ne(e=>e+1)},1e3);return()=>clearInterval(e)},[G?Object.keys(G).length:0]);const Me=()=>{if(null===se||void 0===se||!se.timezone)return s.toISOString().split("T")[0];try{return new Date(s.toLocaleString("en-US",{timeZone:se.timezone})).toISOString().split("T")[0]}catch(om){return console.error("Error getting date in timezone:",om),s.toISOString().split("T")[0]}},Ue=e=>{let{onClose:t}=e;const[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)("");return(0,tm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,tm.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,tm.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-stone-200",children:[(0,tm.jsx)("h3",{className:"text-xl font-bold text-[#333333] uppercase tracking-wide",children:"New Goal"}),(0,tm.jsx)("button",{onClick:t,className:"text-[#333333] hover:opacity-60",children:(0,tm.jsx)(p,{size:24,strokeWidth:2.5})})]}),(0,tm.jsxs)("div",{className:"space-y-4",children:[(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Name *"}),(0,tm.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Learn Spanish",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Vision (optional)"}),(0,tm.jsx)("textarea",{value:s,onChange:e=>a(e.target.value),placeholder:"What does success look like?",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",rows:"3"})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Target Date (optional)"}),(0,tm.jsx)("input",{type:"date",value:o,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]"})]}),(0,tm.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,tm.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2.5 border-2 border-[#333333] text-[#333333] rounded-lg hover:bg-stone-100 font-bold uppercase text-sm tracking-wider transition-colors",children:"Cancel"}),(0,tm.jsx)("button",{onClick:async()=>{if(n.trim()){const e={id:Date.now(),name:n.trim(),description:s.trim(),deadline:o,tasks:[],completed:!1,createdAt:(new Date).toISOString()},r=[...me,e];ge(r),await await em.updateGoals(r),t()}},className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:"Create Goal"})]})]})]})})},Fe=e=>{let{goalId:t,onClose:n}=e;const[i,s]=(0,r.useState)(""),[a,o]=(0,r.useState)("");return(0,tm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,tm.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,tm.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-stone-200",children:[(0,tm.jsx)("h3",{className:"text-xl font-bold text-[#333333] uppercase tracking-wide",children:"New Task"}),(0,tm.jsx)("button",{onClick:n,className:"text-[#333333] hover:opacity-60",children:(0,tm.jsx)(p,{size:24,strokeWidth:2.5})})]}),(0,tm.jsxs)("div",{className:"space-y-4",children:[(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Name *"}),(0,tm.jsx)("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"Complete chapter 1",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Notes (optional)"}),(0,tm.jsx)("textarea",{value:a,onChange:e=>o(e.target.value),placeholder:"Additional details...",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",rows:"2"})]}),(0,tm.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,tm.jsx)("button",{onClick:n,className:"flex-1 px-4 py-2.5 border-2 border-[#333333] text-[#333333] rounded-lg hover:bg-stone-100 font-bold uppercase text-sm tracking-wider transition-colors",children:"Cancel"}),(0,tm.jsx)("button",{onClick:async()=>{if(i.trim()){const e=me.map(e=>e.id===t?c(c({},e),{},{tasks:[...e.tasks,{id:Date.now(),name:i.trim(),notes:a.trim(),completed:!1}]}):e);ge(e),await await em.updateGoals(e),n()}},className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:"Add Task"})]})]})]})})},Ve=e=>{let{routine:t,onClose:n}=e;const[i,s]=(0,r.useState)((null===t||void 0===t?void 0:t.name)||""),[a,o]=(0,r.useState)((null===t||void 0===t?void 0:t.timeOfDay)||"morning"),[l,u]=(0,r.useState)((null===t||void 0===t?void 0:t.days)||[]),[d,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),[y,v]=(0,r.useState)([]),[b,w]=(0,r.useState)([]),[x,k]=(0,r.useState)(""),[S,_]=(0,r.useState)(""),[E,T]=(0,r.useState)(""),[N,C]=(0,r.useState)(!0),[I,A]=(0,r.useState)(""),[D,R]=(0,r.useState)(!1),P=(()=>{const e=(null===t||void 0===t?void 0:t.habits)||[];return[...fe.filter(t=>e.includes(t.id)&&!b.includes(t.id)),...y]})();return(0,tm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,tm.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,tm.jsxs)("div",{className:"p-6",children:[(0,tm.jsxs)("div",{className:"flex justify-between items-center mb-6 pb-3 border-b border-stone-200",children:[(0,tm.jsx)("h3",{className:"text-xl font-bold text-[#333333] uppercase tracking-wide",children:"Edit Routine"}),(0,tm.jsx)("button",{onClick:n,className:"text-[#333333] hover:opacity-60",children:(0,tm.jsx)(p,{size:24,strokeWidth:2.5})})]}),(0,tm.jsxs)("div",{className:"space-y-6",children:[(0,tm.jsxs)("div",{children:[(0,tm.jsx)("h4",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Routine Details"}),(0,tm.jsxs)("div",{className:"space-y-4",children:[(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Name *"}),(0,tm.jsx)("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"Morning Routine",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Time of Day *"}),(0,tm.jsx)("select",{value:a,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",children:[{value:"morning",label:"Morning"},{value:"afternoon",label:"Afternoon"},{value:"evening",label:"Evening"}].map(e=>(0,tm.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Days of Week *"}),(0,tm.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}].map(e=>(0,tm.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,tm.jsx)("input",{type:"checkbox",checked:l.includes(e.key),onChange:()=>(e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e.key),className:"w-4 h-4 text-[#333333] border-2 border-stone-300 rounded focus:ring-[#333333]"}),(0,tm.jsx)("span",{className:"text-sm text-[#333333]",children:e.label})]},e.key))})]})]})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("h4",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Habits"}),(0,tm.jsx)("div",{className:"space-y-2",children:P.length>0?P.map(e=>(0,tm.jsx)(ze,{habit:e,isEditing:f===e.id,onEdit:()=>{return t=e.id,void g(f===t?null:t);var t},onDelete:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this habit?")&&(y.some(e=>e.id===t)?v(e=>e.filter(e=>e.id!==t)):w(e=>[...e,t])));var t},onSave:t=>(async(e,t)=>{if(y.some(t=>t.id===e))v(n=>n.map(n=>n.id===e?t:n));else{const n=fe.map(n=>n.id===e?t:n);pe(n),await em.updateHabits(n)}g(null)})(e.id,t),onCancel:()=>g(null)},e.id)):(0,tm.jsx)("p",{className:"text-[#333333] opacity-50 text-sm text-center py-4",children:"No habits in this routine yet."})})]}),(0,tm.jsx)("div",{children:d?(0,tm.jsxs)("div",{className:"border-2 border-stone-300 rounded-lg p-4 space-y-4",children:[(0,tm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,tm.jsx)("h5",{className:"font-bold text-[#333333] text-sm uppercase tracking-wide",children:"New Habit"}),(0,tm.jsx)("button",{onClick:()=>h(!1),className:"text-[#333333] hover:opacity-60",children:(0,tm.jsx)(p,{size:18,strokeWidth:2.5})})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Name *"}),(0,tm.jsx)("input",{type:"text",value:x,onChange:e=>k(e.target.value),placeholder:"Morning meditation",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Why (optional)"}),(0,tm.jsx)("textarea",{value:S,onChange:e=>_(e.target.value),placeholder:"Why is this habit important?",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",rows:"2"})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Duration (Required) *"}),(0,tm.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tm.jsx)("input",{type:"number",value:E,onChange:e=>T(e.target.value),placeholder:"20",min:"1",max:"1440",required:!0,className:"w-20 px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]"}),(0,tm.jsx)("span",{className:"text-sm text-[#333333] font-medium",children:"minutes"})]}),(0,tm.jsx)("p",{className:"text-xs text-stone-500 mt-1",children:"How long this habit should take to complete"})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsxs)("label",{className:"flex items-center gap-2 mb-2 cursor-pointer",children:[(0,tm.jsx)("input",{type:"checkbox",checked:D,onChange:e=>R(e.target.checked),className:"w-4 h-4 text-[#333333] border-2 border-stone-300 rounded focus:ring-[#333333] focus:ring-2 cursor-pointer"}),(0,tm.jsx)("span",{className:"text-sm font-bold text-[#333333] uppercase tracking-wider",children:"Set Expected Completion Time"})]}),D&&(0,tm.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,tm.jsx)("input",{type:"number",value:I,onChange:e=>A(e.target.value),placeholder:"15",min:"1",max:"1440",className:"w-20 px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]"}),(0,tm.jsx)("span",{className:"text-sm text-[#333333] font-medium",children:"minutes"}),(0,tm.jsx)("span",{className:"text-xs text-stone-500",children:"(for progress visualization)"})]})]}),(0,tm.jsxs)("div",{className:"flex gap-2",children:[(0,tm.jsx)("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2.5 border-2 border-[#333333] text-[#333333] rounded-lg hover:bg-stone-100 font-bold uppercase text-sm tracking-wider transition-colors",children:"Cancel"}),(0,tm.jsx)("button",{onClick:()=>{if(x.trim()&&E&&parseInt(E)>0){const e=parseInt(E),n=D&&I?parseInt(I):null,r={id:Date.now(),name:x.trim(),description:S.trim(),duration:e,expectedCompletionTime:n,routineId:t.id,createdAt:(new Date).toISOString()};v(e=>[...e,r]),k(""),_(""),T(""),C(!0),A(""),R(!1),h(!1)}else alert("Please enter a habit name and duration (in minutes)")},className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:"Add Habit"})]})]}):(0,tm.jsxs)("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center gap-2 bg-black text-white py-3 rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-[1.02]",children:[(0,tm.jsx)(m,{size:20,strokeWidth:2.5}),"Add Habit"]})})]}),(0,tm.jsxs)("div",{className:"flex gap-2 pt-6 mt-6 border-t border-stone-200",children:[(0,tm.jsx)("button",{onClick:n,className:"flex-1 px-4 py-2.5 border-2 border-[#333333] text-[#333333] rounded-lg hover:bg-stone-100 font-bold uppercase text-sm tracking-wider transition-colors",children:"Cancel"}),(0,tm.jsx)("button",{onClick:async()=>{if(i.trim()&&l.length>0){const e=de.map(e=>e.id===t.id?c(c({},e),{},{name:i.trim(),timeOfDay:a,days:l,habits:[...e.habits.filter(e=>!b.includes(e)),...y.map(e=>e.id)]}):e);if(he(e),await em.updateRoutines(e),y.length>0){const e=[...fe,...y];pe(e),await em.updateHabits(e)}if(b.length>0){const e=fe.filter(e=>!b.includes(e.id));pe(e),await em.updateHabits(e)}n()}},className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:"Save Changes"})]})]})})})},ze=e=>{let{habit:t,isEditing:n,onEdit:i,onDelete:s,onSave:a,onCancel:o}=e;const[l,u]=(0,r.useState)(t.name),[d,h]=(0,r.useState)(t.description||""),[f,m]=(0,r.useState)(t.duration||""),[b,w]=(0,r.useState)(!!t.duration),[x,k]=(0,r.useState)(t.expectedCompletionTime||""),[S,_]=(0,r.useState)(!!t.expectedCompletionTime),E=(()=>{if(!G[t.id])return null;const e=G[t.id],n=Y[t.id],r=(Date.now()-e)/1e3/60;if(n){const e=Math.max(n-r,0);return{elapsed:Math.floor(r),remaining:Math.ceil(e),progress:Math.min(r/n*100,100),isCapped:!0}}return{elapsed:Math.floor(r),remaining:null,progress:null,isCapped:!1}})(),T=()=>{const e=b&&f?parseInt(f):null,n=S&&x?parseInt(x):null,r=c(c({},t),{},{name:l.trim(),description:d.trim(),duration:e,expectedCompletionTime:n});a(r)};return n?(0,tm.jsxs)("div",{className:"border-2 border-blue-300 rounded-lg p-3 space-y-3",children:[(0,tm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,tm.jsx)("h6",{className:"font-bold text-[#333333] text-sm uppercase tracking-wide",children:"Edit Habit"}),(0,tm.jsxs)("div",{className:"flex gap-1",children:[(0,tm.jsx)("button",{onClick:T,className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Save",children:(0,tm.jsx)(g,{size:16,strokeWidth:2.5,className:"text-green-600"})}),(0,tm.jsx)("button",{onClick:o,className:"p-1 hover:bg-red-100 rounded transition-colors",title:"Cancel",children:(0,tm.jsx)(p,{size:16,strokeWidth:2.5,className:"text-red-600"})})]})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-xs font-bold text-[#333333] mb-1 uppercase tracking-wider",children:"Name *"}),(0,tm.jsx)("input",{type:"text",value:l,onChange:e=>u(e.target.value),className:"w-full px-2 py-1 border border-stone-300 rounded text-sm focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-xs font-bold text-[#333333] mb-1 uppercase tracking-wider",children:"Why (optional)"}),(0,tm.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),className:"w-full px-2 py-1 border border-stone-300 rounded text-sm focus:outline-none focus:border-[#333333]",rows:"2"})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsxs)("label",{className:"flex items-center gap-2 mb-1 cursor-pointer",children:[(0,tm.jsx)("input",{type:"checkbox",checked:b,onChange:e=>w(e.target.checked),className:"w-3 h-3 text-[#333333] border border-stone-300 rounded focus:ring-[#333333] cursor-pointer"}),(0,tm.jsx)("span",{className:"text-xs font-bold text-[#333333] uppercase tracking-wider",children:"Set Timer Cap"})]}),b&&(0,tm.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,tm.jsx)("input",{type:"number",value:f,onChange:e=>m(e.target.value),placeholder:"20",min:"1",max:"1440",className:"w-16 px-2 py-1 border border-stone-300 rounded text-sm focus:outline-none focus:border-[#333333]"}),(0,tm.jsx)("span",{className:"text-xs text-[#333333] font-medium",children:"minutes"})]})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsxs)("label",{className:"flex items-center gap-2 mb-1 cursor-pointer",children:[(0,tm.jsx)("input",{type:"checkbox",checked:S,onChange:e=>_(e.target.checked),className:"w-3 h-3 text-[#333333] border border-stone-300 rounded focus:ring-[#333333] cursor-pointer"}),(0,tm.jsx)("span",{className:"text-xs font-bold text-[#333333] uppercase tracking-wider",children:"Expected Time"})]}),S&&(0,tm.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,tm.jsx)("input",{type:"number",value:x,onChange:e=>k(e.target.value),placeholder:"15",min:"1",max:"1440",className:"w-16 px-2 py-1 border border-stone-300 rounded text-sm focus:outline-none focus:border-[#333333]"}),(0,tm.jsx)("span",{className:"text-xs text-[#333333] font-medium",children:"minutes"})]})]})]}):(0,tm.jsxs)("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("div",{className:"flex-grow",children:[(0,tm.jsx)("div",{className:"font-medium text-[#333333]",children:t.name}),t.description&&(0,tm.jsx)("div",{className:"text-sm text-[#333333] opacity-70 italic",children:t.description}),t.duration&&(0,tm.jsxs)("div",{className:"text-xs text-[#333333] opacity-50 font-mono",children:["Timer: ",t.duration,"m"]}),t.expectedCompletionTime&&(0,tm.jsxs)("div",{className:"text-xs text-[#333333] opacity-50 font-mono",children:["Expected: ",t.expectedCompletionTime,"m"]}),E&&(0,tm.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,tm.jsx)("div",{className:"flex items-center gap-2",children:E.isCapped?(0,tm.jsxs)(tm.Fragment,{children:[(0,tm.jsxs)("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 font-mono rounded",children:[E.remaining,"m remaining"]}),(0,tm.jsxs)("span",{className:"text-xs text-[#333333] opacity-70",children:["(",E.elapsed,"m elapsed)"]})]}):(0,tm.jsxs)("span",{className:"text-xs bg-green-500 text-white px-2 py-1 font-mono rounded",children:[E.elapsed,"m elapsed"]})}),E.isCapped&&(0,tm.jsx)("div",{className:"w-full bg-stone-200 h-2 rounded-full",children:(0,tm.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all",style:{width:"".concat(E.progress,"%")}})})]}),G[t.id]&&t.expectedCompletionTime&&(0,tm.jsx)(lt,{habitId:t.id})]}),(0,tm.jsxs)("div",{className:"flex items-center gap-1",children:[(0,tm.jsx)("button",{onClick:i,className:"p-1 hover:bg-stone-200 rounded transition-colors",title:"Edit Habit",children:(0,tm.jsx)(y,{size:16,strokeWidth:2.5,className:"text-[#333333] opacity-60"})}),(0,tm.jsx)("button",{onClick:s,className:"p-1 hover:bg-red-100 rounded transition-colors",title:"Delete Habit",children:(0,tm.jsx)(v,{size:16,strokeWidth:2.5,className:"text-red-600"})})]})]})},Be=e=>{let{habit:t,onClose:n}=e;const[i,s]=(0,r.useState)((null===t||void 0===t?void 0:t.name)||""),[a,o]=(0,r.useState)((null===t||void 0===t?void 0:t.description)||""),[l,u]=(0,r.useState)((null===t||void 0===t?void 0:t.duration)||""),[d,h]=(0,r.useState)(!0),[f,m]=(0,r.useState)((null===t||void 0===t?void 0:t.expectedCompletionTime)||""),[g,y]=(0,r.useState)(!(null===t||void 0===t||!t.expectedCompletionTime));return(0,tm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,tm.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,tm.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-stone-200",children:[(0,tm.jsx)("h3",{className:"text-xl font-bold text-[#333333] uppercase tracking-wide",children:"Edit Habit"}),(0,tm.jsx)("button",{onClick:n,className:"text-[#333333] hover:opacity-60",children:(0,tm.jsx)(p,{size:24,strokeWidth:2.5})})]}),(0,tm.jsxs)("div",{className:"space-y-4",children:[(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Name *"}),(0,tm.jsx)("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"Morning meditation",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Why (optional)"}),(0,tm.jsx)("textarea",{value:a,onChange:e=>o(e.target.value),placeholder:"Why is this habit important?",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",rows:"3"})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Duration (Required) *"}),(0,tm.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tm.jsx)("input",{type:"number",value:l,onChange:e=>u(e.target.value),placeholder:"20",min:"1",max:"1440",required:!0,className:"w-20 px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]"}),(0,tm.jsx)("span",{className:"text-sm text-[#333333] font-medium",children:"minutes"})]}),(0,tm.jsx)("p",{className:"text-xs text-stone-500 mt-1",children:"How long this habit should take to complete"})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsxs)("label",{className:"flex items-center gap-2 mb-2 cursor-pointer",children:[(0,tm.jsx)("input",{type:"checkbox",checked:g,onChange:e=>y(e.target.checked),className:"w-4 h-4 text-[#333333] border-2 border-stone-300 rounded focus:ring-[#333333] focus:ring-2 cursor-pointer"}),(0,tm.jsx)("span",{className:"text-sm font-bold text-[#333333] uppercase tracking-wider",children:"Set Expected Completion Time"})]}),g&&(0,tm.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,tm.jsx)("input",{type:"number",value:f,onChange:e=>m(e.target.value),placeholder:"15",min:"1",max:"1440",className:"w-20 px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]"}),(0,tm.jsx)("span",{className:"text-sm text-[#333333] font-medium",children:"minutes"}),(0,tm.jsx)("span",{className:"text-xs text-stone-500",children:"(for progress visualization)"})]})]}),(0,tm.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,tm.jsx)("button",{onClick:n,className:"flex-1 px-4 py-2.5 border-2 border-[#333333] text-[#333333] rounded-lg hover:bg-stone-100 font-bold uppercase text-sm tracking-wider transition-colors",children:"Cancel"}),(0,tm.jsx)("button",{onClick:async()=>{if(i.trim()&&l&&parseInt(l)>0){const e=parseInt(l),r=g&&f?parseInt(f):null,s=fe.map(n=>n.id===t.id?c(c({},n),{},{name:i.trim(),description:a.trim(),duration:e,expectedCompletionTime:r}):n);pe(s),await em.updateHabits(s),n()}else alert("Please enter a habit name and duration (in minutes)")},className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:"Save Changes"})]})]})]})})},He=e=>{let{onClose:t}=e;const[n,i]=(0,r.useState)((null===se||void 0===se?void 0:se.timezone)||"UTC"),[s,a]=(0,r.useState)(!1);return(0,tm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-md mx-4",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,tm.jsx)("h2",{className:"text-xl font-bold text-[#333333] uppercase tracking-wide",children:"Settings"}),(0,tm.jsx)("button",{onClick:t,className:"p-1 hover:bg-stone-100 rounded transition-colors",children:(0,tm.jsx)(p,{size:20,strokeWidth:2.5,className:"text-[#333333] opacity-60"})})]}),(0,tm.jsx)("div",{className:"space-y-4",children:(0,tm.jsxs)("div",{children:[(0,tm.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Timezone"}),(0,tm.jsx)("select",{value:n,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333] text-sm",children:["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Toronto","America/Vancouver","Europe/London","Europe/Paris","Europe/Berlin","Europe/Rome","Asia/Tokyo","Asia/Shanghai","Asia/Kolkata","Australia/Sydney","Australia/Melbourne","Pacific/Auckland"].map(e=>(0,tm.jsx)("option",{value:e,children:e.replace("_"," ")},e))}),(0,tm.jsx)("p",{className:"text-xs text-stone-500 mt-1",children:"Routines will reset at midnight in your selected timezone"})]})}),(0,tm.jsxs)("div",{className:"flex gap-2 pt-6",children:[(0,tm.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2.5 border-2 border-[#333333] text-[#333333] rounded-lg hover:bg-stone-100 font-bold uppercase text-sm tracking-wider transition-colors",children:"Cancel"}),(0,tm.jsx)("button",{onClick:async()=>{a(!0);try{const e={timezone:n};ae(e),await em.updateUserSettings(e),t()}catch(om){console.error("Error saving settings:",om),alert("Error saving settings. Please try again.")}finally{a(!1)}},disabled:s,className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Saving...":"Save Settings"})]})]})})},We=e=>{let{habitId:t,size:n=200,strokeWidth:r=8}=e;const i=st(t),s=it(t),a=nt(t),o=rt(t),l=(n-r)/2,c=2*l*Math.PI,u=c,d=c-i/100*c;return(0,tm.jsxs)("div",{className:"relative cursor-pointer hover:scale-105 transition-transform duration-200",style:{width:n,height:n},onClick:()=>at(t),title:G[t]?"Tap to pause":void 0!==J[t]?"Tap to resume":"Tap to start",children:[(0,tm.jsxs)("svg",{width:n,height:n,className:"transform -rotate-90",children:[(0,tm.jsx)("circle",{cx:n/2,cy:n/2,r:l,stroke:"#e5e7eb",strokeWidth:r,fill:"transparent"}),(0,tm.jsx)("circle",{cx:n/2,cy:n/2,r:l,stroke:s,strokeWidth:r,fill:"transparent",strokeDasharray:u,strokeDashoffset:d,strokeLinecap:"round",className:"transition-all duration-300 ease-in-out"})]}),(0,tm.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,tm.jsx)("div",{className:"text-4xl font-bold text-[#333333] font-mono",children:null!==a?a:"0:00"}),(0,tm.jsx)("div",{className:"text-xs text-[#333333] opacity-60 uppercase tracking-wide mb-2",children:"countdown"===o?"remaining":"countup"===o?"elapsed":"overestimate"===o?"over":"ready"}),(0,tm.jsx)("div",{className:"text-[#333333] opacity-70",children:G[t]?(0,tm.jsx)(b,{size:16,strokeWidth:2.5}):(J[t],(0,tm.jsx)(w,{size:16,strokeWidth:2.5,className:"ml-0.5"}))})]})]})},qe=()=>{if(!Se)return null;const e=Se.habits[Ee],t=fe.find(t=>t.id===e),n=Me(),r=Ne?(Date.now()-Ne)/1e3/60:0;return(0,tm.jsx)("div",{className:"min-h-screen bg-[#333333] text-white",children:(0,tm.jsxs)("div",{className:"max-w-md mx-auto bg-white text-[#333333] min-h-screen flex flex-col",children:[(0,tm.jsxs)("div",{className:"p-6 border-b border-stone-200",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,tm.jsx)("h2",{className:"text-xl font-bold text-[#333333] uppercase tracking-wide",children:Se.name}),(0,tm.jsx)("button",{onClick:yt,className:"p-2 hover:bg-stone-100 rounded-lg transition-colors",title:"Stop Routine",children:(0,tm.jsx)(p,{size:20,strokeWidth:2.5,className:"text-[#333333]"})})]}),(0,tm.jsxs)("div",{className:"flex items-center justify-between text-center",children:[(0,tm.jsxs)("div",{children:[(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider",children:"Progress"}),(0,tm.jsxs)("p",{className:"text-sm font-bold text-[#333333]",children:[Ee+1," / ",Se.habits.length]})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider",children:"Elapsed Time"}),(0,tm.jsxs)("p",{className:"text-sm font-bold text-[#333333] font-mono",children:[Math.floor(r),"m ",Math.round(r%1*60),"s"]})]}),(0,tm.jsxs)("div",{children:[(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider",children:"Estimated"}),(0,tm.jsx)("p",{className:"text-sm font-bold text-[#333333] font-mono",children:(()=>{const e=ut(Se.id);return e.totalDuration>0?"".concat(e.totalDuration,"m"):"Unknown"})()})]})]})]}),t&&(0,tm.jsxs)("div",{className:"p-8 text-center",children:[(0,tm.jsx)("h3",{className:"text-2xl font-bold text-[#333333] mb-2",children:t.name}),t.description&&(0,tm.jsx)("p",{className:"text-sm text-[#333333] opacity-70 mb-8",children:t.description}),(0,tm.jsx)("div",{className:"flex justify-center mb-8",children:(0,tm.jsx)(We,{habitId:t.id,size:240,strokeWidth:10})}),(0,tm.jsxs)("div",{className:"flex items-center justify-center gap-8 mb-8",children:[(0,tm.jsx)("button",{onClick:ft,disabled:Ee<=0,className:"p-3 rounded-full bg-stone-100 hover:bg-stone-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous Habit",children:(0,tm.jsx)(x,{size:24,strokeWidth:2.5,className:"text-[#333333]"})}),(0,tm.jsx)("button",{onClick:()=>ht(t.id),className:"p-4 rounded-full bg-green-500 hover:bg-green-600 transition-colors shadow-lg",title:"Mark Complete",children:(0,tm.jsx)(k,{size:28,strokeWidth:2.5,className:"text-white"})}),(0,tm.jsx)("button",{onClick:pt,className:"p-3 rounded-full bg-stone-100 hover:bg-stone-200 transition-colors",title:"Next Habit",children:(0,tm.jsx)(S,{size:24,strokeWidth:2.5,className:"text-[#333333]"})})]})]}),(0,tm.jsxs)("div",{className:"p-6 border-t border-stone-200 flex-1 overflow-hidden flex flex-col",children:[(0,tm.jsx)("h4",{className:"font-bold text-[#333333] mb-4 text-sm uppercase tracking-wide",children:"Upcoming Habits"}),(0,tm.jsx)("div",{className:"space-y-2 flex-1 overflow-y-auto",children:Se.habits.map((e,t)=>{const r=fe.find(t=>t.id===e);if(!r)return null;const{isComplete:i,habitTime:s}=(e=>{var t,r;return{isComplete:(null===(t=be[n])||void 0===t?void 0:t[e])||!1,habitTime:null===(r=xe[n])||void 0===r?void 0:r[e]}})(e),a=t===Ee;return(0,tm.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg transition-colors ".concat(a?"bg-blue-50 border border-blue-200":i?"bg-green-50 border border-green-200":"bg-stone-50 border border-stone-200"),children:[(0,tm.jsxs)("div",{className:"flex items-center gap-3",children:[i?(0,tm.jsx)(k,{className:"text-green-600",size:18,strokeWidth:2.5}):a?(0,tm.jsx)("div",{className:"w-4 h-4 border-2 border-blue-500 rounded-full flex items-center justify-center",children:(0,tm.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})}):(0,tm.jsx)(p,{className:"text-[#333333] opacity-40",size:18,strokeWidth:2.5}),(0,tm.jsx)("span",{className:"text-sm font-medium ".concat(i?"text-green-700":a?"text-blue-700":"text-[#333333]"),children:r.name})]}),(0,tm.jsxs)("div",{className:"flex items-center gap-2",children:[i&&s&&(0,tm.jsxs)("span",{className:"text-xs bg-green-200 text-green-800 px-2 py-1 font-mono rounded",children:[Math.round(10*s)/10,"m"]}),a&&(0,tm.jsx)("span",{className:"text-xs bg-blue-200 text-blue-800 px-2 py-1 font-mono rounded",children:"Now"}),r.duration&&!i&&!a&&(0,tm.jsxs)("span",{className:"text-xs bg-stone-200 text-stone-600 px-2 py-1 font-mono rounded",children:[r.duration,"m"]})]})]},e)})})]})]})})},Ke=()=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][s.getDay()],Ge=()=>{const e=Math.floor((s-new Date(s.getFullYear(),0,0))/1e3/60/60/24);return ce[e%ce.length]},Qe=()=>{const e=Ke(),t=de.filter(t=>t.days.includes(e)),n={morning:0,afternoon:1,evening:2};return t.sort((e,t)=>n[e.timeOfDay]-n[t.timeOfDay])},Ye=e=>{var t;if(!de.find(t=>t.id===e))return{completed:!1,totalTime:0,percentage:0};const n=(e=>{const t=de.find(t=>t.id===e);if(!t||0===t.habits.length)return 0;const n=Me(),r=t.habits.filter(e=>{var t;return(null===(t=be[n])||void 0===t?void 0:t[e])||!1});return Math.round(r.length/t.habits.length*100)})(e),r=100===n,i=Me(),s=null===(t=De[i])||void 0===t?void 0:t[e];return{completed:r,totalTime:(null===s||void 0===s?void 0:s.totalTime)||0,percentage:n}},Xe=()=>{const e=Qe(),t=s.getHours();let n;n=t<12?"morning":t<17?"afternoon":"evening";const r=e.find(e=>e.timeOfDay===n);if(r){if(!Ye(r.id).completed)return r}return e.find(e=>!Ye(e.id).completed)},Je=async e=>{var t;if(Se&&Se.habits[Ee]!==e)return;const n=Me(),r=be||{},i=(null===(t=r[n])||void 0===t?void 0:t[e])||!1;if(Se&&(!i&&G[e]&&et(e,!0),i&&!G[e])){const t=fe.find(t=>t.id===e);t&&!t.duration&&Ze(e)}const s=c(c({},r),{},{[n]:c(c({},r[n]||{}),{},{[e]:!i})});we(s),await await em.updateHabitCompletions(s),Se&&Se.habits[Ee]===e&&ht(e)},$e=(e,t)=>{const n=Date.now();Q(t=>c(c({},t),{},{[e]:n})),X(n=>c(c({},n),{},{[e]:t}))},Ze=e=>{const t=Date.now();Q(n=>c(c({},n),{},{[e]:t}))},et=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=G[e];Y[e];if(t&&n){const t=(Date.now()-n)/1e3/60,r=Me(),i=xe||{},s=c(c({},i),{},{[r]:c(c({},i[r]||{}),{},{[e]:t})});ke(s),await em.updateHabitCompletionTimes(s)}Q(t=>{const n=c({},t);return delete n[e],n}),X(t=>{const n=c({},t);return delete n[e],n}),Se&&t&&Se.habits[Ee]===e&&ht(e)},tt=e=>{const t=G[e],n=Y[e];if(!t||!n)return null;const r=(Date.now()-t)/1e3/60,i=Math.max(n-r,0);return Math.ceil(i)},nt=e=>{const t=G[e],n=J[e],r=Y[e];let i=0;if(t)i=(Date.now()-t)/1e3;else{if(!n)return null;i=n}if(r){const e=Math.max(60*r-i,0);if(e>0){const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))}{const e=Math.floor(i/60),t=Math.floor(i%60);return"".concat(e,":").concat(t.toString().padStart(2,"0"))}}{const e=Math.floor(i/60),t=Math.floor(i%60);return"".concat(e,":").concat(t.toString().padStart(2,"0"))}},rt=e=>{const t=G[e],n=J[e],r=Y[e];if(!t&&!n)return"ready";let i=0;t?i=(Date.now()-t)/1e3:n&&(i=n);if(r){return Math.max(60*r-i,0)>0?"countdown":"overestimate"}return"countup"},it=e=>{switch(rt(e)){case"countdown":return"#10b981";case"countup":return"#3b82f6";case"overestimate":return"#ef4444";default:return"#6b7280"}},st=e=>{const t=G[e],n=J[e],r=Y[e];if(!t&&!n)return 0;let i=0;t?i=(Date.now()-t)/1e3:n&&(i=n);if(r){const e=60*r;return Math.min(i/e*100,100)}return Math.min(i/1800*100,100)},at=e=>{if(!Se)return;const t=fe.find(t=>t.id===e);t&&(G[e]?mt():void 0!==J[e]?gt():t.duration?$e(e,t.duration):Ze(e))},ot=e=>{const t=[];if(!xe||"object"!==typeof xe)return null;if(Object.keys(xe).forEach(n=>{xe[n]&&xe[n][e]&&t.push(xe[n][e])}),0===t.length)return null;const n=t.reduce((e,t)=>e+t,0)/t.length;return Math.round(10*n)/10},lt=e=>{let{habitId:t}=e;const n=(e=>{const t=fe.find(t=>t.id===e);if(!t||!t.expectedCompletionTime)return null;const n=G[e];if(!n)return null;const r=(Date.now()-n)/1e3/60,i=t.expectedCompletionTime;return{elapsed:Math.floor(r),expectedTime:i,progress:Math.min(r/i*100,100),isOverExpected:r>i,overTime:Math.max(r-i,0)}})(t);if(!n)return null;const{elapsed:r,expectedTime:i,isOverExpected:s,overTime:a}=n;return(0,tm.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,tm.jsxs)("span",{className:"text-[#333333] opacity-70",children:[r,"m elapsed"]}),(0,tm.jsxs)("span",{className:"font-mono ".concat(s?"text-red-600":"text-blue-600"),children:["Expected: ",i,"m"]})]}),(0,tm.jsxs)("div",{className:"relative w-full bg-stone-200 h-3 rounded-full overflow-hidden",children:[(0,tm.jsx)("div",{className:"absolute top-0 left-0 bg-blue-500 h-full transition-all duration-300",style:{width:"".concat(Math.min(r/i*100,100),"%")}}),s&&(0,tm.jsx)("div",{className:"absolute top-0 bg-red-500 h-full transition-all duration-300",style:{left:"100%",width:"".concat(Math.min(a/i*100,50),"%")}})]}),s&&(0,tm.jsxs)("div",{className:"text-xs text-red-600 font-mono",children:["+",Math.round(10*a)/10,"m over expected"]})]})},ct=e=>{let t=0,n=new Date(s);if(!be||"object"!==typeof be)return 0;for(;;){var r;const i=n.toISOString().split("T")[0];if(null===(r=be[i])||void 0===r||!r[e])break;t++,n.setDate(n.getDate()-1)}return t},ut=e=>{const t=de.find(t=>t.id===e);if(!t)return 0;let n=0,r=0;return t.habits.forEach(e=>{const t=fe.find(t=>t.id===e);t&&t.duration?n+=t.duration:r++}),{totalDuration:n,unknownDurationCount:r,hasUnknownDurations:r>0}},dt=e=>{const t=de.find(t=>t.id===e);if(!t)return;const n=Me();let r=0;for(let i=0;i<t.habits.length;i++){var s;const e=t.habits[i];if(!((null===(s=be[n])||void 0===s?void 0:s[e])||!1)){r=i;break}}_e(t),Te(r),Ce(Date.now()),Ae(!1),i(!0);const a=t.habits[r],o=fe.find(e=>e.id===a);o&&(o.duration?$e(a,o.duration):Ze(a))},ht=async e=>{if(!Se)return;const t=G[e];if(t){const n=(Date.now()-t)/1e3/60,r=Me(),i=xe||{},s=c(c({},i),{},{[r]:c(c({},i[r]||{}),{},{[e]:n})});ke(s),await em.updateHabitCompletionTimes(s)}const n=Me(),r=be||{},i=c(c({},r),{},{[n]:c(c({},r[n]||{}),{},{[e]:!0})});we(i),await em.updateHabitCompletions(i),Q(t=>{const n=c({},t);return delete n[e],n}),X(t=>{const n=c({},t);return delete n[e],n});const s=Ee+1;if(s<Se.habits.length){Te(s);const e=Se.habits[s],t=fe.find(t=>t.id===e);t&&(t.duration?$e(e,t.duration):Ze(e))}else vt()},ft=()=>{if(!Se||Ee<=0)return;const e=Se.habits[Ee];G[e]&&(Q(t=>{const n=c({},t);return delete n[e],n}),X(t=>{const n=c({},t);return delete n[e],n}));Te(Ee-1)},pt=()=>{if(!Se)return;const e=Se.habits[Ee];G[e]&&(Q(t=>{const n=c({},t);return delete n[e],n}),X(t=>{const n=c({},t);return delete n[e],n}));const t=Ee+1;if(t<Se.habits.length){Te(t);const e=Se.habits[t],n=fe.find(t=>t.id===e);n&&(n.duration?$e(e,n.duration):Ze(e))}else vt()},mt=()=>{if(!Se)return;const e=Se.habits[Ee];if(G[e]){const t=G[e],n=(Date.now()-t)/1e3;$(t=>c(c({},t),{},{[e]:n})),Q(t=>{const n=c({},t);return delete n[e],n})}},gt=()=>{if(!Se)return;const e=Se.habits[Ee],t=J[e];if(void 0!==t){const n=Date.now()-1e3*t;Q(t=>c(c({},t),{},{[e]:n})),$(t=>{const n=c({},t);return delete n[e],n})}else{const t=fe.find(t=>t.id===e);t&&(t.duration?$e(e,t.duration):Ze(e))}},yt=()=>{const e=null===Se||void 0===Se?void 0:Se.habits[Ee];e&&G[e]&&(Q(t=>{const n=c({},t);return delete n[e],n}),X(t=>{const n=c({},t);return delete n[e],n})),_e(null),Te(0),Ce(null),Ae(!1),i(!1)},vt=async()=>{if(!Se||!Ne)return;const e=(Date.now()-Ne)/1e3/60,t=Me(),n=ut(Se.id),r={};Se.habits.forEach(e=>{var n;const i=null===(n=xe[t])||void 0===n?void 0:n[e];i&&(r[e]=i)});const s=De||{},a=c(c({},s),{},{[t]:c(c({},s[t]||{}),{},{[Se.id]:{totalTime:e,estimatedTime:n.totalDuration,startTime:new Date(Ne).toISOString(),endTime:(new Date).toISOString(),completed:!0,habitTimes:r,hasUnknownDurations:n.hasUnknownDurations}})});Re(a),await em.updateRoutineCompletions(a),_e(null),Te(0),Ce(null),Ae(!1),i(!1)},bt=()=>{(()=>{const e=s.getHours(),t=Ke(),n=de.filter(e=>e.days.includes(t));e<12?n.find(e=>"morning"===e.timeOfDay)||n[0]:e<17?n.find(e=>"afternoon"===e.timeOfDay)||n[0]:n.find(e=>"evening"===e.timeOfDay)||n[0]})();const e=me.find(e=>!e.completed)||null,t=ye.filter(e=>e.addedAt===Me()),n=(()=>{const e=Math.floor((s-new Date(s.getFullYear(),0,1))/6048e5);return ue[e%ue.length]})();return(0,tm.jsxs)("div",{className:"space-y-4",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tm.jsx)("h2",{className:"text-2xl font-bold text-[#333333] uppercase tracking-wide",children:"Dashboard"}),(0,tm.jsx)("button",{onClick:()=>le(!0),className:"p-2 hover:bg-stone-100 rounded-lg transition-colors",title:"Settings",children:(0,tm.jsx)(_,{size:20,strokeWidth:2.5,className:"text-[#333333] opacity-60"})})]}),(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h2",{className:"text-lg font-bold text-[#333333] mb-2",children:"Today"}),(0,tm.jsx)("p",{className:"text-sm text-[#333333] opacity-70 font-mono",children:s.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}).toUpperCase()}),O&&(0,tm.jsxs)("p",{className:"text-xs text-[#333333] opacity-50 font-mono mt-1",children:["User: ",O.name]})]}),(0,tm.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,tm.jsxs)("p",{className:"text-base leading-relaxed text-[#333333] font-serif italic",children:['"',Ge(),'"']})}),(0,tm.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow-md border-2 border-[#333333]",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] opacity-70 mb-2 tracking-wider text-sm uppercase",children:"This Week's Virtue"}),(0,tm.jsx)("p",{className:"text-xl font-bold mb-1 text-[#333333]",children:n.virtue}),(0,tm.jsx)("p",{className:"text-sm text-[#333333]",children:n.focus})]}),Qe().map(e=>{const t=Pe.has(e.id),n=Ye(e.id);return(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md",children:[(0,tm.jsxs)("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-stone-50 transition-colors",onClick:()=>{return t=e.id,void je(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},children:[(0,tm.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] text-lg uppercase tracking-wide",children:e.name}),n.completed&&(0,tm.jsxs)("span",{className:"text-sm text-stone-600 font-mono",children:[Math.round(10*n.totalTime)/10,"m total"]})]}),(0,tm.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tm.jsxs)("span",{className:"text-sm font-mono px-2 py-1 rounded ".concat(n.completed?"bg-green-200 text-green-800":n.percentage>0?"bg-blue-200 text-blue-800":"bg-stone-200 text-stone-600"),children:[n.percentage,"%"]}),(0,tm.jsx)(E,{size:20,strokeWidth:2.5,className:"text-[#333333] transition-transform ".concat(t?"rotate-90":"")})]})]}),t&&(0,tm.jsxs)("div",{className:"px-4 pb-4",children:[(0,tm.jsxs)("div",{className:"space-y-2",children:[e.habits.map(e=>{var t,n;const r=fe.find(t=>t.id===e);if(!r)return null;const i=(null===(t=be[Me()])||void 0===t?void 0:t[e])||!1,s=ct(e);return(0,tm.jsxs)("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-lg cursor-pointer hover:bg-stone-100 transition-colors",onClick:()=>Je(e),children:[(0,tm.jsxs)("div",{className:"flex items-center gap-3",children:[i?(0,tm.jsx)(T,{className:"text-[#333333]",size:20,strokeWidth:2.5}):(0,tm.jsx)(N,{className:"text-[#333333] opacity-40",size:20,strokeWidth:2.5}),(0,tm.jsxs)("div",{className:"flex flex-col",children:[(0,tm.jsx)("span",{className:i?"line-through text-[#333333] opacity-50":"text-[#333333] font-medium",children:r.name}),i&&(null===(n=xe[Me()])||void 0===n?void 0:n[e])&&(0,tm.jsxs)("span",{className:"text-xs text-green-600 font-mono",children:["Completed in ",Math.round(10*xe[Me()][e])/10,"m"]})]})]}),(0,tm.jsxs)("div",{className:"flex items-center gap-2",children:[s>0&&(0,tm.jsxs)("span",{className:"text-xs bg-[#333333] text-white px-2 py-1 font-mono font-bold rounded",children:[s,"D"]}),Se&&(r.duration||r.expectedCompletionTime||G[r.id])&&(0,tm.jsxs)("div",{className:"flex items-center gap-1",children:[G[r.id]?(0,tm.jsxs)(tm.Fragment,{children:[r.duration?(0,tm.jsxs)("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 font-mono rounded",children:[tt(r.id),"m"]}):(0,tm.jsxs)("span",{className:"text-xs bg-green-500 text-white px-2 py-1 font-mono rounded",children:[Math.floor((Date.now()-G[r.id])/1e3/60),"m"]}),(0,tm.jsx)("button",{onClick:e=>{e.stopPropagation(),et(r.id,!0),Je(r.id)},className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Complete Habit",children:(0,tm.jsx)(g,{size:14,strokeWidth:2.5,className:"text-green-600"})}),(0,tm.jsx)("button",{onClick:e=>{e.stopPropagation(),et(r.id,!1)},className:"p-1 hover:bg-red-100 rounded transition-colors",title:"Stop Timer",children:(0,tm.jsx)(p,{size:14,strokeWidth:2.5,className:"text-red-600"})})]}):r.duration?(0,tm.jsx)("button",{onClick:e=>{e.stopPropagation(),$e(r.id,r.duration)},className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Start Timer",children:(0,tm.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"})}):r.expectedCompletionTime?(0,tm.jsx)("button",{onClick:e=>{e.stopPropagation(),Ze(r.id)},className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Start Timer",children:(0,tm.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"})}):null,ot(r.id)&&(0,tm.jsxs)("span",{className:"text-xs bg-stone-200 text-[#333333] px-2 py-1 font-mono rounded",children:["Avg: ",ot(r.id),"m"]})]}),Se&&G[r.id]&&r.expectedCompletionTime&&(0,tm.jsx)(lt,{habitId:r.id})]})]},e)}),0===e.habits.length&&(0,tm.jsx)("p",{className:"text-[#333333] opacity-50 text-sm",children:"No habits in this routine yet."})]}),(t=>{const n=Me(),r=null===(t=De[n])||void 0===t?void 0:t[e.id];return r&&r.completed?(0,tm.jsxs)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tm.jsx)("span",{className:"text-sm font-medium text-green-800",children:"Routine Completed Today"}),(0,tm.jsxs)("span",{className:"text-sm font-mono text-green-600",children:[Math.round(10*r.totalTime)/10,"m total"]})]}),r.startTime&&r.endTime&&(0,tm.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:[new Date(r.startTime).toLocaleTimeString()," - ",new Date(r.endTime).toLocaleTimeString()]})]}):null})(),e.habits.length>0&&!n.completed&&(0,tm.jsxs)("button",{onClick:()=>dt(e.id),disabled:null!==Se,className:"mt-4 w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[(0,tm.jsx)(w,{size:20,strokeWidth:2.5}),Se?"Routine In Progress":"Start Routine"]})]})]},e.id)}),e&&(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Active Goal"}),(0,tm.jsx)("p",{className:"text-lg font-bold mb-3 text-[#333333]",children:e.name}),(0,tm.jsx)("div",{className:"w-full bg-stone-200 h-2 rounded-full mb-2",children:(0,tm.jsx)("div",{className:"bg-[#333333] h-2 rounded-full transition-all",style:{width:"".concat(e.tasks.length>0?e.tasks.filter(e=>e.completed).length/e.tasks.length*100:0,"%")}})}),(0,tm.jsxs)("p",{className:"text-xs text-[#333333] opacity-70 font-mono uppercase tracking-wider",children:[e.tasks.filter(e=>e.completed).length," / ",e.tasks.length," complete"]})]}),(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Today's Tasks"}),(0,tm.jsxs)("div",{className:"space-y-2 mb-3",children:[t.map(e=>(0,tm.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("div",{className:"flex-grow flex items-center gap-3 cursor-pointer",onClick:()=>(async e=>{const t=ye.map(t=>t.id===e?c(c({},t),{},{completed:!t.completed}):t);ve(t),await em.updateTodos(t)})(e.id),children:[e.completed?(0,tm.jsx)(T,{className:"text-[#333333]",size:18,strokeWidth:2.5}):(0,tm.jsx)(N,{className:"text-[#333333] opacity-40",size:18,strokeWidth:2.5}),(0,tm.jsx)("span",{className:e.completed?"line-through text-[#333333] opacity-50 text-sm":"text-[#333333] text-sm",children:e.name})]}),(0,tm.jsx)("button",{onClick:()=>(async e=>{const t=ye.filter(t=>t.id!==e);ve(t),await em.updateTodos(t)})(e.id),className:"text-[#333333] opacity-40 hover:text-[#333333] hover:opacity-100",children:(0,tm.jsx)(p,{size:16,strokeWidth:2.5})})]},e.id)),0===t.length&&(0,tm.jsx)("p",{className:"text-[#333333] opacity-50 text-sm",children:"No tasks for today."})]}),(0,tm.jsxs)("button",{onClick:()=>{const e=prompt("New todo item:");e&&async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n={id:Date.now(),name:e,completed:!1,goalId:t,addedAt:Me()},r=[...ye,n];ve(r),await em.updateTodos(r)}(e)},className:"w-full flex items-center justify-center gap-2 bg-black text-white py-3 rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-[1.02]",children:[(0,tm.jsx)(m,{size:20,strokeWidth:2.5}),"Add Task"]})]})]})},wt=()=>{const[e,t]=(0,r.useState)(null);return Z?(0,tm.jsx)(kt,{onClose:()=>ee(!1)}):(0,tm.jsxs)("div",{className:"space-y-4",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tm.jsx)("h2",{className:"text-2xl font-bold text-[#333333] uppercase tracking-wide",children:"Routines"}),(0,tm.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tm.jsx)("button",{onClick:()=>le(!0),className:"p-2 hover:bg-stone-100 rounded-lg transition-colors",title:"Settings",children:(0,tm.jsx)(_,{size:20,strokeWidth:2.5,className:"text-[#333333] opacity-60"})}),(0,tm.jsxs)("button",{onClick:()=>ee(!0),className:"flex items-center gap-2 bg-black text-white px-4 py-2 rounded-lg hover:bg-[#333333] font-bold uppercase text-xs tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:[(0,tm.jsx)(C,{size:18,strokeWidth:2.5}),"History"]})]})]}),de.map(e=>(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,tm.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] uppercase tracking-wide",children:e.name}),(0,tm.jsx)("button",{onClick:()=>{B(e),V(!0)},className:"p-1 hover:bg-stone-100 rounded transition-colors",title:"Edit Routine",children:(0,tm.jsx)(y,{size:16,strokeWidth:2.5,className:"text-[#333333] opacity-60"})})]}),(0,tm.jsx)("span",{className:"text-xs bg-[#333333] text-white px-2 py-1 font-mono rounded",children:e.days.map(e=>e.substring(0,3).toUpperCase()).join(" ")})]}),(0,tm.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,tm.jsx)("span",{className:"text-xs bg-stone-200 text-[#333333] px-2 py-1 font-mono rounded",children:e.timeOfDay.toUpperCase()}),(()=>{const t=ut(e.id);return t.totalDuration>0?(0,tm.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 font-mono rounded",children:[t.totalDuration,"m total",t.hasUnknownDurations&&" (+".concat(t.unknownDurationCount," unknown)")]}):(0,tm.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 font-mono rounded",children:"Duration unknown"})})()]}),(0,tm.jsxs)("div",{className:"space-y-2",children:[e.habits.map(e=>{var t;const n=fe.find(t=>t.id===e);if(!n)return null;const r=(null===(t=be[Me()])||void 0===t?void 0:t[e])||!1,i=ct(e);return(0,tm.jsxs)("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-lg hover:bg-stone-100 transition-colors",children:[(0,tm.jsxs)("div",{className:"flex-grow flex items-center gap-3 cursor-pointer",onClick:()=>Je(e),children:[r?(0,tm.jsx)(T,{className:"text-[#333333]",size:20,strokeWidth:2.5}):(0,tm.jsx)(N,{className:"text-[#333333] opacity-40",size:20,strokeWidth:2.5}),(0,tm.jsx)("span",{className:r?"line-through text-[#333333] opacity-50":"text-[#333333] font-medium",children:n.name})]}),(0,tm.jsxs)("div",{className:"flex items-center gap-2",children:[i>0&&(0,tm.jsxs)("span",{className:"text-xs bg-[#333333] text-white px-2 py-1 font-mono font-bold rounded",children:[i,"D"]}),Se&&(n.duration||G[n.id])&&(0,tm.jsxs)("div",{className:"flex items-center gap-1",children:[G[n.id]?(0,tm.jsxs)(tm.Fragment,{children:[n.duration?(0,tm.jsxs)("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 font-mono rounded",children:[tt(n.id),"m"]}):(0,tm.jsxs)("span",{className:"text-xs bg-green-500 text-white px-2 py-1 font-mono rounded",children:[Math.floor((Date.now()-G[n.id])/1e3/60),"m"]}),(0,tm.jsx)("button",{onClick:e=>{e.stopPropagation(),et(n.id,!0),Je(n.id)},className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Complete Habit",children:(0,tm.jsx)(g,{size:14,strokeWidth:2.5,className:"text-green-600"})}),(0,tm.jsx)("button",{onClick:e=>{e.stopPropagation(),et(n.id,!1)},className:"p-1 hover:bg-red-100 rounded transition-colors",title:"Stop Timer",children:(0,tm.jsx)(p,{size:14,strokeWidth:2.5,className:"text-red-600"})})]}):n.duration?(0,tm.jsx)("button",{onClick:e=>{e.stopPropagation(),$e(n.id,n.duration)},className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Start Timer",children:(0,tm.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"})}):null,ot(n.id)&&(0,tm.jsxs)("span",{className:"text-xs bg-stone-200 text-[#333333] px-2 py-1 font-mono rounded",children:["Avg: ",ot(n.id),"m"]})]}),(0,tm.jsx)("button",{onClick:e=>{e.stopPropagation(),K(n),W(!0)},className:"p-1 hover:bg-stone-200 rounded transition-colors",title:"Edit Habit",children:(0,tm.jsx)(y,{size:16,strokeWidth:2.5,className:"text-[#333333] opacity-60"})})]})]},e)}),0===e.habits.length&&(0,tm.jsx)("p",{className:"text-[#333333] opacity-50 text-sm text-center py-4",children:"No habits in this routine yet."})]}),e.habits.length>0&&(0,tm.jsx)("div",{className:"mt-3",children:(0,tm.jsxs)("button",{onClick:()=>dt(e.id),disabled:null!==Se,className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[(0,tm.jsx)(w,{size:20,strokeWidth:2.5}),Se?"Routine In Progress":"Start Routine"]})})]},e.id))]})},xt=()=>{const[e,t]=(0,r.useState)(null);return(0,tm.jsxs)("div",{className:"space-y-4",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tm.jsx)("h2",{className:"text-2xl font-bold text-[#333333] uppercase tracking-wide",children:"Goals"}),(0,tm.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tm.jsx)("button",{onClick:()=>le(!0),className:"p-2 hover:bg-stone-100 rounded-lg transition-colors",title:"Settings",children:(0,tm.jsx)(_,{size:20,strokeWidth:2.5,className:"text-[#333333] opacity-60"})}),(0,tm.jsxs)("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-black text-white px-5 py-2.5 rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:[(0,tm.jsx)(m,{size:20,strokeWidth:2.5}),"New Goal"]})]})]}),me.map(n=>(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>t(e===n.id?null:n.id),children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333]",children:n.name}),(0,tm.jsx)(E,{className:"transform transition-transform text-[#333333] ".concat(e===n.id?"rotate-90":""),size:20,strokeWidth:2.5})]}),n.tasks.length>0&&(0,tm.jsxs)("div",{className:"mt-3",children:[(0,tm.jsx)("div",{className:"w-full bg-stone-200 h-2 rounded-full",children:(0,tm.jsx)("div",{className:"bg-[#333333] h-2 rounded-full transition-all",style:{width:"".concat(n.tasks.filter(e=>e.completed).length/n.tasks.length*100,"%")}})}),(0,tm.jsxs)("p",{className:"text-xs text-[#333333] opacity-70 mt-1 font-mono uppercase tracking-wider",children:[n.tasks.filter(e=>e.completed).length," / ",n.tasks.length," complete"]})]}),e===n.id&&(0,tm.jsxs)("div",{className:"mt-4 space-y-2",children:[n.tasks.map(e=>(0,tm.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tm.jsxs)("div",{className:"flex-grow flex items-center gap-2 p-2 bg-stone-50 rounded-lg cursor-pointer",onClick:()=>(async(e,t)=>{const n=me.map(n=>n.id===e?c(c({},n),{},{tasks:n.tasks.map(e=>e.id===t?c(c({},e),{},{completed:!e.completed}):e)}):n);ge(n),await em.updateGoals(n)})(n.id,e.id),children:[e.completed?(0,tm.jsx)(T,{className:"text-[#333333]",size:18,strokeWidth:2.5}):(0,tm.jsx)(N,{className:"text-[#333333] opacity-40",size:18,strokeWidth:2.5}),(0,tm.jsx)("span",{className:e.completed?"line-through text-[#333333] opacity-50 text-sm":"text-[#333333] text-sm",children:e.name})]}),(0,tm.jsx)("button",{onClick:()=>(async(e,t)=>{const n={id:Date.now(),name:e.name,completed:!1,goalId:t,addedAt:Me()},r=[...ye,n];ve(r),await em.updateTodos(r)})(e,n.id),className:"bg-stone-600 text-white px-2 py-1 text-xs rounded hover:bg-stone-700 transition-colors font-mono uppercase tracking-wider",children:"\u2192"})]},e.id)),(0,tm.jsxs)("button",{onClick:()=>{f(n.id),d(!0)},className:"w-full flex items-center justify-center gap-2 bg-black text-white py-2.5 rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider mt-3 shadow-md transition-all hover:shadow-lg hover:scale-[1.02]",children:[(0,tm.jsx)(m,{size:18,strokeWidth:2.5}),"Add Task"]})]})]},n.id)),0===me.length&&(0,tm.jsx)("div",{className:"bg-white rounded-xl shadow-md p-8 text-center",children:(0,tm.jsx)("p",{className:"text-[#333333] opacity-50 uppercase text-sm tracking-wide",children:"No goals yet"})})]})},kt=e=>{let{onClose:t}=e;const[n,i]=(0,r.useState)(new Date),[s,a]=(0,r.useState)("day"),o=e=>{const t=new Date(n);switch(s){case"day":default:t.setDate(t.getDate()+e);break;case"week":t.setDate(t.getDate()+7*e);break;case"month":t.setMonth(t.getMonth()+e);break;case"year":t.setFullYear(t.getFullYear()+e)}i(t)},l=e=>e.toISOString().split("T")[0],u=e=>{const t=l(e),n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][e.getDay()],r=de.filter(e=>e.days.includes(n));return fe.filter(e=>r.some(t=>t.habits.includes(e.id))).map(e=>{var n;return c(c({},e),{},{completed:(null===(n=be[t])||void 0===n?void 0:n[e.id])||!1})})},d=e=>{const t=u(e);if(0===t.length)return 0;const n=t.filter(e=>e.completed).length;return Math.round(n/t.length*100)},h=e=>{const t=e.getFullYear(),n=e.getMonth(),r=new Date(t,n,1),i=new Date(t,n+1,0),s=[];let a=new Date(r);for(a.setDate(a.getDate()-a.getDay());a<=i;){const e=new Date(a);e.setDate(e.getDate()+6),s.push({start:new Date(a),end:new Date(e)}),a.setDate(a.getDate()+7)}return s},f=e=>{const t=[];for(let n=0;n<12;n++)t.push(new Date(e,n,1));return t},m=(e,t)=>{const n=[],r=new Date(e);for(;r<=t;)n.push(new Date(r)),r.setDate(r.getDate()+1);const i=n.map(e=>d(e)),s=i.length>0?Math.round(i.reduce((e,t)=>e+t,0)/i.length):0,a=i.filter(e=>100===e).length,o=n.reduce((e,t)=>e+u(t).length,0),l=n.reduce((e,t)=>e+u(t).filter(e=>e.completed).length,0);return{avgRate:s,perfectDays:a,totalHabits:o,completedHabits:l,days:n.length}},g=(e,t)=>{const n=h(new Date(t,e,1)).map(e=>m(e.start,e.end)),r=n.length>0?Math.round(n.reduce((e,t)=>e+t.avgRate,0)/n.length):0,i=n.reduce((e,t)=>e+t.perfectDays,0),s=n.reduce((e,t)=>e+t.totalHabits,0),a=n.reduce((e,t)=>e+t.completedHabits,0);return{avgRate:r,perfectDays:i,totalHabits:s,completedHabits:a,weeks:n}},y=()=>{const e=Object.values(De).flatMap(e=>Object.values(e));if(0===e.length)return{totalRoutines:0,completedRoutines:0,averageTime:0,totalTime:0};const t=e.filter(e=>e.completed),n=e.reduce((e,t)=>e+(t.totalTime||0),0),r=t.length>0?t.reduce((e,t)=>e+(t.totalTime||0),0)/t.length:0;return{totalRoutines:e.length,completedRoutines:t.length,averageTime:Math.round(10*r)/10,totalTime:Math.round(10*n)/10}},v=(l(n),u(n)),b=d(n),w=(()=>{const e=[];for(let t=6;t>=0;t--){const r=new Date(n);r.setDate(r.getDate()-t),e.push(r)}return e})();return(0,tm.jsxs)("div",{className:"space-y-4",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tm.jsx)("h2",{className:"text-2xl font-bold text-[#333333] uppercase tracking-wide",children:"History"}),(0,tm.jsxs)("button",{onClick:t,className:"flex items-center gap-2 bg-stone-200 text-[#333333] px-4 py-2 rounded-lg hover:bg-stone-300 font-bold uppercase text-xs tracking-wider transition-all",children:[(0,tm.jsx)(p,{size:18,strokeWidth:2.5}),"Close"]})]}),(0,tm.jsx)("div",{className:"flex gap-2 mb-6",children:["day","week","month","year"].map(e=>(0,tm.jsx)("button",{onClick:()=>a(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(s===e?"bg-[#333333] text-white":"bg-white text-[#333333] hover:bg-stone-100"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),"day"===s?(0,tm.jsxs)(tm.Fragment,{children:[(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,tm.jsx)("button",{onClick:()=>o(-1),className:"p-2 hover:bg-stone-100 rounded-lg transition-colors",children:(0,tm.jsx)(I,{size:24,strokeWidth:2.5,className:"text-[#333333]"})}),(0,tm.jsxs)("div",{className:"text-center",children:[(0,tm.jsxs)("p",{className:"text-lg font-bold text-[#333333]",children:["day"===s&&n.toLocaleDateString("en-US",{weekday:"long"}),"week"===s&&"Week of ".concat(n.toLocaleDateString("en-US",{month:"short",day:"numeric"})),"month"===s&&n.toLocaleDateString("en-US",{month:"long",year:"numeric"}),"year"===s&&n.getFullYear().toString()]}),(0,tm.jsxs)("p",{className:"text-sm text-[#333333] opacity-70 font-mono",children:["day"===s&&n.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),"week"===s&&n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),"month"===s&&n.toLocaleDateString("en-US",{month:"long",year:"numeric"}),"year"===s&&n.getFullYear().toString()]})]}),(0,tm.jsx)("button",{onClick:()=>o(1),className:"p-2 hover:bg-stone-100 rounded-lg transition-colors",disabled:l(n)===l(new Date),children:(0,tm.jsx)(E,{size:24,strokeWidth:2.5,className:l(n)===l(new Date)?"text-[#333333] opacity-30":"text-[#333333]"})})]}),(0,tm.jsx)("button",{onClick:()=>i(new Date),className:"w-full py-2 bg-stone-100 text-[#333333] rounded-lg hover:bg-stone-200 font-bold uppercase text-xs tracking-wider transition-colors",children:"Today"})]}),(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Completion Rate"}),(0,tm.jsxs)("div",{className:"flex items-center gap-4",children:[(0,tm.jsx)("div",{className:"flex-grow",children:(0,tm.jsx)("div",{className:"w-full bg-stone-200 h-4 rounded-full",children:(0,tm.jsx)("div",{className:"bg-black h-4 rounded-full transition-all flex items-center justify-end pr-2",style:{width:"".concat(b,"%")},children:b>15&&(0,tm.jsxs)("span",{className:"text-white font-bold text-xs",children:[b,"%"]})})})}),b<=15&&(0,tm.jsxs)("span",{className:"font-bold text-lg text-[#333333] font-mono",children:[b,"%"]})]}),(0,tm.jsxs)("p",{className:"text-xs text-[#333333] opacity-70 mt-2 font-mono uppercase tracking-wider",children:[v.filter(e=>e.completed).length," / ",v.length," habits completed"]})]}),(()=>{const e=(e=>{const t=l(e);return De[t]||{}})(n),t=Object.keys(e);return t.length>0?(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Routine Completions"}),(0,tm.jsx)("div",{className:"space-y-2",children:t.map(t=>{const n=de.find(e=>e.id===parseInt(t)),r=e[t];return n&&r?(0,tm.jsxs)("div",{className:"p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,tm.jsx)("span",{className:"font-medium text-[#333333]",children:n.name}),(0,tm.jsx)("span",{className:"text-xs px-2 py-1 rounded font-mono ".concat(r.completed?"bg-green-200 text-green-800":"bg-orange-200 text-orange-800"),children:r.completed?"Completed":"Abandoned"})]}),(0,tm.jsxs)("div",{className:"text-sm text-[#333333] opacity-70",children:[(0,tm.jsxs)("div",{className:"flex items-center gap-4 mb-1",children:[(0,tm.jsxs)("p",{children:["Actual: ",Math.round(10*r.totalTime)/10,"m"]}),r.estimatedTime&&(0,tm.jsxs)("p",{children:["Estimated: ",r.estimatedTime,"m"]}),r.estimatedTime&&(0,tm.jsxs)("p",{className:"font-medium ".concat(r.totalTime<=r.estimatedTime?"text-green-600":"text-orange-600"),children:[r.totalTime<=r.estimatedTime?"\u2713":"\u26a0",Math.round(100*(r.totalTime/r.estimatedTime-1)),"%"]})]}),r.startTime&&(0,tm.jsxs)("p",{children:["Started: ",new Date(r.startTime).toLocaleTimeString()]}),r.endTime&&(0,tm.jsxs)("p",{children:["Finished: ",new Date(r.endTime).toLocaleTimeString()]})]})]},t):null})})]}):null})()]}):"week"===s?(0,tm.jsxs)(tm.Fragment,{children:[(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Week Summary"}),(0,tm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[Math.round(w.reduce((e,t)=>e+d(t),0)/7),"%"]}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Avg Rate"})]}),(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsx)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:w.filter(e=>100===d(e)).length}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Perfect Days"})]})]})]}),(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Routine Statistics"}),(()=>{const e=y();return(0,tm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[e.completedRoutines,"/",e.totalRoutines]}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Completed"})]}),(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[e.averageTime,"m"]}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Avg Time"})]})]})})()]}),(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] mb-4 text-sm uppercase tracking-wide",children:"Last 7 Days"}),(0,tm.jsx)("div",{className:"space-y-3",children:w.map((e,t)=>{const n=u(e),r=d(e),i=l(e)===l(new Date);return(0,tm.jsxs)("div",{className:"p-3 rounded-lg ".concat(i?"bg-stone-100 border-2 border-[#333333]":"bg-stone-50"),children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,tm.jsxs)("div",{children:[(0,tm.jsx)("p",{className:"font-bold text-[#333333] text-sm",children:e.toLocaleDateString("en-US",{weekday:"short"})}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 font-mono",children:e.toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),(0,tm.jsxs)("div",{className:"text-right",children:[(0,tm.jsxs)("p",{className:"font-bold text-lg text-[#333333] font-mono",children:[r,"%"]}),(0,tm.jsxs)("p",{className:"text-xs text-[#333333] opacity-70",children:[n.filter(e=>e.completed).length,"/",n.length]})]})]}),(0,tm.jsx)("div",{className:"w-full bg-stone-200 h-2 rounded-full",children:(0,tm.jsx)("div",{className:"bg-black h-2 rounded-full transition-all",style:{width:"".concat(r,"%")}})})]},t)})})]})]}):"month"===s?(0,tm.jsxs)(tm.Fragment,{children:[(()=>{const e=g(n.getMonth(),n.getFullYear());return(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Month Summary"}),(0,tm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[e.avgRate,"%"]}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Avg Rate"})]}),(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsx)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:e.perfectDays}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Perfect Days"})]})]})]})})(),(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Routine Statistics"}),(()=>{const e=y();return(0,tm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[e.completedRoutines,"/",e.totalRoutines]}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Completed"})]}),(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[e.averageTime,"m"]}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Avg Time"})]})]})})()]}),(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsxs)("h3",{className:"font-bold text-[#333333] mb-4 text-sm uppercase tracking-wide",children:["Weeks in ",n.toLocaleDateString("en-US",{month:"long"})]}),(0,tm.jsx)("div",{className:"space-y-3",children:h(n).map((e,t)=>{const n=m(e.start,e.end),r=e.start<=new Date&&e.end>=new Date;return(0,tm.jsxs)("div",{className:"p-3 rounded-lg ".concat(r?"bg-stone-100 border-2 border-[#333333]":"bg-stone-50"),children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,tm.jsxs)("div",{children:[(0,tm.jsxs)("p",{className:"font-bold text-[#333333] text-sm",children:["Week ",t+1]}),(0,tm.jsxs)("p",{className:"text-xs text-[#333333] opacity-70 font-mono",children:[e.start.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",e.end.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),(0,tm.jsxs)("div",{className:"text-right",children:[(0,tm.jsxs)("p",{className:"font-bold text-lg text-[#333333] font-mono",children:[n.avgRate,"%"]}),(0,tm.jsxs)("p",{className:"text-xs text-[#333333] opacity-70",children:[n.completedHabits,"/",n.totalHabits," habits"]})]})]}),(0,tm.jsx)("div",{className:"w-full bg-stone-200 h-2 rounded-full",children:(0,tm.jsx)("div",{className:"bg-black h-2 rounded-full transition-all",style:{width:"".concat(n.avgRate,"%")}})})]},t)})})]})]}):"year"===s?(0,tm.jsxs)(tm.Fragment,{children:[(()=>{const e=(e=>{const t=f(e).map(t=>g(t.getMonth(),e)),n=t.length>0?Math.round(t.reduce((e,t)=>e+t.avgRate,0)/t.length):0,r=t.reduce((e,t)=>e+t.perfectDays,0),i=t.reduce((e,t)=>e+t.totalHabits,0),s=t.reduce((e,t)=>e+t.completedHabits,0);return{avgRate:n,perfectDays:r,totalHabits:i,completedHabits:s,months:t}})(n.getFullYear());return(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Year Summary"}),(0,tm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[e.avgRate,"%"]}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Avg Rate"})]}),(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsx)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:e.perfectDays}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Perfect Days"})]})]})]})})(),(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Routine Statistics"}),(()=>{const e=y();return(0,tm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[e.completedRoutines,"/",e.totalRoutines]}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Completed"})]}),(0,tm.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,tm.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[e.averageTime,"m"]}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Avg Time"})]})]})})()]}),(0,tm.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,tm.jsxs)("h3",{className:"font-bold text-[#333333] mb-4 text-sm uppercase tracking-wide",children:["Months in ",n.getFullYear()]}),(0,tm.jsx)("div",{className:"space-y-3",children:f(n.getFullYear()).map((e,t)=>{const n=g(e.getMonth(),e.getFullYear()),r=e.getMonth()===(new Date).getMonth()&&e.getFullYear()===(new Date).getFullYear();return(0,tm.jsxs)("div",{className:"p-3 rounded-lg ".concat(r?"bg-stone-100 border-2 border-[#333333]":"bg-stone-50"),children:[(0,tm.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,tm.jsxs)("div",{children:[(0,tm.jsx)("p",{className:"font-bold text-[#333333] text-sm",children:e.toLocaleDateString("en-US",{month:"long"})}),(0,tm.jsxs)("p",{className:"text-xs text-[#333333] opacity-70 font-mono",children:[n.perfectDays," perfect days"]})]}),(0,tm.jsxs)("div",{className:"text-right",children:[(0,tm.jsxs)("p",{className:"font-bold text-lg text-[#333333] font-mono",children:[n.avgRate,"%"]}),(0,tm.jsxs)("p",{className:"text-xs text-[#333333] opacity-70",children:[n.completedHabits,"/",n.totalHabits," habits"]})]})]}),(0,tm.jsx)("div",{className:"w-full bg-stone-200 h-2 rounded-full",children:(0,tm.jsx)("div",{className:"bg-black h-2 rounded-full transition-all",style:{width:"".concat(n.avgRate,"%")}})})]},t)})})]})]}):null]})},St=()=>n?null:(0,tm.jsx)("div",{className:"fixed bottom-0 left-0 right-0 backdrop-blur-sm bg-white/95 shadow-lg border-t border-stone-200 z-50 pb-safe",children:(0,tm.jsxs)("div",{className:"max-w-md mx-auto flex justify-around py-3",children:[(0,tm.jsxs)("button",{onClick:()=>t("dashboard"),className:"flex flex-col items-center p-3 min-h-[68px] justify-center transition-all duration-200 ".concat("dashboard"===e?"text-[#333333] scale-105":"text-[#333333] opacity-40 hover:opacity-70"),children:[(0,tm.jsx)(A,{size:24,strokeWidth:2.5}),(0,tm.jsx)("span",{className:"text-xs mt-1 font-mono uppercase tracking-wider",children:"Home"})]}),(0,tm.jsxs)("button",{onClick:()=>t("routines"),className:"flex flex-col items-center p-3 min-h-[68px] justify-center transition-all duration-200 ".concat("routines"===e?"text-[#333333] scale-105":"text-[#333333] opacity-40 hover:opacity-70"),children:[(0,tm.jsx)(D,{size:24,strokeWidth:2.5}),(0,tm.jsx)("span",{className:"text-xs mt-1 font-mono uppercase tracking-wider",children:"Routines"})]}),(0,tm.jsxs)("button",{onClick:()=>t("goals"),className:"flex flex-col items-center p-3 min-h-[68px] justify-center transition-all duration-200 ".concat("goals"===e?"text-[#333333] scale-105":"text-[#333333] opacity-40 hover:opacity-70"),children:[(0,tm.jsx)(R,{size:24,strokeWidth:2.5}),(0,tm.jsx)("span",{className:"text-xs mt-1 font-mono uppercase tracking-wider",children:"Goals"})]})]})});return M?(0,tm.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 to-stone-100 flex items-center justify-center",children:(0,tm.jsxs)("div",{className:"text-center",children:[(0,tm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#333333] mx-auto mb-4"}),(0,tm.jsx)("p",{className:"text-[#333333] font-medium",children:"Loading your habits..."})]})}):(0,tm.jsx)("div",{className:"min-h-screen bg-stone-50",children:(0,tm.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,tm.jsx)("div",{className:"pt-4 ".concat(n?"pb-0":"pb-20"),children:n?(0,tm.jsx)(qe,{}):(0,tm.jsxs)("div",{className:"p-4",children:["dashboard"===e&&(0,tm.jsx)(bt,{}),"routines"===e&&(0,tm.jsx)(wt,{}),"goals"===e&&(0,tm.jsx)(xt,{})]})}),(0,tm.jsx)(St,{}),re&&(0,tm.jsx)(UserManager,{onUserSelect:e=>{L(e),e&&(Oe(),ie(!1))},onClose:()=>ie(!1)}),o&&(0,tm.jsx)(Ue,{onClose:()=>l(!1)}),u&&(0,tm.jsx)(Fe,{goalId:h,onClose:()=>{d(!1),f(null)}}),F&&(0,tm.jsx)(Ve,{routine:z,onClose:()=>{V(!1),B(null)}}),H&&(0,tm.jsx)(Be,{habit:q,onClose:()=>{W(!1),K(null)}}),oe&&(0,tm.jsx)(He,{onClose:()=>le(!1)})]})})},rm=f("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),im=f("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),sm=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{Zp.init();const e=Zp.onAuthStateChanged(e=>{i(e),a(!1)});return e},[]);const c=async()=>{try{await Zp.signInWithGoogle()}catch(om){console.error("Sign in failed:",om),om.message.includes("Firebase is not configured")?alert("Firebase is not configured. Please set up your Firebase project and environment variables."):alert("Sign in failed. Please try again.")}};return(0,r.useEffect)(()=>{const e=e=>{o&&!e.target.closest(".relative")&&l(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]),s?(0,tm.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 to-stone-100 flex items-center justify-center",children:(0,tm.jsxs)("div",{className:"text-center",children:[(0,tm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#333333] mx-auto mb-4"}),(0,tm.jsx)("p",{className:"text-[#333333] font-medium",children:"Loading..."})]})}):n?(0,tm.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 to-stone-100",children:[(0,tm.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-black shadow-lg border-b border-gray-800 z-50",children:(0,tm.jsx)("div",{className:"max-w-md mx-auto px-4",children:(0,tm.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,tm.jsx)("div",{className:"flex items-center",children:(0,tm.jsx)("img",{src:"/agm_logo_white.png",alt:"AGM Logo",className:"h-10 w-10 sm:h-10 sm:w-10 object-contain"})}),(0,tm.jsx)("div",{className:"flex-1 flex justify-center",children:(0,tm.jsx)("h1",{className:"text-sm sm:text-lg font-bold text-white tracking-tight",children:"GROWTH TRACKER"})}),(0,tm.jsxs)("div",{className:"relative",children:[(0,tm.jsx)("button",{onClick:()=>l(!o),className:"w-9 h-9 bg-white rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,tm.jsx)(rm,{size:18,strokeWidth:2.5,className:"text-black"})}),o&&(0,tm.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl border-2 border-stone-200 z-50",children:[(0,tm.jsxs)("div",{className:"p-4 border-b border-stone-200",children:[(0,tm.jsx)("p",{className:"font-bold text-[#333333]",children:n.name}),(0,tm.jsx)("p",{className:"text-sm text-[#333333] opacity-70",children:n.email})]}),(0,tm.jsx)("div",{className:"border-t border-stone-200 py-2",children:(0,tm.jsxs)("button",{onClick:()=>{l(!1),(async()=>{try{await Zp.signOut()}catch(om){console.error("Sign out failed:",om),alert("Sign out failed. Please try again.")}})()},className:"w-full px-4 py-3 text-left hover:bg-red-50 flex items-center gap-3 text-red-600",children:[(0,tm.jsx)(im,{size:18,strokeWidth:2.5}),(0,tm.jsx)("span",{className:"font-medium text-sm",children:"Sign Out"})]})})]})]})]})})}),(0,tm.jsx)("div",{className:"max-w-md mx-auto px-4 pt-16 pb-8",children:t})]}):(0,tm.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 to-stone-100 flex items-center justify-center p-4",children:(0,tm.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center",children:[(0,tm.jsxs)("div",{className:"mb-6",children:[(0,tm.jsx)("div",{className:"w-16 h-16 bg-[#333333] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,tm.jsx)(rm,{size:32,strokeWidth:2.5,className:"text-white"})}),(0,tm.jsx)("h1",{className:"text-2xl font-bold text-[#333333] mb-2",children:"Habit Tracker"}),(0,tm.jsx)("p",{className:"text-[#333333] opacity-70 mb-4",children:"Sign in with your Google account to start tracking your habits and goals"}),(0,tm.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4 text-left",children:[(0,tm.jsx)("h3",{className:"font-bold text-yellow-800 mb-2",children:"Firebase Setup Required"}),(0,tm.jsx)("p",{className:"text-sm text-yellow-700 mb-2",children:"To use this app, you need to set up Firebase:"}),(0,tm.jsxs)("ol",{className:"text-xs text-yellow-700 space-y-1 list-decimal list-inside",children:[(0,tm.jsx)("li",{children:"Create a Firebase project at console.firebase.google.com"}),(0,tm.jsx)("li",{children:"Enable Authentication (Google provider)"}),(0,tm.jsx)("li",{children:"Enable Firestore Database"}),(0,tm.jsx)("li",{children:"Copy .env.example to .env and add your Firebase config"}),(0,tm.jsx)("li",{children:"Restart the development server"})]})]})]}),(0,tm.jsxs)("button",{onClick:c,className:"w-full flex items-center justify-center gap-3 bg-[#333333] text-white py-4 rounded-lg hover:bg-black font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-[1.02]",children:[(0,tm.jsx)(im,{size:20,strokeWidth:2.5}),"Sign in with Google"]}),(0,tm.jsx)("p",{className:"text-xs text-[#333333] opacity-50 mt-4",children:"Your data will be securely stored in the cloud"})]})})};const am=function(){return(0,tm.jsx)(sm,{children:(0,tm.jsx)(nm,{})})};i.createRoot(document.getElementById("root")).render((0,tm.jsx)(r.StrictMode,{children:(0,tm.jsx)(am,{})}))})();
//# sourceMappingURL=main.90aa2630.js.map