/*! For license information please see main.cd4f82a3.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:_.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+N(l,0):s,x(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),I(o,t,i,"",function(e){return e})):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+N(a=e[c],c);l+=I(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,i,u=s+N(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=_.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,P(k);else{var t=r(u);null!==t&&O(x,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,S=null,T=-1,C=5,N=-1;function I(){return!(t.unstable_now()-N<C)}function A(){if(null!==S){var e=t.unstable_now();N=e;var n=!0;try{n=S(!0,e)}finally{n?_():(E=!1,S=null)}}else E=!1}if("function"===typeof b)_=function(){b(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,_=function(){D.postMessage(null)}}else _=function(){y(A,0)};function P(e){S=e,E||(E=!0,_())}function O(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,O(x,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,P(k))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case k:return"Portal";case S:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,_e=null,Ee=null;function Se(e){if(e=xi(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),ke(e.stateNode,e.type,t))}}function Te(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ce(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ne(e,t){return e(t)}function Ie(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ne(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ee)&&(Ie(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function je(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,o,a,l){Le=!1,Me=null,je.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,_t,Et,St,Tt=!1,Ct=[],Nt=null,It=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=wi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void St(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Tt=!1,null!==Nt&&Ut(Nt)&&(Nt=null),null!==It&&Ut(It)&&(It=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Ft),Dt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&zt(Nt,e),null!==It&&zt(It,e),null!==At&&zt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var Ht=w.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function Kt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nt=Lt(Nt,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=xi(i);if(null!==s&&xt(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=wi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function on(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var an,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=on(un),dn=M({},un,{view:0,detail:0}),fn=on(dn),pn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(an=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=an=0,cn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=on(pn),gn=on(M({},pn,{dataTransfer:0})),yn=on(M({},dn,{relatedTarget:0})),vn=on(M({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=M({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=on(bn),xn=on(M({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return Sn}var Cn=M({},dn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=on(Cn),In=on(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Dn=on(M({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Pn),jn=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Un=u&&"TextEvent"in window&&!Mn,Fn=u&&(!Ln||Mn&&8<Mn&&11>=Mn),Vn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Qr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Xn(e){Vr(e,0)}function Jn(e){if(G(ki(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(u){var er;if(u){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),Yn=Qn=null)}function ir(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];Gn(t,Yn,e,xe(e)),Re(Xn,t)}}function sr(e,t,n){"focusin"===e?(rr(),Yn=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function ar(e,t){if("click"===e)return Jn(t)}function lr(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!cr(e[i],t[i]))return!1}return!0}function hr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=hr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&mr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dr(n,s);var o=dr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yr=u&&"documentMode"in document&&11>=document.documentMode,vr=null,br=null,wr=null,xr=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==vr||vr!==Q(r)||("selectionStart"in(r=vr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&ur(wr,r)||(wr=r,0<(r=Qr(br,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},Tr={};function Cr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Sr[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Nr=Cr("animationend"),Ir=Cr("animationiteration"),Ar=Cr("animationstart"),Rr=Cr("transitionend"),Dr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Dr.set(e,t),l(t,[e])}for(var jr=0;jr<Pr.length;jr++){var Lr=Pr[jr];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(Nr,"onAnimationEnd"),Or(Ir,"onAnimationIteration"),Or(Ar,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ur=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function zr(e,t){var n=t[yi];void 0===n&&(n=t[yi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Hr]){e[Hr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Ur.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=qt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=wi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re(function(){var r=s,i=xe(n),o=[];e:{var a=Dr.get(e);if(void 0!==a){var l=hn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Nr:case Ir:case Ar:l=vn;break;case Rr:l=Dn;break;case"scroll":l=fn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&u.push(Gr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!wi(c)&&!c[gi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?wi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:ki(l),f=null==c?a:ki(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,wi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,m=d;m;m=Yr(m))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)d=Yr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Yr(u),d=Yr(d)}u=null}else u=null;null!==l&&Xr(o,a,l,u,!1),null!==c&&null!==h&&Xr(o,h,c,u,!0)}if("select"===(l=(a=r?ki(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Kn(a))if(Zn)g=lr;else{g=or;var y=sr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ar);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?ki(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(vr=y,br=r,wr=null);break;case"focusout":wr=br=vr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,kr(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":kr(o,n,i)}var v;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(v=tn()):(Zt="value"in($t=i)?$t.value:$t.textContent,Wn=!0)),0<(y=Qr(r,b)).length&&(b=new xn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Hn(n))&&(b.data=v))),(v=Un?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Ln&&Bn(e,t)?(e=tn(),en=Zt=$t=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Vr(o,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=De(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=De(n,s))&&o.unshift(Gr(n,l,a)):i||null!=(l=De(n,s))&&o.push(Gr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace($r,"")}function ei(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(s(425))}function ti(){}var ni=null,ri=null;function ii(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var si="function"===typeof setTimeout?setTimeout:void 0,oi="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,li="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ci)}:si;function ci(e){setTimeout(function(){throw e})}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function hi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),pi="__reactFiber$"+fi,mi="__reactProps$"+fi,gi="__reactContainer$"+fi,yi="__reactEvents$"+fi,vi="__reactListeners$"+fi,bi="__reactHandles$"+fi;function wi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[pi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[pi]||e[gi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[mi]||null}var Ei=[],Si=-1;function Ti(e){return{current:e}}function Ci(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function Ni(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ii={},Ai=Ti(Ii),Ri=Ti(!1),Di=Ii;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ji(){Ci(Ri),Ci(Ai)}function Li(e,t,n){if(Ai.current!==Ii)throw Error(s(168));Ni(Ai,t),Ni(Ri,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return M({},n,r)}function Ui(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Di=Ai.current,Ni(Ai,e),Ni(Ri,Ri.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ri),Ci(Ai),Ni(Ai,e)):Ci(Ri),Ni(Ri,n)}var Vi=null,zi=!1,Bi=!1;function Hi(e){null===Vi?Vi=[e]:Vi.push(e)}function Wi(){if(!Bi&&null!==Vi){Bi=!0;var e=0,t=bt;try{var n=Vi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,zi=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ge(Ze,Wi),i}finally{bt=t,Bi=!1}}return null}var qi=[],Ki=0,Gi=null,Qi=0,Yi=[],Xi=0,Ji=null,$i=1,Zi="";function es(e,t){qi[Ki++]=Qi,qi[Ki++]=Gi,Gi=e,Qi=t}function ts(e,t,n){Yi[Xi++]=$i,Yi[Xi++]=Zi,Yi[Xi++]=Ji,Ji=e;var r=$i;e=Zi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Zi=s+e}else $i=1<<s|n<<i|r,Zi=e}function ns(e){null!==e.return&&(es(e,1),ts(e,1,0))}function rs(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null;for(;e===Ji;)Ji=Yi[--Xi],Yi[Xi]=null,Zi=Yi[--Xi],Yi[Xi]=null,$i=Yi[--Xi],Yi[Xi]=null}var is=null,ss=null,os=!1,as=null;function ls(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function cs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,is=e,ss=hi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,is=e,ss=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:$i,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,is=e,ss=null,!0);default:return!1}}function us(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function hs(e){if(os){var t=ss;if(t){var n=t;if(!cs(e,t)){if(us(e))throw Error(s(418));t=hi(n.nextSibling);var r=is;t&&cs(e,t)?ls(r,n):(e.flags=-4097&e.flags|2,os=!1,is=e)}}else{if(us(e))throw Error(s(418));e.flags=-4097&e.flags|2,os=!1,is=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;is=e}function fs(e){if(e!==is)return!1;if(!os)return ds(e),os=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ii(e.type,e.memoizedProps)),t&&(t=ss)){if(us(e))throw ps(),Error(s(418));for(;t;)ls(e,t),t=hi(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ss=hi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ss=null}}else ss=is?hi(e.stateNode.nextSibling):null;return!0}function ps(){for(var e=ss;e;)e=hi(e.nextSibling)}function ms(){ss=is=null,os=!1}function gs(e){null===as?as=[e]:as.push(e)}var ys=w.ReactCurrentBatchConfig;function vs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ws(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===_?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&ws(s)===t.type)?((r=i(t,n.props)).ref=vs(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=vs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=vs(e,null,t),n.return=e,n;case k:return(t=Vc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Mc(t,e.mode,n,null)).return=e,t;bs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case k:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:h(e,t,n,r,null);bs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return h(t,e=e.get(n)||null,r,i,null);bs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),os&&es(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return os&&es(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),os&&es(i,m),c}function g(i,a,l,c){var u=j(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),os&&es(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return os&&es(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),os&&es(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===_){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ws(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=vs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===_?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=vs(r,s,o),l.return=r,r=l)}return a(r);case k:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vc(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(j(o))return g(r,s,o,l);bs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ks=xs(!0),_s=xs(!1),Es=Ti(null),Ss=null,Ts=null,Cs=null;function Ns(){Cs=Ts=Ss=null}function Is(e){var t=Es.current;Ci(Es),e._currentValue=t}function As(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Rs(e,t){Ss=e,Cs=Ts=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xa=!0),e.firstContext=null)}function Ds(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Ts){if(null===Ss)throw Error(s(308));Ts=e,Ss.dependencies={lanes:0,firstContext:e}}else Ts=Ts.next=e;return t}var Ps=null;function Os(e){null===Ps?Ps=[e]:Ps.push(e)}function js(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ls(e,r)}function Ls(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Us(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ls(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ls(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,r){var i=e.updateQueue;Ms=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:Ms=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ul|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ks={},Gs=Ti(Ks),Qs=Ti(Ks),Ys=Ti(Ks);function Xs(e){if(e===Ks)throw Error(s(174));return e}function Js(e,t){switch(Ni(Ys,t),Ni(Qs,e),Ni(Gs,Ks),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Gs),Ni(Gs,t)}function $s(){Ci(Gs),Ci(Qs),Ci(Ys)}function Zs(e){Xs(Ys.current);var t=Xs(Gs.current),n=le(t,e.type);t!==n&&(Ni(Qs,e),Ni(Gs,n))}function eo(e){Qs.current===e&&(Ci(Gs),Ci(Qs))}var to=Ti(0);function no(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ro=[];function io(){for(var e=0;e<ro.length;e++)ro[e]._workInProgressVersionPrimary=null;ro.length=0}var so=w.ReactCurrentDispatcher,oo=w.ReactCurrentBatchConfig,ao=0,lo=null,co=null,uo=null,ho=!1,fo=!1,po=0,mo=0;function go(){throw Error(s(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function vo(e,t,n,r,i,o){if(ao=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?ta:na,e=n(r,i),fo){o=0;do{if(fo=!1,po=0,25<=o)throw Error(s(301));o+=1,uo=co=null,t.updateQueue=null,so.current=ra,e=n(r,i)}while(fo)}if(so.current=ea,t=null!==co&&null!==co.next,ao=0,uo=co=lo=null,ho=!1,t)throw Error(s(300));return e}function bo(){var e=0!==po;return po=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===uo?lo.memoizedState=uo=e:uo=uo.next=e,uo}function xo(){if(null===co){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=co.next;var t=null===uo?lo.memoizedState:uo.next;if(null!==t)uo=t,co=e;else{if(null===e)throw Error(s(310));e={memoizedState:(co=e).memoizedState,baseState:co.baseState,baseQueue:co.baseQueue,queue:co.queue,next:null},null===uo?lo.memoizedState=uo=e:uo=uo.next=e}return uo}function ko(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=co,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((ao&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,lo.lanes|=h,Ul|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,cr(r,t.memoizedState)||(xa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Ul|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);cr(o,t.memoizedState)||(xa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function To(e,t){var n=lo,r=xo(),i=t(),o=!cr(r.memoizedState,i);if(o&&(r.memoizedState=i,xa=!0),r=r.queue,Uo(Io.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==uo&&1&uo.memoizedState.tag){if(n.flags|=2048,Po(9,No.bind(null,n,r,i,t),void 0,null),null===Rl)throw Error(s(349));0!==(30&ao)||Co(n,t,i)}return i}function Co(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function No(e,t,n,r){t.value=n,t.getSnapshot=r,Ao(t)&&Ro(e)}function Io(e,t,n){return n(function(){Ao(t)&&Ro(e)})}function Ao(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cr(e,n)}catch(r){return!0}}function Ro(e){var t=Ls(e,1);null!==t&&ic(t,e,1,-1)}function Do(e){var t=wo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:e},t.queue=e,e=e.dispatch=Xo.bind(null,lo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return xo().memoizedState}function jo(e,t,n,r){var i=wo();lo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Lo(e,t,n,r){var i=xo();r=void 0===r?null:r;var s=void 0;if(null!==co){var o=co.memoizedState;if(s=o.destroy,null!==r&&yo(r,o.deps))return void(i.memoizedState=Po(t,n,s,r))}lo.flags|=e,i.memoizedState=Po(1|t,n,s,r)}function Mo(e,t){return jo(8390656,8,e,t)}function Uo(e,t){return Lo(2048,8,e,t)}function Fo(e,t){return Lo(4,2,e,t)}function Vo(e,t){return Lo(4,4,e,t)}function zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4,4,zo.bind(null,t,e),n)}function Ho(){}function Wo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0===(21&ao)?(e.baseState&&(e.baseState=!1,xa=!0),e.memoizedState=n):(cr(n,t)||(n=mt(),lo.lanes|=n,Ul|=n,e.baseState=!0),t)}function Go(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oo.transition;oo.transition={};try{e(!1),t()}finally{bt=n,oo.transition=r}}function Qo(){return xo().memoizedState}function Yo(e,t,n){var r=rc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e))$o(t,n);else if(null!==(n=js(e,t,n,r))){ic(n,e,r,nc()),Zo(n,t,r)}}function Xo(e,t,n){var r=rc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))$o(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,cr(a,o)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=js(e,t,i,r))&&(ic(n,e,r,i=nc()),Zo(n,t,r))}}function Jo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function $o(e,t){fo=ho=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var ea={readContext:Ds,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ta={readContext:Ds,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:Mo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Do,useDebugValue:Ho,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Go.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=wo();if(os){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Rl)throw Error(s(349));0!==(30&ao)||Co(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Mo(Io.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,No.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=Rl.identifierPrefix;if(os){var n=Zi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=po++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},na={readContext:Ds,useCallback:Wo,useContext:Ds,useEffect:Uo,useImperativeHandle:Bo,useInsertionEffect:Fo,useLayoutEffect:Vo,useMemo:qo,useReducer:_o,useRef:Oo,useState:function(){return _o(ko)},useDebugValue:Ho,useDeferredValue:function(e){return Ko(xo(),co.memoizedState,e)},useTransition:function(){return[_o(ko)[0],xo().memoizedState]},useMutableSource:So,useSyncExternalStore:To,useId:Qo,unstable_isNewReconciler:!1},ra={readContext:Ds,useCallback:Wo,useContext:Ds,useEffect:Uo,useImperativeHandle:Bo,useInsertionEffect:Fo,useLayoutEffect:Vo,useMemo:qo,useReducer:Eo,useRef:Oo,useState:function(){return Eo(ko)},useDebugValue:Ho,useDeferredValue:function(e){var t=xo();return null===co?t.memoizedState=e:Ko(t,co.memoizedState,e)},useTransition:function(){return[Eo(ko)[0],xo().memoizedState]},useMutableSource:So,useSyncExternalStore:To,useId:Qo,unstable_isNewReconciler:!1};function ia(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var oa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=Vs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(ic(t,e,i,r),Bs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=Vs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(ic(t,e,i,r),Bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),i=Vs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zs(e,i,r))&&(ic(t,e,r,n),Bs(t,e,r))}};function aa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,s))}function la(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=Ds(s):(i=Oi(t)?Di:Ai.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ca(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oa.enqueueReplaceState(t,t.state,null)}function ua(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Us(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ds(s):(s=Oi(t)?Di:Ai.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(sa(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&oa.enqueueReplaceState(i,i.state,null),Ws(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ha(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pa="function"===typeof WeakMap?WeakMap:Map;function ma(e,t,n){(n=Vs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Gl=r),fa(0,t)},n}function ga(e,t,n){(n=Vs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fa(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){fa(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ya(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ba(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Vs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=w.ReactCurrentOwner,xa=!1;function ka(e,t,n,r){t.child=null===e?_s(t,null,n,r):ks(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return Rs(t,i),r=vo(e,t,n,r,s,i),n=bo(),null===e||xa?(os&&n&&ns(t),t.flags|=1,ka(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=jc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ur(s,r)&&e.ref===t.ref){if(xa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(xa=!0)}}return Na(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ni(jl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ni(jl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ni(jl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ni(jl,Ol),Ol|=r;return ka(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Na(e,t,n,r,i){var s=Oi(n)?Di:Ai.current;return s=Pi(t,s),Rs(t,i),n=vo(e,t,n,r,s,i),r=bo(),null===e||xa?(os&&r&&ns(t),t.flags|=1,ka(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ia(e,t,n,r,i){if(Oi(n)){var s=!0;Ui(t)}else s=!1;if(Rs(t,i),null===t.stateNode)qa(e,t),la(t,n,r),ua(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ds(c):c=Pi(t,c=Oi(n)?Di:Ai.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&ca(t,o,r,c),Ms=!1;var d=t.memoizedState;o.state=d,Ws(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ri.current||Ms?("function"===typeof u&&(sa(t,n,u,r),l=t.memoizedState),(a=Ms||aa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ia(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ds(l):l=Pi(t,l=Oi(n)?Di:Ai.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&ca(t,o,r,l),Ms=!1,d=t.memoizedState,o.state=d,Ws(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ri.current||Ms?("function"===typeof f&&(sa(t,n,f,r),p=t.memoizedState),(c=Ms||aa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,s,i)}function Aa(e,t,n,r,i,s){Ca(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ka(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ks(t,e.child,null,s),t.child=ks(t,null,a,s)):ka(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),Js(e,t.containerInfo)}function Da(e,t,n,r,i){return ms(),gs(i),t.flags|=256,ka(e,t,n,r),t.child}var Pa,Oa,ja,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Ua(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=to.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ni(to,1&o),null===e)return hs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Uc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ua(n),t.memoizedState=Ma,e):Va(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=da(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ks(t,e.child,null,a),t.child.memoizedState=Ua(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=da(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),xa||l){if(null!==(r=Rl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ls(e,i),ic(r,e,i,-1))}return yc(),za(e,t,a,r=da(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ss=hi(i.nextSibling),is=t,os=!0,as=null,null!==e&&(Yi[Xi++]=$i,Yi[Xi++]=Zi,Yi[Xi++]=Ji,$i=e.id,Zi=e.overflow,Ji=t),t=Va(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=jc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=jc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ua(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=jc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&gs(r),ks(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),As(e.return,t,n)}function Ha(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Wa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ka(e,t,r.children,n),0!==(2&(r=to.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ni(to,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===no(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ha(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===no(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ha(t,!0,n,null,s);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=jc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!os)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ya(e,t,n){var r=t.pendingProps;switch(rs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qa(t),null;case 1:case 17:return Oi(t.type)&&ji(),Qa(t),null;case 3:return r=t.stateNode,$s(),Ci(Ri),Ci(Ai),io(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==as&&(lc(as),as=null))),Oa(e,t),Qa(t),null;case 5:eo(t);var i=Xs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)ja(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Qa(t),null}if(e=Xs(Gs.current),fs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[pi]=t,r[mi]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ie(r,o),zr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&ei(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&ei(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ti)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pi]=t,e[mi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zr("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ti)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qa(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Xs(Ys.current),Xs(Gs.current),fs(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(o=r.nodeValue!==n)&&null!==(e=is))switch(e.tag){case 3:ei(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ei(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Qa(t),null;case 13:if(Ci(to),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(os&&null!==ss&&0!==(1&t.mode)&&0===(128&t.flags))ps(),ms(),t.flags|=98560,o=!1;else if(o=fs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[pi]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qa(t),o=!1}else null!==as&&(lc(as),as=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&to.current)?0===Ll&&(Ll=3):yc())),null!==t.updateQueue&&(t.flags|=4),Qa(t),null);case 4:return $s(),Oa(e,t),null===e&&Wr(t.stateNode.containerInfo),Qa(t),null;case 10:return Is(t.type._context),Qa(t),null;case 19:if(Ci(to),null===(o=t.memoizedState))return Qa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ga(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=no(e))){for(t.flags|=128,Ga(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ni(to,1&to.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Wl&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=no(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!os)return Qa(t),null}else 2*Je()-o.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=to.current,Ni(to,r?1&n|2:1&n),t):(Qa(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Qa(t),6&t.subtreeFlags&&(t.flags|=8192)):Qa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xa(e,t){switch(rs(t),t.tag){case 1:return Oi(t.type)&&ji(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $s(),Ci(Ri),Ci(Ai),io(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return eo(t),null;case 13:if(Ci(to),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(to),null;case 4:return $s(),null;case 10:return Is(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},ja=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xs(Gs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ti)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,$a=!1,Za="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var rl=!1;function il(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&nl(t,n,s)}i=i.next}while(i!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[mi],delete t[yi],delete t[vi],delete t[bi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ti));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}var dl=null,fl=!1;function pl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:$a||tl(n,t);case 6:var r=dl,i=fl;dl=null,pl(e,t,n),fl=i,null!==(dl=r)&&(fl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(fl?(e=dl,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(dl,n.stateNode));break;case 4:r=dl,i=fl,dl=n.stateNode.containerInfo,fl=!0,pl(e,t,n),dl=r,fl=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&nl(n,t,o),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!$a&&(tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,pl(e,t,n),$a=r):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function yl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,fl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));ml(o,a,i),dl=null,fl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yl(t,e),bl(e),4&r){try{il(3,e,e.return),sl(3,e)}catch(g){Tc(e,e.return,g)}try{il(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return);break;case 5:if(yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[mi]=o}catch(g){Tc(e,e.return,g)}}break;case 6:if(yl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tc(e,e.return,g)}}break;case 3:if(yl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:yl(t,e),bl(e);break;case 13:yl(t,e),bl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Je())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,yl(t,e),$a=u):yl(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(el=e,h=e.child;null!==h;){for(d=el=h;null!==el;){switch(p=(f=el).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:tl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,el=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Tc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yl(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),hl(e,cl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,cl(e),o);break;default:throw Error(s(161))}}catch(Rn){Tc(e,e.return,Rn)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){el=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==el;){var i=el,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ja;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Ja;var c=$a;if(Ja=o,($a=l)&&!c)for(el=i;null!==el;)l=(o=el).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,el=l):El(i);for(;null!==s;)el=s,xl(s,t,n),s=s.sibling;el=i,Ja=a,$a=c}kl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,el=s):kl(e)}}function kl(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ia(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}$a||512&t.flags&&ol(t)}catch(f){Tc(t,t.return,f)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function _l(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function El(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(Rn){Tc(t,n,Rn)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Rn){Tc(t,i,Rn)}}var s=t.return;try{ol(t)}catch(Rn){Tc(t,s,Rn)}break;case 5:var o=t.return;try{ol(t)}catch(Rn){Tc(t,o,Rn)}}}catch(Rn){Tc(t,t.return,Rn)}if(t===e){el=null;break}var a=t.sibling;if(null!==a){a.return=t.return,el=a;break}el=t.return}}var Sl,Tl=Math.ceil,Cl=w.ReactCurrentDispatcher,Nl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,Al=0,Rl=null,Dl=null,Pl=0,Ol=0,jl=Ti(0),Ll=0,Ml=null,Ul=0,Fl=0,Vl=0,zl=null,Bl=null,Hl=0,Wl=1/0,ql=null,Kl=!1,Gl=null,Ql=null,Yl=!1,Xl=null,Jl=0,$l=0,Zl=null,ec=-1,tc=0;function nc(){return 0!==(6&Al)?Je():-1!==ec?ec:ec=Je()}function rc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==ys.transition?(0===tc&&(tc=mt()),tc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ic(e,t,n,r){if(50<$l)throw $l=0,Zl=null,Error(s(185));yt(e,n,r),0!==(2&Al)&&e===Rl||(e===Rl&&(0===(2&Al)&&(Fl|=n),4===Ll&&cc(e,Pl)),sc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Wl=Je()+500,zi&&Wi()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Rl?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zi=!0,Hi(e)}(uc.bind(null,e)):Hi(uc.bind(null,e)),li(function(){0===(6&Al)&&Wi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(ec=-1,tc=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=dt(e,e===Rl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Al;Al|=2;var o=gc();for(Rl===e&&Pl===t||(ql=null,Wl=Je()+500,pc(e,t));;)try{wc();break}catch(l){mc(e,l)}Ns(),Cl.current=o,Al=i,null!==Dl?t=0:(Rl=null,Pl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ml,pc(e,0),cc(e,r),sc(e,Je()),n;if(6===t)cc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cr(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ml,pc(e,0),cc(e,r),sc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,Bl,ql);break;case 3:if(cc(e,r),(130023424&r)===r&&10<(t=Hl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=si(_c.bind(null,e,Bl,ql),t);break}_c(e,Bl,ql);break;case 4:if(cc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=si(_c.bind(null,e,Bl,ql),r);break}_c(e,Bl,ql);break;default:throw Error(s(329))}}}return sc(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Bl,Bl=n,null!==t&&lc(t)),e}function lc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function cc(e,t){for(t&=~Vl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Al))throw Error(s(327));Ec();var t=dt(e,0);if(0===(1&t))return sc(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ml,pc(e,0),cc(e,t),sc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bl,ql),sc(e,Je()),null}function hc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Wl=Je()+500,zi&&Wi())}}function dc(e){null!==Xl&&0===Xl.tag&&0===(6&Al)&&Ec();var t=Al;Al|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(Al=t))&&Wi()}}function fc(){Ol=jl.current,Ci(jl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oi(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(rs(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ji();break;case 3:$s(),Ci(Ri),Ci(Ai),io();break;case 5:eo(r);break;case 4:$s();break;case 13:case 19:Ci(to);break;case 10:Is(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Rl=e,Dl=e=jc(e.current,null),Pl=Ol=t,Ll=0,Ml=null,Vl=Fl=Ul=0,Bl=zl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ps=null}return e}function mc(e,t){for(;;){var n=Dl;try{if(Ns(),so.current=ea,ho){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ho=!1}if(ao=0,uo=co=lo=null,fo=!1,po=0,Nl.current=null,null===n||null===n.return){Ll=1,Ml=t,Dl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ba(p,a,l,0,t),1&p.mode&&ya(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ya(o,u,t),yc();break e}c=Error(s(426))}else if(os&&1&l.mode){var y=va(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ba(y,a,l,0,t),gs(ha(c,l));break e}}o=c=ha(c,l),4!==Ll&&(Ll=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Hs(o,ma(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ql||!Ql.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Hs(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}kc(n)}catch(w){t=w,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function gc(){var e=Cl.current;return Cl.current=ea,null===e?ea:e}function yc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Rl||0===(268435455&Ul)&&0===(268435455&Fl)||cc(Rl,Pl)}function vc(e,t){var n=Al;Al|=2;var r=gc();for(Rl===e&&Pl===t||(ql=null,pc(e,t));;)try{bc();break}catch(i){mc(e,i)}if(Ns(),Al=n,Cl.current=r,null!==Dl)throw Error(s(261));return Rl=null,Pl=0,Ll}function bc(){for(;null!==Dl;)xc(Dl)}function wc(){for(;null!==Dl&&!Ye();)xc(Dl)}function xc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?kc(e):Dl=t,Nl.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ya(n,t,Ol)))return void(Dl=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ll=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ll&&(Ll=5)}function _c(e,t,n){var r=bt,i=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Xl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Rl&&(Dl=Rl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Rc(tt,function(){return Ec(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=bt;bt=1;var l=Al;Al|=4,Nl.current=null,function(e,t){if(ni=Wt,mr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(Jt){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ri={focusedElem:e,selectionRange:n},Wt=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ia(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(Jt){Tc(t,t.return,Jt)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}m=rl,rl=!1}(e,n),vl(n,e),gr(ri),Wt=!!ni,ri=ni=null,e.current=n,wl(n,e,i),Xe(),Al=l,bt=a,Il.transition=o}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Jl=i),o=e.pendingLanes,0===o&&(Ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Gl,Gl=null,e;0!==(1&Jl)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Zl?$l++:($l=0,Zl=e):$l=0,Wi()}(e,t,n,r)}finally{Il.transition=i,bt=r}return null}function Ec(){if(null!==Xl){var e=wt(Jl),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Jl=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,el=e.current;null!==el;){var o=el,a=o.child;if(0!==(16&el.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(el=u;null!==el;){var h=el;switch(h.tag){case 0:case 11:case 15:il(8,h,o)}var d=h.child;if(null!==d)d.return=h,el=d;else for(;null!==el;){var f=(h=el).sibling,p=h.return;if(al(h),h===u){el=null;break}if(null!==f){f.return=p,el=f;break}el=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}el=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,el=a;else e:for(;null!==el;){if(0!==(2048&(o=el).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,el=v;break e}el=o.return}}var b=e.current;for(el=b;null!==el;){var w=(a=el).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,el=w;else e:for(a=b;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(k){Tc(l,l.return,k)}if(l===a){el=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,el=x;break e}el=l.return}}if(Al=i,Wi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function Sc(e,t,n){e=zs(e,t=ma(0,t=ha(n,t),1),1),t=nc(),null!==e&&(yt(e,1,t),sc(e,t))}function Tc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=zs(t,e=ga(t,e=ha(n,e),1),1),e=nc(),null!==t&&(yt(t,1,e),sc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Pl&n)===n&&(4===Ll||3===Ll&&(130023424&Pl)===Pl&&500>Je()-Hl?pc(e,0):Vl|=n),sc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=nc();null!==(e=Ls(e,t))&&(yt(e,t,n),sc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Nc(e,n)}function Rc(e,t){return Ge(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Dc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case E:a=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case I:return(e=Pc(13,n,t,i)).elementType=I,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Uc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case C:a=9;break e;case N:a=11;break e;case R:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,o,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Us(s),e}function Hc(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Mi(e,n,t)}return t}function Wc(e,t,n,r,i,s,o,a,l){return(e=Bc(n,r,!0,e,0,s,0,a,l)).context=Hc(null),n=e.current,(s=Vs(r=nc(),i=rc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,i),e.current.lanes=i,yt(e,i,r),sc(e,r),e}function qc(e,t,n,r){var i=t.current,s=nc(),o=rc(i);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Vs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zs(i,t,o))&&(ic(e,i,o,s),Bs(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)xa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xa=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),ms();break;case 5:Zs(t);break;case 1:Oi(t.type)&&Ui(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ni(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ni(to,1&to.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ni(to,1&to.current),null!==(e=Ka(e,t,n))?e.sibling:null);Ni(to,1&to.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ni(to,to.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ka(e,t,n)}(e,t,n);xa=0!==(131072&e.flags)}else xa=!1,os&&0!==(1048576&t.flags)&&ts(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Pi(t,Ai.current);Rs(t,n),i=vo(null,t,r,e,i,n);var o=bo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Ui(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Us(t),i.updater=oa,t.stateNode=i,i._reactInternals=t,ua(t,r,e,n),t=Aa(null,t,r,!0,o,n)):(t.tag=0,os&&o&&ns(t),ka(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===R)return 14}return 2}(r),e=ia(r,e),i){case 0:t=Na(null,t,r,e,n);break e;case 1:t=Ia(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,ia(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Na(e,t,r,i=t.elementType===r?i:ia(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:ia(r,i),n);case 3:e:{if(Ra(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),Ws(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,i=ha(Error(s(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ha(Error(s(424)),t));break e}for(ss=hi(t.stateNode.containerInfo.firstChild),is=t,os=!0,as=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),r===i){t=Ka(e,t,n);break e}ka(e,t,r,n)}t=t.child}return t;case 5:return Zs(t),null===e&&hs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ii(r,i)?a=null:null!==o&&ii(r,o)&&(t.flags|=32),Ca(e,t),ka(e,t,a,n),t.child;case 6:return null===e&&hs(t),null;case 13:return Fa(e,t,n);case 4:return Js(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ks(t,null,r,n):ka(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:ia(r,i),n);case 7:return ka(e,t,t.pendingProps,n),t.child;case 8:case 12:return ka(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ni(Es,r._currentValue),r._currentValue=a,null!==o)if(cr(o.value,a)){if(o.children===i.children&&!Ri.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Vs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),As(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),As(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ka(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Rs(t,n),r=r(i=Ds(i)),t.flags|=1,ka(e,t,r,n),t.child;case 14:return i=ia(r=t.type,t.pendingProps),Ea(e,t,r,i=ia(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ia(r,i),qa(e,t),t.tag=1,Oi(r)?(e=!0,Ui(t)):e=!1,Rs(t,n),la(t,r,i),ua(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return Wa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eu(){}function tu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kc(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kc(o);s.call(e)}}var o=Wc(t,r,e,0,null,!1,0,"",eu);return e._reactRootContainer=o,e[gi]=o.current,Wr(8===e.nodeType?e.parentNode:e),dc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",eu);return e._reactRootContainer=l,e[gi]=l.current,Wr(8===e.nodeType?e.parentNode:e),dc(function(){qc(t,l,n,r)}),l}(n,t,e,i,r);return Kc(o)}Jc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Jc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){qc(null,e,null,null)}),t[gi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),sc(t,Je()),0===(6&Al)&&(Wl=Je()+500,Wi()))}break;case 13:dc(function(){var t=Ls(e,1);if(null!==t){var n=nc();ic(t,e,1,n)}}),Qc(e,1)}},kt=function(e){if(13===e.tag){var t=Ls(e,134217728);if(null!==t)ic(t,e,134217728,nc());Qc(e,134217728)}},_t=function(e){if(13===e.tag){var t=rc(e),n=Ls(e,t);if(null!==n)ic(n,e,t,nc());Qc(e,t)}},Et=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));G(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=hc,Ie=dc;var nu={usingClientEntryPoint:!1,Events:[xi,ki,_i,Te,Ce,hc]},ru={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{it=su.inject(iu),st=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,r="",i=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[gi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return tu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,i,0,o,a),e[gi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return tu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){tu(null,null,e,!1,function(){e._reactRootContainer=null,e[gi]=null})}),!0)},t.unstable_batchedUpdates=hc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return tu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var h={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const d=["color","size","strokeWidth","absoluteStrokeWidth","children"];var f=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{color:s="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:l,children:f}=n,p=u(n,d);return(0,r.createElement)("svg",c(c({ref:i},h),{},{width:o,height:o,stroke:s,strokeWidth:l?24*Number(a)/Number(o):a,className:"lucide lucide-".concat((m=e,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},p),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(f)?f:[f])||[]]);var m});return n.displayName="".concat(e),n};const p=f("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),m=f("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),g=f("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),y=f("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),v=f("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),b=f("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),w=f("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),x=f("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),k=f("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),_=f("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),E=f("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),S=f("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),T=f("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),C=f("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),N=f("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),I=f("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),A=f("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),R=f("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),D=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},P={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(D(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new O;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class O extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const j=function(e){return function(e){const t=D(e);return P.encodeByteArray(t,!0)}(e).replace(/\./g,"")},L=function(e){try{return P.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function M(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const U=()=>{try{return M().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDO5KOHefWnDTKm_3E8-CHJcOiY1lLc5Qs",REACT_APP_FIREBASE_APP_ID:"1:1047795579429:web:2dc2e5afc54a807f6a1dcc",REACT_APP_FIREBASE_AUTH_DOMAIN:"a-good-man-c64ae.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1047795579429",REACT_APP_FIREBASE_PROJECT_ID:"a-good-man-c64ae",REACT_APP_FIREBASE_STORAGE_BUCKET:"a-good-man-c64ae.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&L(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},F=e=>{var t;return null===(t=U())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},V=()=>{var e;return null===(e=U())||void 0===e?void 0:e.config},z=e=>{var t;return null===(t=U())||void 0===t?void 0:t["_".concat(e)]};class B{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function H(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function W(e){return(await fetch(e,{credentials:"include"})).ok}const q={};let K=!1;function G(e,t){if("undefined"===typeof window||"undefined"===typeof document||!H(window.location.host)||q[e]===t||q[e]||K)return;function n(e){return"__firebase__banner__".concat(e)}q[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(q))q[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{K=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function Q(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Y(){var e;const t=null===(e=U())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function X(){return!Y()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J(){try{return"object"===typeof indexedDB}catch(e){return!1}}class $ extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,$.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Z.prototype.create)}}class Z{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ee,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new $(n,s,t)}}const ee=/\{\$([^}]+)}/g;function te(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(ne(n)&&ne(s)){if(!te(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ne(e){return null!==e&&"object"===typeof e}function re(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ie(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function se(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class oe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ae),void 0===r.error&&(r.error=ae),void 0===r.complete&&(r.complete=ae);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ae(){}function le(e){return e&&e._delegate?e._delegate:e}class ce{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ue="[DEFAULT]";class he{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new B;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ue?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;return this.component?this.component.multipleInstances?e:ue:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new he(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const fe=[];var pe;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pe||(pe={}));const me={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},ge=pe.INFO,ye={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},ve=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ye[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class be{constructor(e){this.name=e,this._logLevel=ge,this._logHandler=ve,this._userLogHandler=null,fe.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?me[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...t),this._logHandler(this,pe.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...t),this._logHandler(this,pe.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pe.INFO,...t),this._logHandler(this,pe.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pe.WARN,...t),this._logHandler(this,pe.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...t),this._logHandler(this,pe.ERROR,...t)}}let we,xe;const ke=new WeakMap,_e=new WeakMap,Ee=new WeakMap,Se=new WeakMap,Te=new WeakMap;let Ce={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return _e.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ee.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ae(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ne(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xe||(xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Re(this),n),Ae(ke.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ae(e.apply(Re(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Re(this),t,...r);return Ee.set(s,t.sort?t.sort():[t]),Ae(s)}}function Ie(e){return"function"===typeof e?Ne(e):(e instanceof IDBTransaction&&function(e){if(_e.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});_e.set(e,t)}(e),t=e,(we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ce):e);var t}function Ae(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ae(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&ke.set(t,e)}).catch(()=>{}),Te.set(t,e),t}(e);if(Se.has(e))return Se.get(e);const t=Ie(e);return t!==e&&(Se.set(e,t),Te.set(t,e)),t}const Re=e=>Te.get(e);const De=["get","getKey","getAll","getAllKeys","count"],Pe=["put","add","delete","clear"],Oe=new Map;function je(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Oe.get(t))return Oe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Pe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!De.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Oe.set(t,s),s}Ce=(e=>c(c({},e),{},{get:(t,n,r)=>je(t,n)||e.get(t,n,r),has:(t,n)=>!!je(t,n)||e.has(t,n)}))(Ce);class Le{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Me="@firebase/app",Ue="0.14.3",Fe=new be("@firebase/app"),Ve="@firebase/app-compat",ze="@firebase/analytics-compat",Be="@firebase/analytics",He="@firebase/app-check-compat",We="@firebase/app-check",qe="@firebase/auth",Ke="@firebase/auth-compat",Ge="@firebase/database",Qe="@firebase/data-connect",Ye="@firebase/database-compat",Xe="@firebase/functions",Je="@firebase/functions-compat",$e="@firebase/installations",Ze="@firebase/installations-compat",et="@firebase/messaging",tt="@firebase/messaging-compat",nt="@firebase/performance",rt="@firebase/performance-compat",it="@firebase/remote-config",st="@firebase/remote-config-compat",ot="@firebase/storage",at="@firebase/storage-compat",lt="@firebase/firestore",ct="@firebase/ai",ut="@firebase/firestore-compat",ht="firebase",dt="[DEFAULT]",ft={[Me]:"fire-core",[Ve]:"fire-core-compat",[Be]:"fire-analytics",[ze]:"fire-analytics-compat",[We]:"fire-app-check",[He]:"fire-app-check-compat",[qe]:"fire-auth",[Ke]:"fire-auth-compat",[Ge]:"fire-rtdb",[Qe]:"fire-data-connect",[Ye]:"fire-rtdb-compat",[Xe]:"fire-fn",[Je]:"fire-fn-compat",[$e]:"fire-iid",[Ze]:"fire-iid-compat",[et]:"fire-fcm",[tt]:"fire-fcm-compat",[nt]:"fire-perf",[rt]:"fire-perf-compat",[it]:"fire-rc",[st]:"fire-rc-compat",[ot]:"fire-gcs",[at]:"fire-gcs-compat",[lt]:"fire-fst",[ut]:"fire-fst-compat",[ct]:"fire-vertex","fire-js":"fire-js",[ht]:"fire-js-all"},pt=new Map,mt=new Map,gt=new Map;function yt(e,t){try{e.container.addComponent(t)}catch(n){Fe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function vt(e){const t=e.name;if(gt.has(t))return Fe.debug("There were multiple attempts to register component ".concat(t,".")),!1;gt.set(t,e);for(const n of pt.values())yt(n,e);for(const n of mt.values())yt(n,e);return!0}function bt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function wt(e){return null!==e&&void 0!==e&&void 0!==e.settings}const xt=new Z("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class kt{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ce("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xt.create("app-deleted",{appName:this._name})}}const _t="12.3.0";function Et(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:dt,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw xt.create("bad-app-name",{appName:String(i)});if(n||(n=V()),!n)throw xt.create("no-options");const s=pt.get(i);if(s){if(te(n,s.options)&&te(r,s.config))return s;throw xt.create("duplicate-app",{appName:i})}const o=new de(i);for(const l of gt.values())o.addComponent(l);const a=new kt(n,r,o);return pt.set(i,a),a}function St(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt;const t=pt.get(e);if(!t&&e===dt&&V())return Et();if(!t)throw xt.create("no-app",{appName:e});return t}function Tt(e,t,n){var r;let i=null!==(r=ft[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Fe.warn(e.join(" "))}vt(new ce("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Ct="firebase-heartbeat-store";let Nt=null;function It(){return Nt||(Nt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Ae(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Ae(o.result),e.oldVersion,e.newVersion,Ae(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ct)}catch(n){console.warn(n)}}}).catch(e=>{throw xt.create("idb-open",{originalErrorMessage:e.message})})),Nt}async function At(e,t){try{const n=(await It()).transaction(Ct,"readwrite"),r=n.objectStore(Ct);await r.put(t,Rt(e)),await n.done}catch(n){if(n instanceof $)Fe.warn(n.message);else{const e=xt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Fe.warn(e.message)}}}function Rt(e){return"".concat(e.name,"!").concat(e.options.appId)}class Dt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ot(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Pt();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Fe.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Pt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),jt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=j(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Fe.warn(t),""}}}function Pt(){return(new Date).toISOString().substring(0,10)}class Ot{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!J()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await It()).transaction(Ct),n=await t.objectStore(Ct).get(Rt(e));return await t.done,n}catch(t){if(t instanceof $)Fe.warn(t.message);else{const e=xt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Fe.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return At(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return At(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function jt(e){return j(JSON.stringify({version:2,heartbeats:e})).length}var Lt;Lt="",vt(new ce("platform-logger",e=>new Le(e),"PRIVATE")),vt(new ce("heartbeat",e=>new Dt(e),"PRIVATE")),Tt(Me,Ue,Lt),Tt(Me,Ue,"esm2020"),Tt("fire-js","");var Mt,Ut,Ft="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Vt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,o=e.g[3];s=t+(o^n&(i^o))+r[0]+3614090360&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[3]+3250441966&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[4]+4118548399&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[7]+4249261313&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[8]+1770035416&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[11]+2304563134&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[12]+1804603682&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[15]+1236535329&4294967295,s=t+(i^o&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[11]+643717713&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[0]+3921069994&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[15]+3634488961&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[4]+3889429448&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[3]+4107603335&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[8]+1163531501&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[7]+1735328473&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^o)+r[5]+4294588738&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[11]+1839030562&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[1]+2763975236&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[7]+4139469664&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[13]+681279174&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[3]+3572445317&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[9]+3654602809&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[15]+530742520&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~o))+r[0]+4096336452&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[14]+2878612391&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[12]+1700485571&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[10]+4293915773&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[8]+1873313359&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[6]+2734768916&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[4]+4149444226&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[2]+718787259&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return d(o(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||c.l(e)>0;)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=o(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(c)<0&&e.l(c)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),o=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=s*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*o,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*o,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Ut=Vt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=o(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),i=i.j(s).add(o(e))):(i=i.j(r),i=i.add(o(e)))}return i},Mt=Vt.Integer=r}).apply("undefined"!==typeof Ft?Ft:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var zt,Bt,Ht,Wt,qt,Kt,Gt,Qt,Yt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Xt={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Yt&&Yt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(k)}};function k(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function _(){this.u=this.u,this.C=this.C}function E(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}_.prototype.u=!1,_.prototype.dispose=function(){this.u||(this.u=!0,this.N())},_.prototype[Symbol.dispose]=function(){this.dispose()},_.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},E.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function T(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){E.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,E),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var N="closure_listenable_"+(1e6*Math.random()|0),I=0;function A(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++I,this.da=this.fa=!1}function R(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function D(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function P(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(R(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function U(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const o=U(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new A(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var F="closure_lm_"+(1e6*Math.random()|0),V={};function z(e,t,n,r,i){if(r&&r.once)return H(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)z(e,t[s],n,r,i);return null}return n=X(n),e&&e[N]?e.J(t,n,o(r)?!!r.capture:!!r,i):B(e,t,n,!1,r,i)}function B(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const a=o(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[F]=l=new L(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)S||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function H(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=X(n),e&&e[N]?e.K(t,n,o(r)?!!r.capture:!!r,i):B(e,t,n,!0,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=X(n),e&&e[N]?(e=e.i,(s=String(t).toString())in e.g&&((n=U(t=e.g[s],n,r,i))>-1&&(R(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=U(t,n,r,i)),(n=e>-1?t[e]:null)&&q(n))}function q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[N])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(M(n,e),0==n.h&&(n.src=null,t[F]=null)):R(e)}}}function K(e){return e in V?V[e]:V[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&q(e),e=n.call(r,t)}return e}function Q(e){return(e=e[F])instanceof L?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function J(){_.call(this),this.i=new L(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new E(t,e);else if(t instanceof E)t.target=t.target||e;else{var i=t;j(t=new E(r,e),i)}let s,o;if(i=!0,n)for(o=n.length-1;o>=0;o--)s=t.g=n[o],i=Z(s,r,!0,t)&&i;if(s=t.g=e,i=Z(s,r,!0,t)&&i,i=Z(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=Z(s,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const o=t[s];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&M(e.i,o),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(J,_),J.prototype[N]=!0,J.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)R(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends _{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){_.call(this),this.h=e,this.g={}}u(ne,_);var re=[];function ie(e){D(e.g,function(e,t){this.g.hasOwnProperty(t)&&q(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,oe=s.JSON.parse,ae=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){E.call(this,"d")}function de(){E.call(this,"c")}u(he,E),u(de,E);var fe={},pe=null;function me(){return pe=pe||new J}function ge(e){E.call(this,fe.Ia,e)}function ye(e){const t=me();$(t,new ge(t))}function ve(e,t){E.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();$(t,new ve(t,e))}function we(e,t){E.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function ke(){this.g=!0}function _e(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,E),fe.STAT_EVENT="statevent",u(ve,E),fe.Ja="timingevent",u(we,E),ke.prototype.ua=function(){this.g=!1},ke.prototype.info=function(){};var Ee,Se={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Te={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Ne(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}u(Ce,le),Ce.prototype.g=function(){return new XMLHttpRequest},Ee=new Ce;var De={},Pe={};function Oe(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,je(e,null)}function je(e,t){e.F=Date.now(),Ue(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Re,e.g=yn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=z(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?P(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var o="",a=s.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+l+"&":o+(e+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Pe:(n=Number(t.substring(n,r)),isNaN(n)?De:(r+=1)+n>t.length?Pe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ue(e){e.T=Date.now()+e.H,Fe(e,e.H)}function Fe(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ve(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||dn(e.j,e)}function Be(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function He(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),en(n)}ln(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else pn(n,11)}else if((e.L||n.g==e)&&hn(n),!T(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ye(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=gn(r,r.L?r.ba:null,r.W),o.L){Xe(r.h,o);var a=o,c=r.O;c&&(a.H=c),a.D&&(Ve(a),Ue(a)),r.g=o}else an(r);n.i.length>0&&nn(n)}else"stop"!=l[0]&&"close"!=l[0]||pn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?pn(n,7):Zt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ut(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ut(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ft(this.g)))){this.K||4!=l||7==c||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Ft(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ut(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),ze(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(r)){var o=r;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,be(12),Be(this),ze(this);break e}_e(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==Pe){4==l&&(this.m=4,be(14),e=!1),_e(this.i,this.l,null,"[Incomplete Response]");break}if(t==De){this.m=4,be(15),_e(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}_e(this.i,this.l,t,null),He(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),cn(a),a.P=!0,be(11))}}else _e(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),ze(this)}else _e(this.i,this.l,n,null),He(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?dn(this.j,this):(this.o=!1,Ue(this)))}else(function(e){const t={};e=(e.g&&Ut(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=Ie(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),ze(this)}}}catch(Rn){}},Ae.prototype.cancel=function(){this.K=!0,Be(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Be(this),this.m=2,ze(this)):Fe(this,this.T-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function qe(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}qe.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=ot(t[2]||""),this.g=ot(t[3]||"",!0),nt(this,t[4]),this.h=ot(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=ot(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?ot(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,dt)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ot(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ct,!0),"@"),e.push(Ne(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?ht:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,ht=/[#\?]/g,dt=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),d(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function _t(){this.g=new ae}function Et(e){this.i=e.Sb||null,this.h=e.ab||!1}function St(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Tt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ct(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Nt(e)}function Nt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return D(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function At(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=It(n),"string"===typeof e?null!=n&&Ne(n):it(e,t,n))}function Rt(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ne(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ne(n[t])),e.push(r)}}return this.i=e.join("&")},u(Et,le),Et.prototype.g=function(){return new St(this.i,this.h)},u(St,J),(e=St.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Nt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ct(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nt(this)),this.g&&(this.readyState=3,Nt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ct(this):Nt(this),3==this.readyState&&Tt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ct(this))},e.Na=function(e){this.g&&(this.response=e,Ct(this))},e.ga=function(){this.g&&Ct(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(St.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Rt,J);var Dt=/^https?$/i,Pt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,jt(e),Mt(e)}function jt(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ut(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Ut(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match($e)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Dt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var o=Ut(e)>2?e.g.statusText:""}catch(a){o=""}e.l=o+" ["+e.ca()+"]",jt(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ut(e){return e.g?e.g.readyState:0}function Ft(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Vt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Jt(e){this.za=0,this.i=[],this.j=new ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vt("baseRetryDelayMs",5e3,e),this.Za=Vt("retryDelaySeedMs",1e4,e),this.Ta=Vt("forwardChannelMaxRetries",2,e),this.va=Vt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new qe(e&&e.concurrentRequestLimit),this.Ba=new _t,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Zt(e){if(tn(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),sn(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=yn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Ue(t)}mn(e)}function en(e){e.g&&(cn(e),e.g.cancel(),e.g=null)}function tn(e){en(e),e.v&&(s.clearTimeout(e.v),e.v=null),hn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function nn(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),b||(v(),b=!0),w.add(t,e),e.D=0}}function rn(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),sn(e,r),e.u&&e.o&&At(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=on(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Oe(n,r,t)}function sn(e,t){e.H&&D(e.H,function(e,n){it(t,n,e)}),e.l&&D({},function(e,n){it(t,n,e)})}function on(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;o(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch($t){throw e.push(s+"type="+encodeURIComponent("_badmap")),$t}}catch($t){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function an(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),b||(v(),b=!0),w.add(t,e),e.A=0}}function ln(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),fn(e,e.A)),e.A++,!0)}function cn(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function un(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),sn(e,t),e.u&&e.o&&At(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,je(n,e)}function hn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function dn(e,t){var n=null;if(e.g==t){hn(e),cn(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;$(r=me(),new we(r,n)),nn(e)}else an(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),fn(e,e.D)),e.D++,!0))}(e,t)||2==r&&ln(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:pn(e,5);break;case 4:pn(e,10);break;case 3:pn(e,6);break;default:pn(e,2)}}function fn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function pn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new ke;if(s.Image){const r=new Image;r.onload=c(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(kt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(r),kt(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),mn(e),tn(e)}function mn(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function gn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),sn(e,r),r}function yn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Rt(new Et({ab:n})):new Rt(e.ma)).Fa(e.L),t}function vn(){}function bn(){}function wn(e,t){J.call(this),this.g=new Jt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!T(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _n(this)}function xn(e){he.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function kn(){de.call(this),this.status=1}function _n(e){this.g=e}(e=Rt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ee.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ot(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Pt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(o){Ot(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),Rt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ut(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oe(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Jt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=gn(this,null,this.W),nn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ae(this,this.j,e);let s=this.o;if(this.U&&(s?(s=P(s),j(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=on(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),sn(this,n),s&&(this.R?t="headers="+Ne(It(s))+"&"+t:this.u&&At(n,this.u,s)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Oe(i,n,null)):Oe(i,n,t),this.I=2}}else 3==this.I&&(e?rn(this,e):0==this.i.length||Ke(this.h)||rn(this))},e.Da=function(){if(this.v=null,un(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),en(this),un(this))},e.Va=function(){null!=this.C&&(this.C=null,en(this),ln(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=vn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},bn.prototype.g=function(e,t){return new wn(e,t)},u(wn,J),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){Zt(this.g)},wn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.I&&nn(t)},wn.prototype.N=function(){this.g.l=null,delete this.j,Zt(this.g),delete this.g,wn.Z.N.call(this)},u(xn,he),u(kn,de),u(_n,vn),_n.prototype.ra=function(){$(this.g,"a")},_n.prototype.qa=function(e){$(this.g,new xn(e))},_n.prototype.pa=function(e){$(this.g,new kn)},_n.prototype.oa=function(){$(this.g,"b")},bn.prototype.createWebChannel=bn.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,Qt=Xt.createWebChannelTransport=function(){return new bn},Gt=Xt.getStatEventTarget=function(){return me()},Kt=Xt.Event=fe,qt=Xt.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,Wt=Xt.ErrorCode=Se,Te.COMPLETE="complete",Ht=Xt.EventType=Te,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",J.prototype.listen=J.prototype.J,Bt=Xt.WebChannel=ce,Xt.FetchXmlHttpFactory=Et,Rt.prototype.listenOnce=Rt.prototype.K,Rt.prototype.getLastError=Rt.prototype.Ha,Rt.prototype.getLastErrorCode=Rt.prototype.ya,Rt.prototype.getStatus=Rt.prototype.ca,Rt.prototype.getResponseJson=Rt.prototype.La,Rt.prototype.getResponseText=Rt.prototype.la,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Fa,zt=Xt.XhrIo=Rt}).apply("undefined"!==typeof Yt?Yt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Jt="@firebase/firestore",$t="4.9.2";class Zt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");let en="12.3.0";const tn=new be("@firebase/firestore");function nn(){return tn.logLevel}function rn(e){if(tn.logLevel<=pe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(an);tn.debug("Firestore (".concat(en,"): ").concat(e),...i)}}function sn(e){if(tn.logLevel<=pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(an);tn.error("Firestore (".concat(en,"): ").concat(e),...i)}}function on(e){if(tn.logLevel<=pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(an);tn.warn("Firestore (".concat(en,"): ").concat(e),...i)}}function an(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ln(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,cn(e,r,n)}function cn(e,t,n){let r="FIRESTORE (".concat(en,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw sn(r),new Error(r)}function un(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||cn(t,i,r)}function hn(e,t){return e}const dn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fn extends ${constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class pn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mn{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class gn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zt.UNAUTHENTICATED))}shutdown(){}}class yn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vn{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){un(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new pn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new pn,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{rn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(rn("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new pn)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(rn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(un("string"==typeof t.accessToken,31837,{l:t}),new mn(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return un(null===e||"string"==typeof e,2055,{h:e}),new Zt(e)}}class bn{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wn{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new bn(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kn{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){un(void 0===this.o,3512);const n=e=>{null!=e.error&&rn("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,rn("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{rn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):rn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new xn(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(un("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new xn(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _n(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class En{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=_n(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Sn(e,t){return e<t?-1:e>t?1:0}function Tn(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return In(n)===In(i)?Sn(n,i):In(n)?1:-1}return Sn(e.length,t.length)}const Cn=55296,Nn=57343;function In(e){const t=e.charCodeAt(0);return t>=Cn&&t<=Nn}function An(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Rn="__name__";class Dn{constructor(e,t,n){void 0===t?t=0:t>e.length&&ln(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ln(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Dn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Dn.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Sn(e.length,t.length)}static compareSegments(e,t){const n=Dn.isNumericId(e),r=Dn.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Dn.extractNumericId(e).compare(Dn.extractNumericId(t)):Tn(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mt.fromString(e.substring(4,e.length-2))}}class Pn extends Dn{construct(e,t,n){return new Pn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new fn(dn.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Pn(e)}static emptyPath(){return new Pn([])}}const On=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends Dn{construct(e,t,n){return new jn(e,t,n)}static isValidIdentifier(e){return On.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Rn}static keyField(){return new jn([Rn])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new fn(dn.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new fn(dn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new fn(dn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new fn(dn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(t)}static emptyPath(){return new jn([])}}class Ln{constructor(e){this.path=e}static fromPath(e){return new Ln(Pn.fromString(e))}static fromName(e){return new Ln(Pn.fromString(e).popFirst(5))}static empty(){return new Ln(Pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ln(new Pn(e.slice()))}}function Mn(e,t,n){if(!n)throw new fn(dn.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Un(e){if(!Ln.isDocumentKey(e))throw new fn(dn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Fn(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Vn(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ln(12329,{type:typeof e})}function zn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fn(dn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vn(e);throw new fn(dn.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Bn(e,t){const n={typeString:e};return t&&(n.value=t),n}function Hn(e,t){if(!Fn(e))throw new fn(dn.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new fn(dn.INVALID_ARGUMENT,n);return!0}const Wn=-62135596800,qn=1e6;class Kn{static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*qn);return new Kn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fn(dn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fn(dn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Wn)throw new fn(dn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fn(dn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qn}_compareTo(e){return this.seconds===e.seconds?Sn(this.nanoseconds,e.nanoseconds):Sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Kn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hn(e,Kn._jsonSchema))return new Kn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Wn;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Kn._jsonSchemaVersion="firestore/timestamp/1.0",Kn._jsonSchema={type:Bn("string",Kn._jsonSchemaVersion),seconds:Bn("number"),nanoseconds:Bn("number")};class Gn{static fromTimestamp(e){return new Gn(e)}static min(){return new Gn(new Kn(0,0))}static max(){return new Gn(new Kn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Qn=-1;class Yn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Yn.UNKNOWN_ID=-1;function Xn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Gn.fromTimestamp(1e9===r?new Kn(n+1,0):new Kn(n,r));return new $n(i,Ln.empty(),t)}function Jn(e){return new $n(e.readTime,e.key,Qn)}class $n{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new $n(Gn.min(),Ln.empty(),Qn)}static max(){return new $n(Gn.max(),Ln.empty(),Qn)}}function Zn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ln.comparator(e.documentKey,t.documentKey),0!==n?n:Sn(e.largestBatchId,t.largestBatchId))}const er="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function nr(e){if(e.code!==dn.FAILED_PRECONDITION||e.message!==er)throw e;rn("LocalStore","Unexpectedly lost primary lease")}class rr{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ln(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rr((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof rr?t:rr.resolve(t)}catch(e){return rr.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):rr.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):rr.reject(t)}static resolve(e){return new rr((t,n)=>{t(e)})}static reject(e){return new rr((t,n)=>{n(e)})}static waitFor(e){return new rr((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=rr.resolve(!1);for(const n of e)t=t.next(e=>e?rr.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new rr((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new rr((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function ir(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sr(e){return"IndexedDbTransactionError"===e.name}class or{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}or.ce=-1;const ar=-1;function lr(e){return null==e}function cr(e){return 0===e&&1/e==-1/0}function ur(e){return"number"==typeof e&&Number.isInteger(e)&&!cr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const hr="\x01";function dr(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=pr(t)),t=fr(e.get(n),t);return pr(t)}function fr(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case hr:n+="\x01\x11";break;default:n+=t}}return n}function pr(e){return e+hr+"\x01"}const mr="remoteDocuments",gr="owner",yr="mutationQueues",vr="mutations";const br="documentMutations",wr="remoteDocumentsV14",xr="remoteDocumentGlobal",kr="targets",_r="targetDocuments",Er="targetGlobal",Sr="collectionParents",Tr="clientMetadata",Cr="bundles",Nr="namedQueries",Ir="indexConfiguration",Ar="indexState",Rr="indexEntries",Dr="documentOverlays",Pr="globals",Or=[yr,vr,br,mr,kr,gr,Er,_r,Tr,xr,Sr,Cr,Nr],jr=[yr,vr,br,wr,kr,gr,Er,_r,Tr,xr,Sr,Cr,Nr,Dr],Lr=jr,Mr=[...Lr,Ir,Ar,Rr];function Ur(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class zr{constructor(e,t){this.comparator=e,this.root=t||Hr.EMPTY}insert(e,t){return new zr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hr.BLACK,null,null))}remove(e){return new zr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Br(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Br(this.root,e,this.comparator,!1)}getReverseIterator(){return new Br(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Br(this.root,e,this.comparator,!0)}}class Br{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Hr.RED,this.left=null!=r?r:Hr.EMPTY,this.right=null!=i?i:Hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Hr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Hr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ln(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ln(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ln(27949);return e+(this.isRed()?0:1)}}Hr.EMPTY=null,Hr.RED=!0,Hr.BLACK=!1,Hr.EMPTY=new class{constructor(){this.size=0}get key(){throw ln(57766)}get value(){throw ln(16141)}get color(){throw ln(16727)}get left(){throw ln(29726)}get right(){throw ln(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Hr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wr{constructor(e){this.comparator=e,this.data=new zr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qr(this.data.getIterator())}getIteratorFrom(e){return new qr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Wr))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wr(this.comparator);return t.data=e,t}}class qr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Kr{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new Kr([])}unionWith(e){let t=new Wr(jn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Kr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return An(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Gr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Gr("Invalid base64 string: "+e):e}}(e);return new Qr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Qr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const Yr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xr(e){if(un(!!e,39018),"string"==typeof e){let t=0;const n=Yr.exec(e);if(un(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Jr(e.seconds),nanos:Jr(e.nanos)}}function Jr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $r(e){return"string"==typeof e?Qr.fromBase64String(e):Qr.fromUint8Array(e)}const Zr="server_timestamp",ei="__type__",ti="__previous_value__",ni="__local_write_time__";function ri(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ei])||void 0===t?void 0:t.stringValue)===Zr}function ii(e){const t=e.mapValue.fields[ti];return ri(t)?ii(t):t}function si(e){const t=Xr(e.mapValue.fields[ni].timestampValue);return new Kn(t.seconds,t.nanos)}class oi{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const ai="(default)";class li{constructor(e,t){this.projectId=e,this.database=t||ai}static empty(){return new li("","")}get isDefaultDatabase(){return this.database===ai}isEqual(e){return e instanceof li&&e.projectId===this.projectId&&e.database===this.database}}const ci="__type__",ui="__max__",hi={mapValue:{fields:{__type__:{stringValue:ui}}}},di="__vector__",fi="value";function pi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ri(e)?4:Ai(e)?9007199254740991:Ni(e)?10:11:ln(28295,{value:e})}function mi(e,t){if(e===t)return!0;const n=pi(e);if(n!==pi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return si(e).isEqual(si(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Xr(e.timestampValue),r=Xr(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $r(e.bytesValue).isEqual($r(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jr(e.geoPointValue.latitude)===Jr(t.geoPointValue.latitude)&&Jr(e.geoPointValue.longitude)===Jr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jr(e.integerValue)===Jr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Jr(e.doubleValue),r=Jr(t.doubleValue);return n===r?cr(n)===cr(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return An(e.arrayValue.values||[],t.arrayValue.values||[],mi);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ur(n)!==Ur(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!mi(n[i],r[i])))return!1;return!0}(e,t);default:return ln(52216,{left:e})}}function gi(e,t){return void 0!==(e.values||[]).find(e=>mi(e,t))}function yi(e,t){if(e===t)return 0;const n=pi(e),r=pi(t);if(n!==r)return Sn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Jr(e.integerValue||e.doubleValue),r=Jr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return vi(e.timestampValue,t.timestampValue);case 4:return vi(si(e),si(t));case 5:return Tn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=$r(e),r=$r(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Sn(n[i],r[i]);if(0!==e)return e}return Sn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Sn(Jr(e.latitude),Jr(t.latitude));return 0!==n?n:Sn(Jr(e.longitude),Jr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return bi(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const o=e.fields||{},a=t.fields||{},l=null===(n=o[fi])||void 0===n?void 0:n.arrayValue,c=null===(r=a[fi])||void 0===r?void 0:r.arrayValue,u=Sn((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:bi(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===hi.mapValue&&t===hi.mapValue)return 0;if(e===hi.mapValue)return 1;if(t===hi.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Tn(r[o],s[o]);if(0!==e)return e;const t=yi(n[r[o]],i[s[o]]);if(0!==t)return t}return Sn(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ln(23264,{he:n})}}function vi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Sn(e,t);const n=Xr(e),r=Xr(t),i=Sn(n.seconds,r.seconds);return 0!==i?i:Sn(n.nanos,r.nanos)}function bi(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=yi(n[i],r[i]);if(e)return e}return Sn(n.length,r.length)}function wi(e){return xi(e)}function xi(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Xr(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return $r(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ln.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=xi(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(xi(e.fields[i]));return n+"}"}(e.mapValue):ln(61005,{value:e})}function ki(e){switch(pi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ii(e);return t?16+ki(t):16;case 5:return 2*e.stringValue.length;case 6:return $r(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+ki(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Fr(e.fields,(e,n)=>{t+=e.length+ki(n)}),t}(e.mapValue);default:throw ln(13486,{value:e})}}function _i(e){return!!e&&"integerValue"in e}function Ei(e){return!!e&&"arrayValue"in e}function Si(e){return!!e&&"nullValue"in e}function Ti(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ci(e){return!!e&&"mapValue"in e}function Ni(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ci])||void 0===t?void 0:t.stringValue)===di}function Ii(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Fr(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ii(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ii(e.arrayValue.values[n]);return t}return c({},e)}function Ai(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ui}class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ci(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ii(t)}setAll(e){let t=jn.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ii(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ci(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ci(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Fr(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ri(Ii(this.value))}}function Di(e){const t=[];return Fr(e.fields,(e,n)=>{const r=new jn([e]);if(Ci(n)){const e=Di(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Kr(t)}class Pi{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Pi(e,0,Gn.min(),Gn.min(),Gn.min(),Ri.empty(),0)}static newFoundDocument(e,t,n,r){return new Pi(e,1,t,Gn.min(),n,r,0)}static newNoDocument(e,t){return new Pi(e,2,t,Gn.min(),Gn.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new Pi(e,3,t,Gn.min(),Gn.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Oi{constructor(e,t){this.position=e,this.inclusive=t}}function ji(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ln.comparator(Ln.fromName(o.referenceValue),n.key):yi(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Li(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!mi(e.position[n],t.position[n]))return!1;return!0}class Mi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ui(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Fi{}class Vi extends Fi{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Qi(e,t,n):"array-contains"===t?new $i(e,n):"in"===t?new Zi(e,n):"not-in"===t?new es(e,n):"array-contains-any"===t?new ts(e,n):new Vi(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Yi(e,n):new Xi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(yi(t,this.value)):null!==t&&pi(this.value)===pi(t)&&this.matchesComparison(yi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ln(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zi extends Fi{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zi(e,t)}matches(e){return Bi(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Bi(e){return"and"===e.op}function Hi(e){return Wi(e)&&Bi(e)}function Wi(e){for(const t of e.filters)if(t instanceof zi)return!1;return!0}function qi(e){if(e instanceof Vi)return e.field.canonicalString()+e.op.toString()+wi(e.value);if(Hi(e))return e.filters.map(e=>qi(e)).join(",");{const t=e.filters.map(e=>qi(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ki(e,t){return e instanceof Vi?function(e,t){return t instanceof Vi&&e.op===t.op&&e.field.isEqual(t.field)&&mi(e.value,t.value)}(e,t):e instanceof zi?function(e,t){return t instanceof zi&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ki(n,t.filters[r]),!0)}(e,t):void ln(19439)}function Gi(e){return e instanceof Vi?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(wi(e.value))}(e):e instanceof zi?function(e){return e.op.toString()+" {"+e.getFilters().map(Gi).join(" ,")+"}"}(e):"Filter"}class Qi extends Vi{constructor(e,t,n){super(e,t,n),this.key=Ln.fromName(n.referenceValue)}matches(e){const t=Ln.comparator(e.key,this.key);return this.matchesComparison(t)}}class Yi extends Vi{constructor(e,t){super(e,"in",t),this.keys=Ji("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xi extends Vi{constructor(e,t){super(e,"not-in",t),this.keys=Ji("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ji(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ln.fromName(e.referenceValue))}class $i extends Vi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ei(t)&&gi(t.arrayValue,this.value)}}class Zi extends Vi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gi(this.value.arrayValue,t)}}class es extends Vi{constructor(e,t){super(e,"not-in",t)}matches(e){if(gi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!gi(this.value.arrayValue,t)}}class ts extends Vi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ei(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>gi(this.value.arrayValue,e))}}class ns{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function rs(e){return new ns(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function is(e){const t=hn(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>qi(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),lr(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>wi(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>wi(e)).join(",")),t.Te=e}return t.Te}function ss(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ui(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ki(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Li(e.startAt,t.startAt)&&Li(e.endAt,t.endAt)}function os(e){return Ln.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class as{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ls(e,t,n,r,i,s,o,a){return new as(e,t,n,r,i,s,o,a)}function cs(e){return new as(e)}function us(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function hs(e){return null!==e.collectionGroup}function ds(e){const t=hn(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Wr(jn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Mi(r,n))}),e.has(jn.keyField().canonicalString())||t.Ie.push(new Mi(jn.keyField(),n))}return t.Ie}function fs(e){const t=hn(e);return t.Ee||(t.Ee=ps(t,ds(e))),t.Ee}function ps(e,t){if("F"===e.limitType)return rs(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Mi(e.field,t)});const n=e.endAt?new Oi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Oi(e.startAt.position,e.startAt.inclusive):null;return rs(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ms(e,t,n){return new as(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gs(e,t){return ss(fs(e),fs(t))&&e.limitType===t.limitType}function ys(e){return"".concat(is(fs(e)),"|lt:").concat(e.limitType)}function vs(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Gi(e)).join(", "),"]")),lr(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>wi(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>wi(e)).join(",")),"Target(".concat(t,")")}(fs(e)),"; limitType=").concat(e.limitType,")")}function bs(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ln.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ds(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ji(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ds(e),t))&&!(e.endAt&&!function(e,t,n){const r=ji(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ds(e),t))}(e,t)}function ws(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xs(e){return(t,n)=>{let r=!1;for(const i of ds(e)){const e=ks(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ks(e,t,n){const r=e.field.isKeyField()?Ln.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?yi(r,i):ln(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ln(19790,{direction:e.dir})}}class _s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fr(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Vr(this.inner)}size(){return this.innerSize}}const Es=new zr(Ln.comparator);function Ss(){return Es}const Ts=new zr(Ln.comparator);function Cs(){let e=Ts;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Ns(e){let t=Ts;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Is(){return Rs()}function As(){return Rs()}function Rs(){return new _s(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ds=new zr(Ln.comparator),Ps=new Wr(Ln.comparator);function Os(){let e=Ps;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const js=new Wr(Sn);function Ls(){return js}function Ms(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cr(t)?"-0":t}}function Us(e){return{integerValue:""+e}}function Fs(e,t){return ur(t)?Us(t):Ms(e,t)}class Vs{constructor(){this._=void 0}}function zs(e,t,n){return e instanceof Ws?function(e,t){const n={fields:{[ei]:{stringValue:Zr},[ni]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ri(t)&&(t=ii(t)),t&&(n.fields[ti]=t),{mapValue:n}}(n,t):e instanceof qs?Ks(e,t):e instanceof Gs?Qs(e,t):function(e,t){const n=Hs(e,t),r=Xs(n)+Xs(e.Ae);return _i(n)&&_i(e.Ae)?Us(r):Ms(e.serializer,r)}(e,t)}function Bs(e,t,n){return e instanceof qs?Ks(e,t):e instanceof Gs?Qs(e,t):n}function Hs(e,t){return e instanceof Ys?function(e){return _i(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ws extends Vs{}class qs extends Vs{constructor(e){super(),this.elements=e}}function Ks(e,t){const n=Js(t);for(const r of e.elements)n.some(e=>mi(e,r))||n.push(r);return{arrayValue:{values:n}}}class Gs extends Vs{constructor(e){super(),this.elements=e}}function Qs(e,t){let n=Js(t);for(const r of e.elements)n=n.filter(e=>!mi(e,r));return{arrayValue:{values:n}}}class Ys extends Vs{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Xs(e){return Jr(e.integerValue||e.doubleValue)}function Js(e){return Ei(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class $s{constructor(e,t){this.field=e,this.transform=t}}class Zs{constructor(e,t){this.version=e,this.transformResults=t}}class eo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new eo}static exists(e){return new eo(void 0,e)}static updateTime(e){return new eo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function to(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class no{}function ro(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new po(e.key,eo.none()):new lo(e.key,e.data,eo.none());{const n=e.data,r=Ri.empty();let i=new Wr(jn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new co(e.key,r,new Kr(i.toArray()),eo.none())}}function io(e,t,n){e instanceof lo?function(e,t,n){const r=e.value.clone(),i=ho(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof co?function(e,t,n){if(!to(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ho(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(uo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function so(e,t,n,r){return e instanceof lo?function(e,t,n,r){if(!to(e.precondition,t))return n;const i=e.value.clone(),s=fo(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof co?function(e,t,n,r){if(!to(e.precondition,t))return n;const i=fo(e.fieldTransforms,r,t),s=t.data;return s.setAll(uo(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return to(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function oo(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Hs(r.transform,e||null);null!=i&&(null===n&&(n=Ri.empty()),n.set(r.field,i))}return n||null}function ao(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&An(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof qs&&t instanceof qs||e instanceof Gs&&t instanceof Gs?An(e.elements,t.elements,mi):e instanceof Ys&&t instanceof Ys?mi(e.Ae,t.Ae):e instanceof Ws&&t instanceof Ws}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class lo extends no{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class co extends no{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function uo(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function ho(e,t,n){const r=new Map;un(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Bs(o,a,n[i]))}return r}function fo(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,zs(e,s,t))}return r}class po extends no{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mo extends no{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class go{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&io(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=so(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=so(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=As();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=ro(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Gn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Os())}isEqual(e){return this.batchId===e.batchId&&An(this.mutations,e.mutations,(e,t)=>ao(e,t))&&An(this.baseMutations,e.baseMutations,(e,t)=>ao(e,t))}}class yo{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){un(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Ds;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new yo(e,t,n,r)}}class vo{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class bo{constructor(e,t){this.count=e,this.unchangedNames=t}}var wo,xo;function ko(e){switch(e){case dn.OK:return ln(64938);case dn.CANCELLED:case dn.UNKNOWN:case dn.DEADLINE_EXCEEDED:case dn.RESOURCE_EXHAUSTED:case dn.INTERNAL:case dn.UNAVAILABLE:case dn.UNAUTHENTICATED:return!1;case dn.INVALID_ARGUMENT:case dn.NOT_FOUND:case dn.ALREADY_EXISTS:case dn.PERMISSION_DENIED:case dn.FAILED_PRECONDITION:case dn.ABORTED:case dn.OUT_OF_RANGE:case dn.UNIMPLEMENTED:case dn.DATA_LOSS:return!0;default:return ln(15467,{code:e})}}function _o(e){if(void 0===e)return sn("GRPC error has no .code"),dn.UNKNOWN;switch(e){case wo.OK:return dn.OK;case wo.CANCELLED:return dn.CANCELLED;case wo.UNKNOWN:return dn.UNKNOWN;case wo.DEADLINE_EXCEEDED:return dn.DEADLINE_EXCEEDED;case wo.RESOURCE_EXHAUSTED:return dn.RESOURCE_EXHAUSTED;case wo.INTERNAL:return dn.INTERNAL;case wo.UNAVAILABLE:return dn.UNAVAILABLE;case wo.UNAUTHENTICATED:return dn.UNAUTHENTICATED;case wo.INVALID_ARGUMENT:return dn.INVALID_ARGUMENT;case wo.NOT_FOUND:return dn.NOT_FOUND;case wo.ALREADY_EXISTS:return dn.ALREADY_EXISTS;case wo.PERMISSION_DENIED:return dn.PERMISSION_DENIED;case wo.FAILED_PRECONDITION:return dn.FAILED_PRECONDITION;case wo.ABORTED:return dn.ABORTED;case wo.OUT_OF_RANGE:return dn.OUT_OF_RANGE;case wo.UNIMPLEMENTED:return dn.UNIMPLEMENTED;case wo.DATA_LOSS:return dn.DATA_LOSS;default:return ln(39323,{code:e})}}(xo=wo||(wo={}))[xo.OK=0]="OK",xo[xo.CANCELLED=1]="CANCELLED",xo[xo.UNKNOWN=2]="UNKNOWN",xo[xo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xo[xo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xo[xo.NOT_FOUND=5]="NOT_FOUND",xo[xo.ALREADY_EXISTS=6]="ALREADY_EXISTS",xo[xo.PERMISSION_DENIED=7]="PERMISSION_DENIED",xo[xo.UNAUTHENTICATED=16]="UNAUTHENTICATED",xo[xo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xo[xo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xo[xo.ABORTED=10]="ABORTED",xo[xo.OUT_OF_RANGE=11]="OUT_OF_RANGE",xo[xo.UNIMPLEMENTED=12]="UNIMPLEMENTED",xo[xo.INTERNAL=13]="INTERNAL",xo[xo.UNAVAILABLE=14]="UNAVAILABLE",xo[xo.DATA_LOSS=15]="DATA_LOSS";let Eo=null;function So(){return new TextEncoder}const To=new Mt([4294967295,4294967295],0);function Co(e){const t=So().encode(e),n=new Ut;return n.update(t),new Uint8Array(n.digest())}function No(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Mt([n,r],0),new Mt([i,s],0)]}class Io{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ao("Invalid padding: ".concat(t));if(n<0)throw new Ao("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Ao("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Ao("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Mt.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Mt.fromNumber(n)));return 1===r.compare(To)&&(r=new Mt([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Co(e),[n,r]=No(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Io(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Co(e),[n,r]=No(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ao extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ro{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Do.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ro(Gn.min(),r,new zr(Sn),Ss(),Os())}}class Do{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Do(n,t,Os(),Os(),Os())}}class Po{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Oo{constructor(e,t){this.targetId=e,this.Ce=t}}class jo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qr.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Lo{constructor(){this.ve=0,this.Fe=Fo(),this.Me=Qr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Os(),t=Os(),n=Os();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ln(38017,{changeType:i})}}),new Do(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Fo()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,un(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Mo{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ss(),this.Je=Uo(),this.He=Uo(),this.Ye=new zr(Sn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ln(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(os(s))if(0===n){const e=new Ln(s.path);this.et(t,e,Pi.newNoDocument(e,Gn.min()))}else un(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Eo)||void 0===i||i.lt(function(e,t,n,r,i,s,o,a,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===h||void 0===h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===h||void 0===h||null===(a=h.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(l=null===h||void 0===h||null===(c=h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=$r(n).toUint8Array()}catch(e){if(e instanceof Gr)return on("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Io(s,r,i)}catch(e){return on(e instanceof Ao?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&os(i.target)){const t=new Ln(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Pi.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Os();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Ro(e,t,this.Ye,this.je,n);return this.je=Ss(),this.Je=Uo(),this.He=Uo(),this.Ye=new zr(Sn),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Lo,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Wr(Sn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Wr(Sn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||rn("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Lo),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Uo(){return new zr(Ln.comparator)}function Fo(){return new zr(Ln.comparator)}const Vo={asc:"ASCENDING",desc:"DESCENDING"},zo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bo={and:"AND",or:"OR"};class Ho{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wo(e,t){return e.useProto3Json||lr(t)?t:{value:t}}function qo(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ko(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Go(e,t){return qo(e,t.toTimestamp())}function Qo(e){return un(!!e,49232),Gn.fromTimestamp(function(e){const t=Xr(e);return new Kn(t.seconds,t.nanos)}(e))}function Yo(e,t){return Xo(e,t).canonicalString()}function Xo(e,t){const n=function(e){return new Pn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Jo(e){const t=Pn.fromString(e);return un(ya(t),10190,{key:t.toString()}),t}function $o(e,t){return Yo(e.databaseId,t.path)}function Zo(e,t){const n=Jo(t);if(n.get(1)!==e.databaseId.projectId)throw new fn(dn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fn(dn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ln(ra(n))}function ea(e,t){return Yo(e.databaseId,t)}function ta(e){const t=Jo(e);return 4===t.length?Pn.emptyPath():ra(t)}function na(e){return new Pn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ra(e){return un(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function ia(e,t,n){return{name:$o(e,t),fields:n.value.mapValue.fields}}function sa(e,t){let n;if(t instanceof lo)n={update:ia(e,t.key,t.value)};else if(t instanceof po)n={delete:$o(e,t.key)};else if(t instanceof co)n={update:ia(e,t.key,t.data),updateMask:ga(t.fieldMask)};else{if(!(t instanceof mo))return ln(16599,{Vt:t.type});n={verify:$o(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ws)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof qs)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Gs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ys)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw ln(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Go(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ln(27497)}(e,t.precondition)),n}function oa(e,t){return{documents:[ea(e,t.path)]}}function aa(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ea(e,i);const s=function(e){if(0!==e.length)return ma(zi.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:fa(e.field),direction:ua(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Wo(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function la(e){let t=ta(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){un(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=ca(e);return t instanceof zi&&Hi(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Mi(pa(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,lr(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Oi(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Oi(n,t)}(n.endAt)),ls(t,i,o,s,a,"F",l,c)}function ca(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=pa(e.unaryFilter.field);return Vi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=pa(e.unaryFilter.field);return Vi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=pa(e.unaryFilter.field);return Vi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=pa(e.unaryFilter.field);return Vi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ln(61313);default:return ln(60726)}}(e):void 0!==e.fieldFilter?function(e){return Vi.create(pa(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ln(58110);default:return ln(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return zi.create(e.compositeFilter.filters.map(e=>ca(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ln(1026)}}(e.compositeFilter.op))}(e):ln(30097,{filter:e})}function ua(e){return Vo[e]}function ha(e){return zo[e]}function da(e){return Bo[e]}function fa(e){return{fieldPath:e.canonicalString()}}function pa(e){return jn.fromServerFormat(e.fieldPath)}function ma(e){return e instanceof Vi?function(e){if("=="===e.op){if(Ti(e.value))return{unaryFilter:{field:fa(e.field),op:"IS_NAN"}};if(Si(e.value))return{unaryFilter:{field:fa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ti(e.value))return{unaryFilter:{field:fa(e.field),op:"IS_NOT_NAN"}};if(Si(e.value))return{unaryFilter:{field:fa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fa(e.field),op:ha(e.op),value:e.value}}}(e):e instanceof zi?function(e){const t=e.getFilters().map(e=>ma(e));return 1===t.length?t[0]:{compositeFilter:{op:da(e.op),filters:t}}}(e):ln(54877,{filter:e})}function ga(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function ya(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class va{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Gn.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Gn.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Qr.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new va(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ba{constructor(e){this.yt=e}}function wa(e){const t=la({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ms(t,t.limit,"L"):t}class xa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Jr(e.integerValue));else if("doubleValue"in e){const n=Jr(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),cr(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Xr(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt($r(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Ai(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ni(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ln(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=fi,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Jr(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Ln.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}xa.Kt=new xa;class ka{constructor(){this.Cn=new _a}addToCollectionParentIndex(e,t){return this.Cn.add(t),rr.resolve()}getCollectionParents(e,t){return rr.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return rr.resolve()}deleteFieldIndex(e,t){return rr.resolve()}deleteAllFieldIndexes(e){return rr.resolve()}createTargetIndexes(e,t){return rr.resolve()}getDocumentsMatchingTarget(e,t){return rr.resolve(null)}getIndexType(e,t){return rr.resolve(0)}getFieldIndexes(e,t){return rr.resolve([])}getNextCollectionGroupToUpdate(e){return rr.resolve(null)}getMinOffset(e,t){return rr.resolve($n.min())}getMinOffsetFromCollectionGroup(e,t){return rr.resolve($n.min())}updateCollectionGroup(e,t,n){return rr.resolve()}updateIndexEntries(e,t){return rr.resolve()}}class _a{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Wr(Pn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Wr(Pn.comparator)).toArray()}}new Uint8Array(0);const Ea={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sa=41943040;class Ta{static withCacheSize(e){return new Ta(e,Ta.DEFAULT_COLLECTION_PERCENTILE,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Ta.DEFAULT_COLLECTION_PERCENTILE=10,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ta.DEFAULT=new Ta(Sa,Ta.DEFAULT_COLLECTION_PERCENTILE,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ta.DISABLED=new Ta(-1,0,0);class Ca{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ca(0)}static cr(){return new Ca(-1)}}const Na="LruGarbageCollector",Ia=1048576;function Aa(e,t){let[n,r]=e,[i,s]=t;const o=Sn(n,i);return 0===o?Sn(r,s):o}class Ra{constructor(e){this.Ir=e,this.buffer=new Wr(Aa),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Aa(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Da{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){rn(Na,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){sr(e)?rn(Na,"Ignoring IndexedDB error during garbage collection: ",e):await nr(e)}await this.Vr(3e5)})}}class Pa{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return rr.resolve(or.ce);const n=new Ra(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector","Garbage collection skipped; disabled"),rr.resolve(Ea)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Ea):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(rn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),nn()<=pe.DEBUG&&rn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),rr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Oa(e,t){return new Pa(e,t)}class ja{constructor(){this.changes=new _s(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?rr.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class La{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ma{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&so(n.mutation,e,Kr.empty(),Kn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Os()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Os();const r=Is();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Cs();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Is();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Os()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Ss();const s=Rs(),o=Rs();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof co)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),so(o.mutation,t,o.mutation.getFieldMask(),Kn.now())):s.set(t.key,Kr.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new La(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Rs();let r=new zr((e,t)=>e-t),i=Os();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Kr.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Os()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=As();l.forEach(e=>{if(!i.has(e)){const r=ro(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return rr.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ln.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hs(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):rr.resolve(Is());let o=Qn,a=i;return s.next(t=>rr.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?rr.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Os())).next(e=>({batchId:o,changes:Ns(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ln(t)).next(e=>{let t=Cs();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Cs();return this.indexManager.getCollectionParents(e,i).next(o=>rr.forEach(o,o=>{const a=function(e,t){return new as(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Pi.newInvalidDocument(r)))});let n=Cs();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&so(s.mutation,r,Kr.empty(),Kn.now()),bs(t,r)&&(n=n.insert(e,r))}),n})}}class Ua{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return rr.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Qo(e.createTime)}}(t)),rr.resolve()}getNamedQuery(e,t){return rr.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:wa(e.bundledQuery),readTime:Qo(e.readTime)}}(t)),rr.resolve()}}class Fa{constructor(){this.overlays=new zr(Ln.comparator),this.qr=new Map}getOverlay(e,t){return rr.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Is();return rr.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),rr.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),rr.resolve()}getOverlaysForCollection(e,t,n){const r=Is(),i=t.length+1,s=new Ln(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return rr.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new zr((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Is(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Is(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return rr.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new vo(t,n));let i=this.qr.get(t);void 0===i&&(i=Os(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Va{constructor(){this.sessionToken=Qr.EMPTY_BYTE_STRING}getSessionToken(e){return rr.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,rr.resolve()}}class za{constructor(){this.Qr=new Wr(Ba.$r),this.Ur=new Wr(Ba.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Ba(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Ba(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Ln(new Pn([])),n=new Ba(t,e),r=new Ba(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ln(new Pn([])),n=new Ba(t,e),r=new Ba(t,e+1);let i=Os();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Ba(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ba{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ln.comparator(e.key,t.key)||Sn(e.Yr,t.Yr)}static Kr(e,t){return Sn(e.Yr,t.Yr)||Ln.comparator(e.key,t.key)}}class Ha{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Wr(Ba.$r)}checkEmpty(e){return rr.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new go(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new Ba(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return rr.resolve(s)}lookupMutationBatch(e,t){return rr.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return rr.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return rr.resolve(0===this.mutationQueue.length?ar:this.tr-1)}getAllMutationBatches(e){return rr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ba(t,0),r=new Ba(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),rr.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Wr(Sn);return t.forEach(e=>{const t=new Ba(e,0),r=new Ba(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),rr.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ln.isDocumentKey(i)||(i=i.child(""));const s=new Ba(new Ln(i),0);let o=new Wr(Sn);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),rr.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){un(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return rr.forEach(t.mutations,r=>{const i=new Ba(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Ba(t,0),r=this.Zr.firstAfterOrEqual(n);return rr.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,rr.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Wa{constructor(e){this.ri=e,this.docs=new zr(Ln.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return rr.resolve(n?n.document.mutableCopy():Pi.newInvalidDocument(t))}getEntries(e,t){let n=Ss();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Pi.newInvalidDocument(e))}),rr.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ss();const s=t.path,o=new Ln(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Zn(Jn(o),n)<=0||(r.has(o.key)||bs(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return rr.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ln(9500)}ii(e,t){return rr.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new qa(this)}getSize(e){return rr.resolve(this.size)}}class qa extends ja{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),rr.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Ka{constructor(e){this.persistence=e,this.si=new _s(e=>is(e),ss),this.lastRemoteSnapshotVersion=Gn.min(),this.highestTargetId=0,this.oi=0,this._i=new za,this.targetCount=0,this.ai=Ca.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),rr.resolve()}getLastRemoteSnapshotVersion(e){return rr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rr.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),rr.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),rr.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ca(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,rr.resolve()}updateTargetData(e,t){return this.Pr(t),rr.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,rr.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),rr.waitFor(i).next(()=>r)}getTargetCount(e){return rr.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return rr.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),rr.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),rr.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),rr.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return rr.resolve(n)}containsKey(e,t){return rr.resolve(this._i.containsKey(t))}}class Ga{constructor(e,t){this.ui={},this.overlays={},this.ci=new or(0),this.li=!1,this.li=!0,this.hi=new Va,this.referenceDelegate=e(this),this.Pi=new Ka(this),this.indexManager=new ka,this.remoteDocumentCache=function(e){return new Wa(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new ba(t),this.Ii=new Ua(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fa,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Ha(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){rn("MemoryPersistence","Starting transaction:",e);const r=new Qa(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return rr.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Qa extends tr{constructor(e){super(),this.currentSequenceNumber=e}}class Ya{constructor(e){this.persistence=e,this.Ri=new za,this.Vi=null}static mi(e){return new Ya(e)}get fi(){if(this.Vi)return this.Vi;throw ln(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),rr.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),rr.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),rr.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rr.forEach(this.fi,n=>{const r=Ln.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Gn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return rr.or([()=>rr.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Xa{constructor(e,t){this.persistence=e,this.pi=new _s(e=>dr(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Oa(this,t)}static mi(e,t){return new Xa(e,t)}Ei(){}di(e){return rr.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return rr.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?rr.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Gn.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),rr.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),rr.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),rr.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),rr.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ki(e.data.value)),t}br(e,t,n){return rr.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return rr.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ja{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Os(),r=Os();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ja(e,t.fromCache,n,r)}}class $a{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Za{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=X()?8:ir(Q())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new $a;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(nn()<=pe.DEBUG&&rn("QueryEngine","SDK will not create cache indexes for query:",vs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),rr.resolve()):(nn()<=pe.DEBUG&&rn("QueryEngine","Query:",vs(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(nn()<=pe.DEBUG&&rn("QueryEngine","The SDK decides to create cache indexes for query:",vs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fs(t))):rr.resolve())}ys(e,t){if(us(t))return rr.resolve(null);let n=fs(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ms(t,null,"F"),n=fs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Os(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,ms(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return us(t)||r.isEqual(Gn.min())?rr.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?rr.resolve(null):(nn()<=pe.DEBUG&&rn("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vs(t)),this.vs(e,s,t,Xn(r,Qn)).next(e=>e))})}Ds(e,t){let n=new Wr(xs(e));return t.forEach((t,r)=>{bs(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return nn()<=pe.DEBUG&&rn("QueryEngine","Using full collection scan to execute query:",vs(t)),this.ps.getDocumentsMatchingQuery(e,t,$n.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const el="LocalStore";class tl{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new zr(Sn),this.xs=new _s(e=>is(e),ss),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ma(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function nl(e,t,n,r){return new tl(e,t,n,r)}async function rl(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Os();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function il(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function sl(e,t,n){let r=Os(),i=Os();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ss();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Gn.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):rn(el,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function ol(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=ar),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function al(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,rr.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new va(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function ll(e,t,n){const r=hn(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!sr(e))throw e;rn(el,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function cl(e,t,n){const r=hn(e);let i=Gn.min(),s=Os();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=hn(e),i=r.xs.get(n);return void 0!==i?rr.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,fs(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Gn.min(),n?s:Os())).next(e=>(ul(r,ws(t),e),{documents:e,Qs:s})))}function ul(e,t,n){let r=e.Os.get(t)||Gn.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class hl{constructor(){this.activeTargetIds=Ls()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dl{constructor(){this.Mo=new hl,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hl,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fl{Oo(e){}shutdown(){}}const pl="ConnectivityMonitor";class ml{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){rn(pl,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){rn(pl,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let gl=null;function yl(){return null===gl?gl=268435456+Math.round(2147483648*Math.random()):gl++,"0x"+gl.toString(16)}const vl="RestConnection",bl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wl{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===ai?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=yl(),o=this.zo(e,t.toUriEncodedString());rn(vl,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=H(l);return this.Jo(e,o,a,n,c).then(t=>(rn(vl,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw on(vl,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+en,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=bl[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class xl{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const kl="WebChannelConnection";class _l extends wl{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=yl();return new Promise((i,o)=>{const a=new zt;a.setWithCredentials(!0),a.listenOnce(Ht.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Wt.NO_ERROR:const n=a.getResponseJson();rn(kl,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case Wt.TIMEOUT:rn(kl,"RPC '".concat(e,"' ").concat(s," timed out")),o(new fn(dn.DEADLINE_EXCEEDED,"Request time out"));break;case Wt.HTTP_ERROR:const r=a.getStatus();if(rn(kl,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(dn).indexOf(t)>=0?t:dn.UNKNOWN}(n.status);o(new fn(e,n.message))}else o(new fn(dn.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new fn(dn.UNAVAILABLE,"Connection failed."));break;default:ln(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{rn(kl,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);rn(kl,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=yl(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Qt(),o=Gt(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");rn(kl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.I_(u);let h=!1,d=!1;const f=new xl({Yo:t=>{d?rn(kl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(rn(kl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),rn(kl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Bt.EventType.OPEN,()=>{d||(rn(kl,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Bt.EventType.CLOSE,()=>{d||(d=!0,rn(kl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Bt.EventType.ERROR,t=>{d||(d=!0,on(kl,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new fn(dn.UNAVAILABLE,"The operation could not be completed")))}),p(u,Bt.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];un(!!i,16349);const s=i,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){rn(kl,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=wo[e];if(void 0!==t)return _o(t)}(t),i=o.message;void 0===n&&(n=dn.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.a_(new fn(n,i)),u.close()}else rn(kl,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(o,Kt.STAT_EVENT,t=>{t.stat===qt.PROXY?rn(kl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===qt.NOPROXY&&rn(kl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function El(){return"undefined"!=typeof document?document:null}function Sl(e){return new Ho(e,!0)}class Tl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&rn("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Cl="PersistentStream";class Nl{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tl(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===dn.RESOURCE_EXHAUSTED?(sn(t.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===dn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new fn(dn.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return rn(Cl,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(rn(Cl,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Il extends Nl{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ln(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(un(void 0===t||"string"==typeof t,58123),Qr.fromBase64String(t||"")):(un(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Qr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?dn.UNKNOWN:_o(e.code);return new fn(t,e.message||"")}(o);n=new jo(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Zo(e,r.document.name),s=Qo(r.document.updateTime),o=r.document.createTime?Qo(r.document.createTime):Gn.min(),a=new Ri({mapValue:{fields:r.document.fields}}),l=Pi.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Po(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Zo(e,r.document),s=r.readTime?Qo(r.readTime):Gn.min(),o=Pi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Po([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Zo(e,r.document),s=r.removedTargetIds||[];n=new Po([],s,i,null)}else{if(!("filter"in t))return ln(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new bo(r,i),o=e.targetId;n=new Oo(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Gn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Gn.min():t.readTime?Qo(t.readTime):Gn.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=na(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=os(r)?{documents:oa(e,r)}:{query:aa(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ko(e,t.resumeToken);const r=Wo(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Gn.min())>0){n.readTime=qo(e,t.snapshotVersion.toTimestamp());const r=Wo(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ln(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=na(this.serializer),t.removeTarget=e,this.q_(t)}}class Al extends Nl{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return un(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,un(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){un(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(un(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Qo(e.updateTime):Qo(t);return n.isEqual(Gn.min())&&(n=Qo(t)),new Zs(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Qo(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=na(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>sa(this.serializer,e))};this.q_(t)}}class Rl{}class Dl extends Rl{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new fn(dn.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,Xo(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===dn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new fn(dn.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,Xo(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===dn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new fn(dn.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Pl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(sn(t),this.aa=!1):rn("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Ol="RemoteStore";class jl{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Wl(this)&&(rn(Ol,"Restarting streams for network reachability change."),await async function(e){const t=hn(e);t.Ea.add(4),await Ml(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Ll(t)}(this))})}),this.Ra=new Pl(n,r)}}async function Ll(e){if(Wl(e))for(const t of e.da)await t(!0)}async function Ml(e){for(const t of e.da)await t(!1)}function Ul(e,t){const n=hn(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Hl(n)?Bl(n):cc(n).O_()&&Vl(n,t))}function Fl(e,t){const n=hn(e),r=cc(n);n.Ia.delete(t),r.O_()&&zl(n,t),0===n.Ia.size&&(r.O_()?r.L_():Wl(n)&&n.Ra.set("Unknown"))}function Vl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Gn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}cc(e).Y_(t)}function zl(e,t){e.Va.Ue(t),cc(e).Z_(t)}function Bl(e){e.Va=new Mo({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),cc(e).start(),e.Ra.ua()}function Hl(e){return Wl(e)&&!cc(e).x_()&&e.Ia.size>0}function Wl(e){return 0===hn(e).Ea.size}function ql(e){e.Va=void 0}async function Kl(e){e.Ra.set("Online")}async function Gl(e){e.Ia.forEach((t,n)=>{Vl(e,t)})}async function Ql(e,t){ql(e),Hl(e)?(e.Ra.ha(t),Bl(e)):e.Ra.set("Unknown")}async function Yl(e,t,n){if(e.Ra.set("Online"),t instanceof jo&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){rn(Ol,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Xl(e,n)}else if(t instanceof Po?e.Va.Ze(t):t instanceof Oo?e.Va.st(t):e.Va.tt(t),!n.isEqual(Gn.min()))try{const t=await il(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Qr.EMPTY_BYTE_STRING,r.snapshotVersion)),zl(e,t);const i=new va(r.target,t,n,r.sequenceNumber);Vl(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){rn(Ol,"Failed to raise snapshot:",t),await Xl(e,t)}}async function Xl(e,t,n){if(!sr(t))throw t;e.Ea.add(1),await Ml(e),e.Ra.set("Offline"),n||(n=()=>il(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{rn(Ol,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Ll(e)})}function Jl(e,t){return t().catch(n=>Xl(e,n,t))}async function $l(e){const t=hn(e),n=uc(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ar;for(;Zl(t);)try{const e=await ol(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,ec(t,e)}catch(e){await Xl(t,e)}tc(t)&&nc(t)}function Zl(e){return Wl(e)&&e.Ta.length<10}function ec(e,t){e.Ta.push(t);const n=uc(e);n.O_()&&n.X_&&n.ea(t.mutations)}function tc(e){return Wl(e)&&!uc(e).x_()&&e.Ta.length>0}function nc(e){uc(e).start()}async function rc(e){uc(e).ra()}async function ic(e){const t=uc(e);for(const n of e.Ta)t.ea(n.mutations)}async function sc(e,t,n){const r=e.Ta.shift(),i=yo.from(r,t,n);await Jl(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await $l(e)}async function oc(e,t){t&&uc(e).X_&&await async function(e,t){if(function(e){return ko(e)&&e!==dn.ABORTED}(t.code)){const n=e.Ta.shift();uc(e).B_(),await Jl(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await $l(e)}}(e,t),tc(e)&&nc(e)}async function ac(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),rn(Ol,"RemoteStore received new credentials");const r=Wl(n);n.Ea.add(3),await Ml(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ll(n)}async function lc(e,t){const n=hn(e);t?(n.Ea.delete(2),await Ll(n)):t||(n.Ea.add(2),await Ml(n),n.Ra.set("Unknown"))}function cc(e){return e.ma||(e.ma=function(e,t,n){const r=hn(e);return r.sa(),new Il(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Kl.bind(null,e),t_:Gl.bind(null,e),r_:Ql.bind(null,e),H_:Yl.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Hl(e)?Bl(e):e.Ra.set("Unknown")):(await e.ma.stop(),ql(e))})),e.ma}function uc(e){return e.fa||(e.fa=function(e,t,n){const r=hn(e);return r.sa(),new Al(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:rc.bind(null,e),r_:oc.bind(null,e),ta:ic.bind(null,e),na:sc.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await $l(e)):(await e.fa.stop(),e.Ta.length>0&&(rn(Ol,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class hc{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new hc(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fn(dn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dc(e,t){if(sn("AsyncQueue","".concat(t,": ").concat(e)),sr(e))return new fn(dn.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class fc{static emptySet(e){return new fc(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ln.comparator(t.key,n.key):(e,t)=>Ln.comparator(e.key,t.key),this.keyedMap=Cs(),this.sortedSet=new zr(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new fc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class pc{constructor(){this.ga=new zr(Ln.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ln(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class mc{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new mc(e,t,fc.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class gc{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class yc{constructor(){this.queries=vc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=hn(e),r=n.queries;n.queries=vc(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new fn(dn.ABORTED,"Firestore shutting down"))}}function vc(){return new _s(e=>ys(e),gs)}async function bc(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new gc,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=dc(e,"Initialization of query '".concat(vs(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&_c(n)}async function wc(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xc(e,t){const n=hn(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&_c(n)}function kc(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function _c(e){e.Ca.forEach(e=>{e.next()})}var Ec,Sc;(Sc=Ec||(Ec={})).Ma="default",Sc.Cache="cache";class Tc{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new mc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ec.Cache}}class Cc{constructor(e){this.key=e}}class Nc{constructor(e){this.key=e}}class Ic{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Os(),this.mutatedKeys=Os(),this.eu=xs(e),this.tu=new fc(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new pc,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=bs(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ln(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new mc(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Os(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Nc(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Cc(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Os();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return mc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Ac="SyncEngine";class Rc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Dc{constructor(e){this.key=e,this.hu=!1}}class Pc{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new _s(e=>ys(e),gs),this.Iu=new Map,this.Eu=new Set,this.du=new zr(Ln.comparator),this.Au=new Map,this.Ru=new za,this.Vu={},this.mu=new Map,this.fu=Ca.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Oc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=tu(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Lc(r,t,n,!0),i}async function jc(e,t){const n=tu(e);await Lc(n,t,!0,!1)}async function Lc(e,t,n,r){const i=await al(e.localStore,fs(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Mc(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Ul(e.remoteStore,i),a}async function Mc(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await cl(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Yc(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await cl(e.localStore,t,!0),o=new Ic(t,s.Qs),a=o.ru(s.documents),l=Do.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Yc(e,n,c.au);const u=new Rc(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Uc(e,t,n){const r=hn(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!gs(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ll(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Fl(r.remoteStore,i.targetId),Gc(r,i.targetId)}).catch(nr)):(Gc(r,i.targetId),await ll(r.localStore,i.targetId,!0))}async function Fc(e,t){const n=hn(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fl(n.remoteStore,r.targetId))}async function Vc(e,t){const n=hn(e);try{const e=await function(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Qr.EMPTY_BYTE_STRING,Gn.min()).withLastLimboFreeSnapshotVersion(Gn.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=Ss(),l=Os();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(sl(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(Gn.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return rr.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(un(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?un(r.hu,14607):e.removedDocuments.size>0&&(un(r.hu,42227),r.hu=!1))}),await $c(n,e,t)}catch(e){await nr(e)}}function zc(e,t,n){const r=hn(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=hn(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&_c(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Bc(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new zr(Ln.comparator);e=e.insert(s,Pi.newNoDocument(s,Gn.min()));const n=Os().add(s),i=new Ro(Gn.min(),new Map,new zr(Sn),e,n);await Vc(r,i),r.du=r.du.remove(s),r.Au.delete(t),Jc(r)}else await ll(r.localStore,t,!1).then(()=>Gc(r,t,n)).catch(nr)}async function Hc(e,t){const n=hn(e),r=t.batch.batchId;try{const e=await function(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=rr.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);un(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Os();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Kc(n,r,null),qc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $c(n,e)}catch(e){await nr(e)}}async function Wc(e,t,n){const r=hn(e);try{const e=await function(e,t){const n=hn(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(un(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Kc(r,t,n),qc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await $c(r,e)}catch(n){await nr(n)}}function qc(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Kc(e,t,n){const r=hn(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Gc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Qc(e,t)})}function Qc(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Fl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Jc(e))}function Yc(e,t,n){for(const r of n)r instanceof Cc?(e.Ru.addReference(r.key,t),Xc(e,r)):r instanceof Nc?(rn(Ac,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Qc(e,r.key)):ln(19791,{wu:r})}function Xc(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(rn(Ac,"New document in limbo: "+n),e.Eu.add(r),Jc(e))}function Jc(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Ln(Pn.fromString(t)),r=e.fu.next();e.Au.set(r,new Dc(n)),e.du=e.du.insert(n,r),Ul(e.remoteStore,new va(fs(cs(n.path)),r,"TargetPurposeLimboResolution",or.ce))}}async function $c(e,t,n){const r=hn(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Ja.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=hn(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>rr.forEach(t,t=>rr.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>rr.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!sr(e))throw e;rn(el,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Zc(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){rn(Ac,"User change. New user:",t.toKey());const e=await rl(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new fn(dn.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await $c(n,e.Ls)}}function eu(e,t){const n=hn(e),r=n.Au.get(t);if(r&&r.hu)return Os().add(r.key);{let e=Os();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function tu(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=eu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Bc.bind(null,t),t.Pu.H_=xc.bind(null,t.eventManager),t.Pu.yu=kc.bind(null,t.eventManager),t}function nu(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Hc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wc.bind(null,t),t}class ru{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return nl(this.persistence,new Za,e.initialUser,this.serializer)}Cu(e){return new Ga(Ya.mi,this.serializer)}Du(e){return new dl}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ru.provider={build:()=>new ru};class iu extends ru{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){un(this.persistence.referenceDelegate instanceof Xa,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Da(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Ta.withCacheSize(this.cacheSizeBytes):Ta.DEFAULT;return new Ga(e=>Xa.mi(e,t),this.serializer)}}class su{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>zc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zc.bind(null,this.syncEngine),await lc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new yc}createDatastore(e){const t=Sl(e.databaseInfo.databaseId),n=function(e){return new _l(e)}(e.databaseInfo);return function(e,t,n,r){return new Dl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new jl(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>zc(this.syncEngine,e,0),ml.v()?new ml:new fl)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Pc(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=hn(e);rn(Ol,"RemoteStore shutting down."),t.Ea.add(5),await Ml(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}su.provider={build:()=>new su};class ou{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const au="FirestoreClient";class lu{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Zt.UNAUTHENTICATED,this.clientId=En.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{rn(au,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(rn(au,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=dc(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function cu(e,t){e.asyncQueue.verifyOperationInProgress(),rn(au,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await rl(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function uu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await hu(e);rn(au,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>ac(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>ac(t.remoteStore,n)),e._onlineComponents=t}async function hu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){rn(au,"Using user provided OfflineComponentProvider");try{await cu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===dn.FAILED_PRECONDITION||e.code===dn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;on("Error using user provided cache. Falling back to memory cache: "+n),await cu(e,new ru)}}else rn(au,"Using default OfflineComponentProvider"),await cu(e,new iu(void 0));return e._offlineComponents}async function du(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(rn(au,"Using user provided OnlineComponentProvider"),await uu(e,e._uninitializedComponentsProvider._online)):(rn(au,"Using default OnlineComponentProvider"),await uu(e,new su))),e._onlineComponents}function fu(e){return du(e).then(e=>e.syncEngine)}async function pu(e){const t=await du(e),n=t.eventManager;return n.onListen=Oc.bind(null,t.syncEngine),n.onUnlisten=Uc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=jc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Fc.bind(null,t.syncEngine),n}function mu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new pn;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ou({next:a=>{s.Nu(),t.enqueueAndForget(()=>wc(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new fn(dn.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new fn(dn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Tc(cs(n.path),s,{includeMetadataChanges:!0,qa:!0});return bc(e,o)}(await pu(e),e.asyncQueue,t,n,r)),r.promise}function gu(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const yu=new Map,vu="firestore.googleapis.com",bu=!0;class wu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new fn(dn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vu,this.ssl=bu}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:bu;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Sa;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Ia)throw new fn(dn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new fn(dn.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gu(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new fn(dn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new fn(dn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new fn(dn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fn(dn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new fn(dn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wu(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new gn;switch(e.type){case"firstParty":return new wn(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fn(dn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yu.get(e);t&&(rn("ComponentProvider","Removing Datastore"),yu.delete(e),t.terminate())}(this),Promise.resolve()}}function ku(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=zn(e,xu);const i=H(t),s=e._getSettings(),o=c(c({},s),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(W("https://".concat(a)),G("Firestore",!0)),s.host!==vu&&s.host!==a&&on("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},s),{},{host:a,ssl:i,emulatorOptions:r});if(!te(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Zt.MOCK_USER;else{var u;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[j(JSON.stringify({alg:"none",type:"JWT"})),j(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new fn(dn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Zt(i)}e._authCredentials=new yn(new mn(t,n))}}class _u{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new _u(this.firestore,e,this._query)}}class Eu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Eu(this.firestore,e,this._key)}toJSON(){return{type:Eu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Hn(t,Eu._jsonSchema))return new Eu(e,n||null,new Ln(Pn.fromString(t.referencePath)))}}Eu._jsonSchemaVersion="firestore/documentReference/1.0",Eu._jsonSchema={type:Bn("string",Eu._jsonSchemaVersion),referencePath:Bn("string")};class Su extends _u{constructor(e,t,n){super(e,t,cs(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Eu(this.firestore,null,new Ln(e))}withConverter(e){return new Su(this.firestore,e,this._path)}}function Tu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=le(e),1===arguments.length&&(t=En.newId()),Mn("doc","path",t),e instanceof xu){const n=Pn.fromString(t,...r);return Un(n),new Eu(e,null,new Ln(n))}{if(!(e instanceof Eu||e instanceof Su))throw new fn(dn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Pn.fromString(t,...r));return Un(n),new Eu(e.firestore,e instanceof Su?e.converter:null,new Ln(n))}}const Cu="AsyncQueue";class Nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tl(this,"async_queue_retry"),this._c=()=>{const e=El();e&&rn(Cu,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=El();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=El();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new pn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sr(e))throw e;rn(Cu,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,sn("INTERNAL UNHANDLED ERROR: ",Iu(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=hc.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&ln(47125,{Pc:Iu(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Iu(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Au extends xu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Nu,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nu(e),this._firestoreClient=void 0,await e}}}function Ru(e){if(e._terminated)throw new fn(dn.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Du(e),e._firestoreClient}function Du(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new oi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,gu(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new lu(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pu(Qr.fromBase64String(e))}catch(e){throw new fn(dn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Pu(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hn(e,Pu._jsonSchema))return Pu.fromBase64String(e.bytes)}}Pu._jsonSchemaVersion="firestore/bytes/1.0",Pu._jsonSchema={type:Bn("string",Pu._jsonSchemaVersion),bytes:Bn("string")};class Ou{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new fn(dn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ju{constructor(e){this._methodName=e}}class Lu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fn(dn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fn(dn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Sn(this._lat,e._lat)||Sn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Lu._jsonSchemaVersion}}static fromJSON(e){if(Hn(e,Lu._jsonSchema))return new Lu(e.latitude,e.longitude)}}Lu._jsonSchemaVersion="firestore/geoPoint/1.0",Lu._jsonSchema={type:Bn("string",Lu._jsonSchemaVersion),latitude:Bn("number"),longitude:Bn("number")};class Mu{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Mu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hn(e,Mu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Mu(e.vectorValues);throw new fn(dn.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mu._jsonSchemaVersion="firestore/vectorValue/1.0",Mu._jsonSchema={type:Bn("string",Mu._jsonSchemaVersion),vectorValues:Bn("object")};const Uu=/^__.*__$/;class Fu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new lo(e,this.data,t,this.fieldTransforms)}}class Vu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new co(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ln(40011,{Ac:e})}}class Bu{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bu(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(zu(this.Ac)&&Uu.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Hu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Sl(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Bu({Ac:e,methodName:t,Dc:n,path:jn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wu(e){const t=e._freezeSettings(),n=Sl(e._databaseId);return new Hu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qu(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Zu("Data must be an object, but it was:",o,r);const a=Ju(r,o);let l,c;if(s.merge)l=new Kr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=eh(t,r,n);if(!o.contains(i))throw new fn(dn.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));ih(e,i)||e.push(i)}l=new Kr(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Fu(new Ri(a),l,c)}class Ku extends ju{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ku}}class Gu extends ju{_toFieldTransform(e){return new $s(e.path,new Ws)}isEqual(e){return e instanceof Gu}}function Qu(e,t,n,r){const i=e.Cc(1,t,n);Zu("Data must be an object, but it was:",i,r);const s=[],o=Ri.empty();Fr(r,(e,r)=>{const a=nh(t,e,n);r=le(r);const l=i.yc(a);if(r instanceof Ku)s.push(a);else{const e=Xu(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Kr(s);return new Vu(o,a,i.fieldTransforms)}function Yu(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[eh(t,r,n)],l=[i];if(s.length%2!=0)throw new fn(dn.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(eh(t,s[d])),l.push(s[d+1]);const c=[],u=Ri.empty();for(let d=a.length-1;d>=0;--d)if(!ih(c,a[d])){const e=a[d];let t=l[d];t=le(t);const n=o.yc(e);if(t instanceof Ku)c.push(e);else{const r=Xu(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Kr(c);return new Vu(u,h,o.fieldTransforms)}function Xu(e,t){if($u(e=le(e)))return Zu("Unsupported field value:",t,e),Ju(e,t);if(e instanceof ju)return function(e,t){if(!zu(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Xu(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=le(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Fs(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Kn.fromDate(e);return{timestampValue:qo(t.serializer,n)}}if(e instanceof Kn){const n=new Kn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:qo(t.serializer,n)}}if(e instanceof Lu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Pu)return{bytesValue:Ko(t.serializer,e._byteString)};if(e instanceof Eu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Yo(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Mu)return function(e,t){return{mapValue:{fields:{[ci]:{stringValue:di},[fi]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Ms(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Vn(e)))}(e,t)}function Ju(e,t){const n={};return Vr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fr(e,(e,r)=>{const i=Xu(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function $u(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Kn||e instanceof Lu||e instanceof Pu||e instanceof Eu||e instanceof ju||e instanceof Mu)}function Zu(e,t,n){if(!$u(n)||!Fn(n)){const r=Vn(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function eh(e,t,n){if((t=le(t))instanceof Ou)return t._internalPath;if("string"==typeof t)return nh(e,t);throw rh("Field path arguments must be of type string or ",e,!1,void 0,n)}const th=new RegExp("[~\\*/\\[\\]]");function nh(e,t,n){if(t.search(th)>=0)throw rh("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ou(...t.split("."))._internalPath}catch(r){throw rh("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function rh(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new fn(dn.INVALID_ARGUMENT,a+e+l)}function ih(e,t){return e.some(e=>e.isEqual(t))}class sh{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Eu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new oh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ah("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class oh extends sh{data(){return super.data()}}function ah(e,t){return"string"==typeof t?nh(e,t):t instanceof Ou?t._internalPath:t._delegate._internalPath}class lh{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ln(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Fr(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[fi].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Jr(e.doubleValue));return new Mu(n)}convertGeoPoint(e){return new Lu(Jr(e.latitude),Jr(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ii(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(si(e));default:return null}}convertTimestamp(e){const t=Xr(e);return new Kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Pn.fromString(e);un(ya(n),9688,{name:e});const r=new li(n.get(1),n.get(3)),i=new Ln(n.popFirst(5));return r.isEqual(t)||sn("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ch(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class uh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hh extends sh{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ah("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fn(dn.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=hh._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}hh._jsonSchemaVersion="firestore/documentSnapshot/1.0",hh._jsonSchema={type:Bn("string",hh._jsonSchemaVersion),bundleSource:Bn("string","DocumentSnapshot"),bundleName:Bn("string"),bundle:Bn("string")};class dh extends hh{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class fh{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new uh(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new dh(this._firestore,this._userDataWriter,n.key,n,new uh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new fn(dn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new dh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new uh(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new dh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uh(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ph(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fn(dn.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=En.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ph(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ln(61501,{type:e})}}function mh(e){e=zn(e,Eu);const t=zn(e.firestore,Au);return mu(Ru(t),e._key).then(n=>vh(t,e,n))}fh._jsonSchemaVersion="firestore/querySnapshot/1.0",fh._jsonSchema={type:Bn("string",fh._jsonSchemaVersion),bundleSource:Bn("string","QuerySnapshot"),bundleName:Bn("string"),bundle:Bn("string")};class gh extends lh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Eu(this.firestore,null,t)}}function yh(e,t){return function(e,t){const n=new pn;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=nu(e);try{const e=await function(e,t){const n=hn(e),r=Kn.now(),i=t.reduce((e,t)=>e.add(t.key),Os());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Ss(),l=Os();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=oo(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new co(e.key,t,Di(t.value.mapValue),eo.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Ns(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new zr(Sn)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await $c(r,e.changes),await $l(r.remoteStore)}catch(e){const t=dc(e,"Failed to persist write");n.reject(t)}}(await fu(e),t,n)),n.promise}(Ru(e),t)}function vh(e,t,n){const r=n.docs.get(t._key),i=new gh(e);return new hh(e,i,t._key,r,new uh(n.hasPendingWrites,n.fromCache),t.converter)}function bh(){return new Gu("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){en=e}(_t),vt(new ce("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Au(new vn(e.getProvider("auth-internal")),new kn(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fn(dn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new li(e.options.projectId,t)}(s,r),s);return i=c({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Tt(Jt,$t,e),Tt(Jt,$t,"esm2020")}();Tt("firebase","12.3.0","app");const wh=["providerId"],xh=["uid","auth","stsTokenManager"],kh=["providerId","signInMethod"];function _h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Eh=_h,Sh=new Z("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Th=new be("@firebase/auth");function Ch(e){if(Th.logLevel<=pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Th.error("Auth (".concat(_t,"): ").concat(e),...n)}}function Nh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ph(e,...n)}function Ih(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ph(e,...n)}function Ah(e,t,n){const r=c(c({},Eh()),{},{[t]:n});return new Z("auth","Firebase",r).create(t,{appName:e.name})}function Rh(e){return Ah(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dh(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Nh(e,"argument-error"),Ah(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ph(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Sh.create(e,...n)}function Oh(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ph(t,...r)}}function jh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ch(t),new Error(t)}function Lh(e,t){e||jh(t)}function Mh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Uh(){return"http:"===Fh()||"https:"===Fh()}function Fh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Vh(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Uh()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class zh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lh(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Q())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Vh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bh(e,t){Lh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Hh{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void jh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void jh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void jh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Wh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},qh=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Kh=new zh(3e4,6e4);function Gh(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function Qh(e,t,n,r){return Yh(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=re(c({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=c({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&H(e.emulatorConfig.host)&&(l.credentials="include"),Hh.fetch()(await Jh(e,e.config.apiHost,n,o),l)})}async function Yh(e,t,n){e._canInitEmulator=!1;const r=c(c({},Wh),t);try{const t=new Zh(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ed(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ed(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ed(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ed(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Ah(e,a,o);Nh(e,a)}}catch(i){if(i instanceof $)throw i;Nh(e,"network-request-failed",{message:String(i)})}}async function Xh(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Qh(e,t,n,r,i);return"mfaPendingCredential"in s&&Nh(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Jh(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?Bh(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(qh.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function $h(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zh{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ih(this.auth,"network-request-failed")),Kh.get())})}}function ed(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ih(e,t,r);return i.customData._tokenResponse=n,i}function td(e){return void 0!==e&&void 0!==e.enterprise}class nd{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $h(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rd(e,t){return Qh(e,"GET","/v2/recaptchaConfig",Gh(e,t))}async function id(e,t){return Qh(e,"POST","/v1/accounts:lookup",t)}function sd(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function od(e){return 1e3*Number(e)}function ad(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{const e=L(n);return e?JSON.parse(e):(Ch("Failed to decode base64 JWT payload"),null)}catch(i){return Ch("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function ld(e){const t=ad(e);return Oh(t,"internal-error"),Oh("undefined"!==typeof t.exp,"internal-error"),Oh("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function cd(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof $&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class ud{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class hd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sd(this.lastLoginAt),this.creationTime=sd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function dd(e){var t;const n=e.auth,r=await e.getIdToken(),i=await cd(e,id(n,{idToken:r}));Oh(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?fd(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null!==a&&void 0!==a&&a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hd(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function fd(e){return e.map(e=>{let{providerId:t}=e,n=u(e,wh);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class pd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oh(e.idToken,"internal-error"),Oh("undefined"!==typeof e.idToken,"internal-error"),Oh("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ld(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oh(0!==e.length,"internal-error");const t=ld(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Oh(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Yh(e,{},async()=>{const n=re({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Jh(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&H(e.emulatorConfig.host)&&(a.credentials="include"),Hh.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new pd;return n&&(Oh("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Oh("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Oh("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pd,this.toJSON())}_performRefresh(){return jh("not implemented")}}function md(e,t){Oh("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class gd{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=u(e,xh);this.providerId="firebase",this.proactiveRefresh=new ud(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new hd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await cd(this,this.stsTokenManager.getToken(this.auth,e));return Oh(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=le(e),r=await n.getIdToken(t),i=ad(r);Oh(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:sd(od(i.auth_time)),issuedAtTime:sd(od(i.iat)),expirationTime:sd(od(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=le(e);await dd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Oh(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gd(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Oh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await dd(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wt(this.auth.app))return Promise.reject(Rh(this.auth));const e=await this.getIdToken();return await cd(this,async function(e,t){return Qh(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:k,stsTokenManager:_}=t;Oh(b&&_,e,"internal-error");const E=pd.fromJSON(this.name,_);Oh("string"===typeof b,e,"internal-error"),md(h,e.name),md(d,e.name),Oh("boolean"===typeof w,e,"internal-error"),Oh("boolean"===typeof x,e,"internal-error"),md(f,e.name),md(p,e.name),md(m,e.name),md(g,e.name),md(y,e.name),md(v,e.name);const S=new gd({uid:b,auth:e,email:d,emailVerified:w,displayName:h,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:E,createdAt:y,lastLoginAt:v});return k&&Array.isArray(k)&&(S.providerData=k.map(e=>c({},e))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new pd;r.updateFromServerResponse(t);const i=new gd({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await dd(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Oh(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?fd(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),o=new pd;o.updateFromIdToken(n);const a=new gd({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new hd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const yd=new Map;function vd(e){Lh(e instanceof Function,"Expected a class definition");let t=yd.get(e);return t?(Lh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yd.set(e,t),t)}class bd{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bd.type="NONE";const wd=bd;function xd(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class kd{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=xd(this.userKey,r.apiKey,i),this.fullPersistenceKey=xd("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await id(this.auth,{idToken:e}).catch(()=>{});return t?gd._fromGetAccountInfoResponse(this.auth,t,e):null}return gd._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new kd(vd(wd),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||vd(wd);const s=xd(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await id(e,{idToken:t}).catch(()=>{});if(!r)break;n=await gd._fromGetAccountInfoResponse(e,r,t)}else n=gd._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new kd(i,e,n)):new kd(i,e,n)}}function _d(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Cd(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ed(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Id(t))return"Blackberry";if(Ad(t))return"Webos";if(Sd(t))return"Safari";if((t.includes("chrome/")||Td(t))&&!t.includes("edge/"))return"Chrome";if(Nd(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/firefox\//i.test(e)}function Sd(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Td(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/crios\//i.test(e)}function Cd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/iemobile/i.test(e)}function Nd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/android/i.test(e)}function Id(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/blackberry/i.test(e)}function Ad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/webos/i.test(e)}function Rd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Dd(){return function(){const e=Q();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Pd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return Rd(e)||Nd(e)||Ad(e)||Id(e)||/windows phone/i.test(e)||Cd(e)}function Od(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=_d(Q());break;case"Worker":t="".concat(_d(Q()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(_t,"/").concat(r)}class jd{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Ld{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Md{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fd(this),this.idTokenSubscription=new Fd(this),this.beforeStateQueue=new jd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vd(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await kd.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await id(this,{idToken:e}),n=await gd._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(wt(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,o=null===(s=n)||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==o||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Oh(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dd(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wt(this.app))return Promise.reject(Rh(this));const t=e?le(e):null;return t&&Oh(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Oh(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wt(this.app)?Promise.reject(Rh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wt(this.app)?Promise.reject(Rh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vd(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Qh(e,"GET","/v2/passwordPolicy",Gh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ld(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Z("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Qh(e,"POST","/v2/accounts:revokeToken",Gh(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vd(e)||this._popupRedirectResolver;Oh(t,this,"argument-error"),this.redirectPersistenceManager=await kd.create(this,[vd(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oh(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oh(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Od(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Th.logLevel<=pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Th.warn("Auth (".concat(_t,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ud(e){return le(e)}class Fd{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new oe(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Oh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zd(e){return Vd.loadJS(e)}function Bd(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Hd{constructor(){this.enterprise=new Wd}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Wd{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const qd="NO_RECAPTCHA";class Kd{constructor(e){this.type="recaptcha-enterprise",this.auth=Ud(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;td(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(qd)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Hd).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{rd(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new nd(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&td(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Vd.recaptchaEnterpriseScript;0!==t.length&&(t+=i),zd(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Gd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Kd(e);let o;if(i)o=qd;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Qd(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Gd(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Gd(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const i=await Gd(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Gd(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Gd(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Yd(e){const t=Ud(e),n=await rd(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new nd(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Kd(t).verify()}}function Xd(e,t,n){const r=Ud(e);Oh(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Jd(t),{host:o,port:a}=function(e){const t=Jd(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:$d(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:$d(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Oh(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Oh(te(c,r.config.emulator)&&te(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,H(o)?(W("".concat(s,"//").concat(o).concat(l)),G("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Jd(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $d(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Zd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jh("not implemented")}_getIdTokenResponse(e){return jh("not implemented")}_linkToIdToken(e,t){return jh("not implemented")}_getReauthenticationResolver(e){return jh("not implemented")}}async function ef(e,t){return Qh(e,"POST","/v1/accounts:signUp",t)}async function tf(e,t){return Xh(e,"POST","/v1/accounts:signInWithPassword",Gh(e,t))}class nf extends Zd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new nf(e,t,"password")}static _fromEmailAndCode(e,t){return new nf(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Qd(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",tf,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Xh(e,"POST","/v1/accounts:signInWithEmailLink",Gh(e,t))}(e,{email:this._email,oobCode:this._password});default:Nh(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Qd(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ef,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Xh(e,"POST","/v1/accounts:signInWithEmailLink",Gh(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Nh(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function rf(e,t){return Xh(e,"POST","/v1/accounts:signInWithIdp",Gh(e,t))}class sf extends Zd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new sf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nh("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=u(t,kh);if(!n||!r)return null;const s=new sf(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return rf(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,rf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,rf(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=re(t)}return e}}async function of(e,t){return Qh(e,"POST","/v1/accounts:sendVerificationCode",Gh(e,t))}const af={USER_NOT_FOUND:"user-not-found"};class lf extends Zd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new lf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new lf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Xh(e,"POST","/v1/accounts:signInWithPhoneNumber",Gh(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Xh(e,"POST","/v1/accounts:signInWithPhoneNumber",Gh(e,t));if(n.temporaryProof)throw ed(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Xh(e,"POST","/v1/accounts:signInWithPhoneNumber",Gh(e,c(c({},t),{},{operation:"REAUTH"})),af)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new lf({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class cf{constructor(e){var t,n,r,i,s,o;const a=ie(se(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Oh(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=ie(se(e)).link,n=t?ie(se(t)).deep_link_id:null,r=ie(se(e)).deep_link_id;return(r?ie(se(r)).link:null)||r||n||t||e}(e);try{return new cf(t)}catch(n){return null}}}class uf{constructor(){this.providerId=uf.PROVIDER_ID}static credential(e,t){return nf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=cf.parseLink(t);return Oh(n,"argument-error"),nf._fromEmailAndCode(e,n.code,n.tenantId)}}uf.PROVIDER_ID="password",uf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",uf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class hf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class df extends hf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ff extends df{constructor(){super("facebook.com")}static credential(e){return sf._fromParams({providerId:ff.PROVIDER_ID,signInMethod:ff.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ff.credentialFromTaggedObject(e)}static credentialFromError(e){return ff.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ff.credential(t.oauthAccessToken)}catch(n){return null}}}ff.FACEBOOK_SIGN_IN_METHOD="facebook.com",ff.PROVIDER_ID="facebook.com";class pf extends df{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return sf._fromParams({providerId:pf.PROVIDER_ID,signInMethod:pf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pf.credentialFromTaggedObject(e)}static credentialFromError(e){return pf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return pf.credential(n,r)}catch(i){return null}}}pf.GOOGLE_SIGN_IN_METHOD="google.com",pf.PROVIDER_ID="google.com";class mf extends df{constructor(){super("github.com")}static credential(e){return sf._fromParams({providerId:mf.PROVIDER_ID,signInMethod:mf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mf.credentialFromTaggedObject(e)}static credentialFromError(e){return mf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return mf.credential(t.oauthAccessToken)}catch(n){return null}}}mf.GITHUB_SIGN_IN_METHOD="github.com",mf.PROVIDER_ID="github.com";class gf extends df{constructor(){super("twitter.com")}static credential(e,t){return sf._fromParams({providerId:gf.PROVIDER_ID,signInMethod:gf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gf.credentialFromTaggedObject(e)}static credentialFromError(e){return gf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return gf.credential(n,r)}catch(i){return null}}}gf.TWITTER_SIGN_IN_METHOD="twitter.com",gf.PROVIDER_ID="twitter.com";class yf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await gd._fromIdTokenResponse(e,n,r),s=vf(n);return new yf({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=vf(n);return new yf({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function vf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class bf extends ${constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,bf.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new bf(e,t,n,r)}}function wf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw bf._fromErrorAndOperation(e,n,t,r);throw n})}async function xf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await cd(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return yf._forOperation(e,"link",r)}async function kf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(wt(r.app))return Promise.reject(Rh(r));const i="reauthenticate";try{const s=await cd(e,wf(r,i,t,e),n);Oh(s.idToken,r,"internal-error");const o=ad(s.idToken);Oh(o,r,"internal-error");const{sub:a}=o;return Oh(e.uid===a,r,"user-mismatch"),yf._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Nh(r,"user-mismatch"),s}}async function _f(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(wt(e.app))return Promise.reject(Rh(e));const r="signIn",i=await wf(e,r,t),s=await yf._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Ef(e,t){return Qh(e,"POST","/v2/accounts/mfaEnrollment:start",Gh(e,t))}new WeakMap;const Sf="__sak";class Tf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Cf extends Tf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Dd()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cf.type="LOCAL";const Nf=Cf;function If(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Af(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Rf{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Af(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return If(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Af(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Af(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=If(n);const i=setInterval(()=>{const e=If(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Rf.type="COOKIE";class Df extends Tf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Df.type="SESSION";const Pf=Df;class Of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Of(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function jf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Of.receivers=[];class Lf{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=jf("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Mf(){return window}function Uf(){return"undefined"!==typeof Mf().WorkerGlobalScope&&"function"===typeof Mf().importScripts}const Ff="firebaseLocalStorageDb",Vf="firebaseLocalStorage",zf="fbase_key";class Bf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hf(e,t){return e.transaction([Vf],t?"readwrite":"readonly").objectStore(Vf)}function Wf(){const e=indexedDB.open(Ff,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Vf,{keyPath:zf})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Vf)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ff);return new Bf(e).toPromise()}(),t(await Wf()))})})}async function qf(e,t,n){const r=Hf(e,!0).put({[zf]:t,value:n});return new Bf(r).toPromise()}function Kf(e,t){const n=Hf(e,!0).delete(t);return new Bf(n).toPromise()}class Gf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Wf()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Uf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Of._getInstance(Uf()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Lf(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wf();return await qf(e,Sf,"1"),await Kf(e,Sf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>qf(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Hf(e,!1).get(t),r=await new Bf(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kf(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Hf(e,!1).getAll();return new Bf(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Gf.type="LOCAL";const Qf=Gf;function Yf(e,t){return Qh(e,"POST","/v2/accounts/mfaSignIn:start",Gh(e,t))}Bd("rcb"),new zh(3e4,6e4);const Xf="recaptcha";async function Jf(e,t,n){if(!e._getRecaptchaConfig())try{await Yd(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Oh("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Qd(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===qd){Oh((null===n||void 0===n?void 0:n.type)===Xf,e,"argument-error");return Ef(e,await $f(e,t,n))}return Ef(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Oh("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Oh(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Qd(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===qd){Oh((null===n||void 0===n?void 0:n.type)===Xf,e,"argument-error");return Yf(e,await $f(e,t,n))}return Yf(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Qd(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===qd){Oh((null===n||void 0===n?void 0:n.type)===Xf,e,"argument-error");return of(e,await $f(e,t,n))}return of(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function $f(e,t,n){Oh(n.type===Xf,e,"argument-error");const r=await n.verify();Oh("string"===typeof r,e,"argument-error");const i=c({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Zf{constructor(e){this.providerId=Zf.PROVIDER_ID,this.auth=Ud(e)}verifyPhoneNumber(e,t){return Jf(this.auth,e,le(t))}static credential(e,t){return lf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Zf.credentialFromTaggedObject(t)}static credentialFromError(e){return Zf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?lf._fromTokenResponse(n,r):null}}function ep(e,t){return t?vd(t):(Oh(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Zf.PROVIDER_ID="phone",Zf.PHONE_SIGN_IN_METHOD="phone";class tp extends Zd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function np(e){return _f(e.auth,new tp(e),e.bypassAuthState)}function rp(e){const{auth:t,user:n}=e;return Oh(n,t,"internal-error"),kf(n,new tp(e),e.bypassAuthState)}async function ip(e){const{auth:t,user:n}=e;return Oh(n,t,"internal-error"),xf(n,new tp(e),e.bypassAuthState)}class sp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return np;case"linkViaPopup":case"linkViaRedirect":return ip;case"reauthViaPopup":case"reauthViaRedirect":return rp;default:Nh(this.auth,"internal-error")}}resolve(e){Lh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const op=new zh(2e3,1e4);class ap extends sp{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ap.currentPopupAction&&ap.currentPopupAction.cancel(),ap.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oh(e,this.auth,"internal-error"),e}async onExecution(){Lh(1===this.filter.length,"Popup operations only handle one event");const e=jf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ih(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ih(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ap.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ih(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,op.get())};e()}}ap.currentPopupAction=null;const lp=new Map;class cp extends sp{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=lp.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=dp(t),r=hp(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}lp.set(this.auth._key(),e)}return this.bypassAuthState||lp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function up(e,t){lp.set(e._key(),t)}function hp(e){return vd(e._redirectPersistence)}function dp(e){return xd("pendingRedirect",e.config.apiKey,e.name)}async function fp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(wt(e.app))return Promise.reject(Rh(e));const r=Ud(e),i=ep(r,t),s=new cp(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class pp{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gp(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!gp(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ih(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mp(e))}saveEventToCache(e){this.cachedEventUids.add(mp(e)),this.lastProcessedEventTime=Date.now()}}function mp(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function gp(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const yp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vp=/^https?/;async function bp(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Qh(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(wp(r))return}catch(n){}Nh(e,"unauthorized-domain")}function wp(e){const t=Mh(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!vp.test(n))return!1;if(yp.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const xp=new zh(3e4,6e4);function kp(){const e=Mf().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function _p(e){return new Promise((t,n)=>{var r,i;function s(){kp(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{kp(),n(Ih(e,"network-request-failed"))},timeout:xp.get()})}if(null!==(r=Mf().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Mf().gapi)||void 0===i||!i.load){const t=Bd("iframefcb");return Mf()[t]=()=>{gapi.load?s():n(Ih(e,"network-request-failed"))},zd("".concat(Vd.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Ep=null,e})}let Ep=null;const Sp=new zh(5e3,15e3),Tp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Np(e){const t=e.config;Oh(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Bh(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:_t},i=Cp.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(re(r).slice(1))}async function Ip(e){const t=await function(e){return Ep=Ep||_p(e),Ep}(e),n=Mf().gapi;return Oh(n,e,"internal-error"),t.open({where:document.body,url:Np(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tp,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ih(e,"network-request-failed"),s=Mf().setTimeout(()=>{r(i)},Sp.get());function o(){Mf().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const Ap={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Dp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=c(c({},Ap),{},{width:r.toString(),height:i.toString(),top:s,left:o}),u=Q().toLowerCase();n&&(a=Td(u)?"_blank":n),Ed(u)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Rd(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Rp(null);const d=window.open(t||"",a,h);Oh(d,e,"popup-blocked");try{d.focus()}catch(f){}return new Rp(d)}const Pp="__/auth/handler",Op="emulator/auth/handler",jp=encodeURIComponent("fac");async function Lp(e,t,n,r,i,s){Oh(e.config.authDomain,e,"auth-domain-config-required"),Oh(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:_t,eventId:i};if(t instanceof hf){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof df){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(jp,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Pp);return Bh(t,Op)}(e),"?").concat(re(a).slice(1)).concat(c)}const Mp="webStorageSupport";const Up=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pf,this._completeRedirectFn=fp,this._overrideRedirectResult=up}async _openPopup(e,t,n,r){var i;Lh(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Dp(e,await Lp(e,t,n,Mh(),r),jf())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Mf().location.href=e}(await Lp(e,t,n,Mh(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Lh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ip(e),n=new pp(e);return t.register("authEvent",t=>{Oh(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mp,{type:Mp},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Mp];void 0!==i&&t(!!i),Nh(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bp(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Pd()||Sd()||Rd()}};var Fp="@firebase/auth",Vp="1.11.0";class zp{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Bp=z("authIdTokenMaxAge")||300;let Hp=null;var Wp;Vd={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ih("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Wp="Browser",vt(new ce("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Oh(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Wp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Od(Wp)},c=new Md(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vd);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),vt(new ce("auth-internal",e=>(e=>new zp(e))(Ud(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Tt(Fp,Vp,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Wp)),Tt(Fp,Vp,"esm2020");const qp={apiKey:"AIzaSyDO5KOHefWnDTKm_3E8-CHJcOiY1lLc5Qs",authDomain:"a-good-man-c64ae.firebaseapp.com",projectId:"a-good-man-c64ae",storageBucket:"a-good-man-c64ae.firebasestorage.app",messagingSenderId:"1047795579429",appId:"1:1047795579429:web:2dc2e5afc54a807f6a1dcc"};let Kp,Gp,Qp,Yp;try{Kp=Et(qp),Gp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();const t=bt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=bt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(te(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Nh(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Up,persistence:[Qf,Nf,Pf]}),r=z("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Bp)return;const r=null===t||void 0===t?void 0:t.token;Hp!==r&&(Hp=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){le(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){le(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=F("auth");return s&&Xd(n,"http://".concat(s)),n}(Kp),Qp=function(e,t){const n="object"==typeof e?e:St(),r="string"==typeof e?e:t||ai,i=bt(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(()=>{const e=F("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const n=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),n]:[e.substring(0,t),n]})();e&&ku(i,...e)}return i}(Kp),Yp=new pf}catch(om){console.error("Firebase initialization failed:",om)}const Xp=()=>Gp&&Yp;const Jp=new class{constructor(){this.currentUser=null,this.listeners=[]}async signInWithGoogle(){if(!Xp())throw new Error("Firebase is not configured. Please set up your Firebase project.");try{const e=await async function(e,t,n){if(wt(e.app))return Promise.reject(Ih(e,"operation-not-supported-in-this-environment"));const r=Ud(e);Dh(e,t,hf);const i=ep(r,n);return new ap(r,"signInViaPopup",t,i).executeNotNull()}(Gp,Yp),t=e.user,n={uid:t.uid,name:t.displayName,email:t.email,photoURL:t.photoURL,createdAt:t.metadata.creationTime,lastSignIn:t.metadata.lastSignInTime};return this.currentUser=n,this.notifyListeners(),n}catch(om){throw console.error("Error signing in with Google:",om),om}}async signOut(){if(!Xp())return this.currentUser=null,void this.notifyListeners();try{await function(e){return le(e).signOut()}(Gp),this.currentUser=null,this.notifyListeners()}catch(om){throw console.error("Error signing out:",om),om}}getCurrentUser(){return this.currentUser}onAuthStateChanged(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(){this.listeners.forEach(e=>e(this.currentUser))}init(){Xp()?function(e,t,n,r){le(e).onAuthStateChanged(t,n,r)}(Gp,e=>{this.currentUser=e?{uid:e.uid,name:e.displayName,email:e.email,photoURL:e.photoURL,createdAt:e.metadata.creationTime,lastSignIn:e.metadata.lastSignInTime}:null,this.notifyListeners()}):console.warn("Firebase not available, skipping auth initialization")}},$p=Jp;const Zp=new class{constructor(){this.currentUser=null,this.listeners=[],$p.onAuthStateChanged(e=>{this.currentUser=e})}getCurrentUserId(){var e;if(void 0===Qp)throw new Error("Firebase is not configured. Please set up your Firebase project.");return null===(e=this.currentUser)||void 0===e?void 0:e.uid}getUserDocRef(){const e=this.getCurrentUserId();if(!e)throw new Error("No authenticated user");return Tu(Qp,"users",e)}async initializeUserData(){if(!this.getCurrentUserId())throw new Error("No authenticated user");const e=this.getUserDocRef(),t=await mh(e);if(!t.exists()){const t={userInfo:{name:this.currentUser.name,email:this.currentUser.email,photoURL:this.currentUser.photoURL,createdAt:bh(),lastActive:bh()},data:{routines:[{id:1,name:"Morning Routine",timeOfDay:"morning",days:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],habits:[]},{id:2,name:"Afternoon Routine",timeOfDay:"afternoon",days:["monday","tuesday","wednesday","thursday","friday"],habits:[]},{id:3,name:"Evening Routine",timeOfDay:"evening",days:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],habits:[]}],habits:[],goals:[],todos:[],habitCompletions:{},habitCompletionTimes:{},routineCompletions:{},lastResetDate:null}};return await function(e,t,n){e=zn(e,Eu);const r=zn(e.firestore,Au),i=ch(e.converter,t,n);return yh(r,[qu(Wu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,eo.none())])}(e,t),t}return t.data()}async getCurrentUserData(){try{const e=this.getUserDocRef(),t=await mh(e);return t.exists()?t.data():await this.initializeUserData()}catch(om){throw console.error("Error getting user data:",om),om}}async updateUserData(e){try{const t=this.getUserDocRef();await function(e,t,n){e=zn(e,Eu);const r=zn(e.firestore,Au),i=Wu(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=le(t))||t instanceof Ou?Yu(i,"updateDoc",e._key,t,n,a):Qu(i,"updateDoc",e._key,t),yh(r,[s.toMutation(e._key,eo.exists(!0))])}(t,{data:e,"userInfo.lastActive":bh()})}catch(om){throw console.error("Error updating user data:",om),om}}async getRoutines(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.routines)||[]}async getHabits(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.habits)||[]}async getGoals(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.goals)||[]}async getTodos(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.todos)||[]}async getHabitCompletions(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.habitCompletions)||{}}async getHabitCompletionTimes(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.habitCompletionTimes)||{}}async getRoutineCompletions(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.routineCompletions)||{}}async getLastResetDate(){var e;const t=await this.getCurrentUserData();return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.lastResetDate)||null}async updateRoutines(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.routines=e,await this.updateUserData(t.data)}async updateHabits(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.habits=e,await this.updateUserData(t.data)}async updateGoals(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.goals=e,await this.updateUserData(t.data)}async updateTodos(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.todos=e,await this.updateUserData(t.data)}async updateHabitCompletions(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.habitCompletions=e,await this.updateUserData(t.data)}async updateHabitCompletionTimes(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.habitCompletionTimes=e,await this.updateUserData(t.data)}async updateRoutineCompletions(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.routineCompletions=e,await this.updateUserData(t.data)}async updateLastResetDate(e){const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");t.data.lastResetDate=e,await this.updateUserData(t.data)}async exportUserData(){try{const e=await this.getCurrentUserData();return e?{version:"1.0",exportDate:(new Date).toISOString(),userData:e.data,userInfo:e.userInfo}:null}catch(om){throw console.error("Error exporting user data:",om),om}}async importUserData(e){try{if(!e.userData)throw new Error("Invalid import data");const t=await this.getCurrentUserData();if(!t)throw new Error("No user data found");return t.data=e.userData,await this.updateUserData(t.data),!0}catch(om){throw console.error("Error importing user data:",om),om}}async ensureDefaultRoutines(){try{const e=await this.getCurrentUserData();if(!e)return!1;const t=[{id:1,name:"Morning Routine",timeOfDay:"morning",days:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],habits:[]},{id:2,name:"Afternoon Routine",timeOfDay:"afternoon",days:["monday","tuesday","wednesday","thursday","friday"],habits:[]},{id:3,name:"Evening Routine",timeOfDay:"evening",days:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],habits:[]}],n=e.data.routines.map(e=>e.id),r=t.filter(e=>!n.includes(e.id));return r.length>0&&(e.data.routines=[...e.data.routines,...r],await this.updateUserData(e.data)),!0}catch(om){return console.error("Error ensuring default routines:",om),!1}}generateUserId(){return"user_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}clearAllData(){console.warn("clearAllData() is not supported in Firestore mode. Data is stored in the cloud.")}};var em=n(579);const tm=()=>{const[e,t]=(0,r.useState)("dashboard"),[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(new Date),[a,l]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[d,f]=(0,r.useState)(null),[D,P]=(0,r.useState)(!1),[O,j]=(0,r.useState)(null),[L,M]=(0,r.useState)(!0),[U,F]=(0,r.useState)(!1),[V,z]=(0,r.useState)(null),[B,H]=(0,r.useState)(!1),[W,q]=(0,r.useState)(null),[K,G]=(0,r.useState)({}),[Q,Y]=(0,r.useState)({}),[X,J]=(0,r.useState)({}),[$,Z]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(0),[ne,re]=(0,r.useState)(!1),ie=["The secret of getting ahead is getting started.","Success is the sum of small efforts repeated day in and day out.","You don't have to be great to start, but you have to start to be great.","The only way to do great work is to love what you do.","Believe you can and you're halfway there."],se=[{virtue:"Present",focus:"A Good Man Is Present. Be fully where you are this week."},{virtue:"Determined",focus:"A Good Man Is Determined. Know your why and stand firm this week."},{virtue:"Confident",focus:"A Good Man Is Confident. Keep your promises to yourself this week."},{virtue:"Patient",focus:"A Good Man Is Patient. Do not complain this week."},{virtue:"Genuine",focus:"A Good Man Is Genuine. Be your authentic self this week."},{virtue:"Responsible",focus:"A Good Man Is Responsible. Take ownership this week."},{virtue:"Strong",focus:"A Good Man Is Strong. Build your strength in all forms this week."},{virtue:"Disciplined",focus:"A Good Man Is Disciplined. Master yourself this week."},{virtue:"Humble",focus:"A Good Man Is Humble. Serve others before yourself this week."}],[oe,ae]=(0,r.useState)([]),[le,ce]=(0,r.useState)([]),[ue,he]=(0,r.useState)([]),[de,fe]=(0,r.useState)([]),[pe,me]=(0,r.useState)({}),[ge,ye]=(0,r.useState)({}),[ve,be]=(0,r.useState)(null),[we,xe]=(0,r.useState)(0),[ke,_e]=(0,r.useState)(null),[Ee,Se]=(0,r.useState)(!1),[Te,Ce]=(0,r.useState)({}),[Ne,Ie]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{(async()=>{try{M(!0);const e=$p.getCurrentUser();e&&(j(e),await Ae(),Re())}catch(om){console.error("Error initializing app:",om)}finally{M(!1)}})()},[]),(0,r.useEffect)(()=>{const e=Object.keys(K).length>0,t=Object.keys(X).length>0;if(e||t){const e=setInterval(()=>{te(e=>e+1)},1e3);return()=>clearInterval(e)}},[K,X]);const Ae=async()=>{try{await Zp.ensureDefaultRoutines();const[e,t,n,r,i,s,o]=await Promise.all([Zp.getRoutines(),Zp.getHabits(),Zp.getGoals(),Zp.getTodos(),Zp.getHabitCompletions(),Zp.getHabitCompletionTimes(),Zp.getRoutineCompletions()]);ae(e),ce(t),he(n),fe(r),me(i),ye(s),Ce(o)}catch(om){console.error("Error loading user data:",om)}};(0,r.useEffect)(()=>{if(oe.length>0){const e=We();e&&Ie(new Set([e.id]))}},[oe,pe,s]);const Re=async()=>{const e=De();if(await Zp.getLastResetDate()!==e){const t=await Zp.getHabitCompletions(),n=await Zp.getHabitCompletionTimes();t[e]&&delete t[e],n[e]&&delete n[e],await Zp.updateHabitCompletions(t),await Zp.updateHabitCompletionTimes(n),me(t),ye(n),await Zp.updateLastResetDate(e);const r=(await Zp.getTodos()).filter(t=>t.addedAt!==e);await Zp.updateTodos(r),fe(r),console.log("Daily habit reset completed for",e)}};(0,r.useEffect)(()=>{const e=e=>{D&&!e.target.closest(".data-menu-container")&&P(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[D]),(0,r.useEffect)(()=>{if(!K||0===Object.keys(K).length)return;const e=setInterval(()=>{Object.keys(K).forEach(e=>{const t=K[e],n=Q[e];if(t&&n){(Date.now()-t)/1e3/60>=n&&Qe(e,!0)}}),te(e=>e+1)},1e3);return()=>clearInterval(e)},[K?Object.keys(K).length:0]);const De=()=>s.toISOString().split("T")[0],Pe=e=>{let{onClose:t}=e;const[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)("");return(0,em.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,em.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,em.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-stone-200",children:[(0,em.jsx)("h3",{className:"text-xl font-bold text-[#333333] uppercase tracking-wide",children:"New Goal"}),(0,em.jsx)("button",{onClick:t,className:"text-[#333333] hover:opacity-60",children:(0,em.jsx)(p,{size:24,strokeWidth:2.5})})]}),(0,em.jsxs)("div",{className:"space-y-4",children:[(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Name *"}),(0,em.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Learn Spanish",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Vision (optional)"}),(0,em.jsx)("textarea",{value:s,onChange:e=>o(e.target.value),placeholder:"What does success look like?",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",rows:"3"})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Target Date (optional)"}),(0,em.jsx)("input",{type:"date",value:a,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]"})]}),(0,em.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,em.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2.5 border-2 border-[#333333] text-[#333333] rounded-lg hover:bg-stone-100 font-bold uppercase text-sm tracking-wider transition-colors",children:"Cancel"}),(0,em.jsx)("button",{onClick:async()=>{if(n.trim()){const e={id:Date.now(),name:n.trim(),description:s.trim(),deadline:a,tasks:[],completed:!1,createdAt:(new Date).toISOString()},r=[...ue,e];he(r),await await Zp.updateGoals(r),t()}},className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:"Create Goal"})]})]})]})})},Oe=e=>{let{goalId:t,onClose:n}=e;const[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)("");return(0,em.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,em.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,em.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-stone-200",children:[(0,em.jsx)("h3",{className:"text-xl font-bold text-[#333333] uppercase tracking-wide",children:"New Task"}),(0,em.jsx)("button",{onClick:n,className:"text-[#333333] hover:opacity-60",children:(0,em.jsx)(p,{size:24,strokeWidth:2.5})})]}),(0,em.jsxs)("div",{className:"space-y-4",children:[(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Name *"}),(0,em.jsx)("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"Complete chapter 1",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Notes (optional)"}),(0,em.jsx)("textarea",{value:o,onChange:e=>a(e.target.value),placeholder:"Additional details...",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",rows:"2"})]}),(0,em.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,em.jsx)("button",{onClick:n,className:"flex-1 px-4 py-2.5 border-2 border-[#333333] text-[#333333] rounded-lg hover:bg-stone-100 font-bold uppercase text-sm tracking-wider transition-colors",children:"Cancel"}),(0,em.jsx)("button",{onClick:async()=>{if(i.trim()){const e=ue.map(e=>e.id===t?c(c({},e),{},{tasks:[...e.tasks,{id:Date.now(),name:i.trim(),notes:o.trim(),completed:!1}]}):e);he(e),await await Zp.updateGoals(e),n()}},className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:"Add Task"})]})]})]})})},je=e=>{let{routine:t,onClose:n}=e;const[i,s]=(0,r.useState)((null===t||void 0===t?void 0:t.name)||""),[o,a]=(0,r.useState)((null===t||void 0===t?void 0:t.timeOfDay)||"morning"),[l,u]=(0,r.useState)((null===t||void 0===t?void 0:t.days)||[]),[h,d]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),[y,v]=(0,r.useState)([]),[b,w]=(0,r.useState)([]),[x,k]=(0,r.useState)(""),[_,E]=(0,r.useState)(""),[S,T]=(0,r.useState)(""),[C,N]=(0,r.useState)(!1),[I,A]=(0,r.useState)(""),[R,D]=(0,r.useState)(!1),P=(()=>{const e=(null===t||void 0===t?void 0:t.habits)||[];return[...le.filter(t=>e.includes(t.id)&&!b.includes(t.id)),...y]})();return(0,em.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,em.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,em.jsxs)("div",{className:"p-6",children:[(0,em.jsxs)("div",{className:"flex justify-between items-center mb-6 pb-3 border-b border-stone-200",children:[(0,em.jsx)("h3",{className:"text-xl font-bold text-[#333333] uppercase tracking-wide",children:"Edit Routine"}),(0,em.jsx)("button",{onClick:n,className:"text-[#333333] hover:opacity-60",children:(0,em.jsx)(p,{size:24,strokeWidth:2.5})})]}),(0,em.jsxs)("div",{className:"space-y-6",children:[(0,em.jsxs)("div",{children:[(0,em.jsx)("h4",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Routine Details"}),(0,em.jsxs)("div",{className:"space-y-4",children:[(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Name *"}),(0,em.jsx)("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"Morning Routine",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Time of Day *"}),(0,em.jsx)("select",{value:o,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",children:[{value:"morning",label:"Morning"},{value:"afternoon",label:"Afternoon"},{value:"evening",label:"Evening"}].map(e=>(0,em.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Days of Week *"}),(0,em.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}].map(e=>(0,em.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,em.jsx)("input",{type:"checkbox",checked:l.includes(e.key),onChange:()=>(e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e.key),className:"w-4 h-4 text-[#333333] border-2 border-stone-300 rounded focus:ring-[#333333]"}),(0,em.jsx)("span",{className:"text-sm text-[#333333]",children:e.label})]},e.key))})]})]})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("h4",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Habits"}),(0,em.jsx)("div",{className:"space-y-2",children:P.length>0?P.map(e=>(0,em.jsx)(Le,{habit:e,isEditing:f===e.id,onEdit:()=>{return t=e.id,void g(f===t?null:t);var t},onDelete:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this habit?")&&(y.some(e=>e.id===t)?v(e=>e.filter(e=>e.id!==t)):w(e=>[...e,t])));var t},onSave:t=>(async(e,t)=>{if(y.some(t=>t.id===e))v(n=>n.map(n=>n.id===e?t:n));else{const n=le.map(n=>n.id===e?t:n);ce(n),await Zp.updateHabits(n)}g(null)})(e.id,t),onCancel:()=>g(null)},e.id)):(0,em.jsx)("p",{className:"text-[#333333] opacity-50 text-sm text-center py-4",children:"No habits in this routine yet."})})]}),(0,em.jsx)("div",{children:h?(0,em.jsxs)("div",{className:"border-2 border-stone-300 rounded-lg p-4 space-y-4",children:[(0,em.jsxs)("div",{className:"flex justify-between items-center",children:[(0,em.jsx)("h5",{className:"font-bold text-[#333333] text-sm uppercase tracking-wide",children:"New Habit"}),(0,em.jsx)("button",{onClick:()=>d(!1),className:"text-[#333333] hover:opacity-60",children:(0,em.jsx)(p,{size:18,strokeWidth:2.5})})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Name *"}),(0,em.jsx)("input",{type:"text",value:x,onChange:e=>k(e.target.value),placeholder:"Morning meditation",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Why (optional)"}),(0,em.jsx)("textarea",{value:_,onChange:e=>E(e.target.value),placeholder:"Why is this habit important?",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",rows:"2"})]}),(0,em.jsxs)("div",{children:[(0,em.jsxs)("label",{className:"flex items-center gap-2 mb-2 cursor-pointer",children:[(0,em.jsx)("input",{type:"checkbox",checked:C,onChange:e=>N(e.target.checked),className:"w-4 h-4 text-[#333333] border-2 border-stone-300 rounded focus:ring-[#333333] focus:ring-2 cursor-pointer"}),(0,em.jsx)("span",{className:"text-sm font-bold text-[#333333] uppercase tracking-wider",children:"Set Timer Cap"})]}),C&&(0,em.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,em.jsx)("input",{type:"number",value:S,onChange:e=>T(e.target.value),placeholder:"20",min:"1",max:"1440",className:"w-20 px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]"}),(0,em.jsx)("span",{className:"text-sm text-[#333333] font-medium",children:"minutes"})]})]}),(0,em.jsxs)("div",{children:[(0,em.jsxs)("label",{className:"flex items-center gap-2 mb-2 cursor-pointer",children:[(0,em.jsx)("input",{type:"checkbox",checked:R,onChange:e=>D(e.target.checked),className:"w-4 h-4 text-[#333333] border-2 border-stone-300 rounded focus:ring-[#333333] focus:ring-2 cursor-pointer"}),(0,em.jsx)("span",{className:"text-sm font-bold text-[#333333] uppercase tracking-wider",children:"Set Expected Completion Time"})]}),R&&(0,em.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,em.jsx)("input",{type:"number",value:I,onChange:e=>A(e.target.value),placeholder:"15",min:"1",max:"1440",className:"w-20 px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]"}),(0,em.jsx)("span",{className:"text-sm text-[#333333] font-medium",children:"minutes"}),(0,em.jsx)("span",{className:"text-xs text-stone-500",children:"(for progress visualization)"})]})]}),(0,em.jsxs)("div",{className:"flex gap-2",children:[(0,em.jsx)("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2.5 border-2 border-[#333333] text-[#333333] rounded-lg hover:bg-stone-100 font-bold uppercase text-sm tracking-wider transition-colors",children:"Cancel"}),(0,em.jsx)("button",{onClick:()=>{if(x.trim()){const e=C&&S?parseInt(S):null,n=R&&I?parseInt(I):null,r={id:Date.now(),name:x.trim(),description:_.trim(),duration:e,expectedCompletionTime:n,routineId:t.id,createdAt:(new Date).toISOString()};v(e=>[...e,r]),k(""),E(""),T(""),N(!1),A(""),D(!1),d(!1)}},className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:"Add Habit"})]})]}):(0,em.jsxs)("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center gap-2 bg-black text-white py-3 rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-[1.02]",children:[(0,em.jsx)(m,{size:20,strokeWidth:2.5}),"Add Habit"]})})]}),(0,em.jsxs)("div",{className:"flex gap-2 pt-6 mt-6 border-t border-stone-200",children:[(0,em.jsx)("button",{onClick:n,className:"flex-1 px-4 py-2.5 border-2 border-[#333333] text-[#333333] rounded-lg hover:bg-stone-100 font-bold uppercase text-sm tracking-wider transition-colors",children:"Cancel"}),(0,em.jsx)("button",{onClick:async()=>{if(i.trim()&&l.length>0){const e=oe.map(e=>e.id===t.id?c(c({},e),{},{name:i.trim(),timeOfDay:o,days:l,habits:[...e.habits.filter(e=>!b.includes(e)),...y.map(e=>e.id)]}):e);if(ae(e),await Zp.updateRoutines(e),y.length>0){const e=[...le,...y];ce(e),await Zp.updateHabits(e)}if(b.length>0){const e=le.filter(e=>!b.includes(e.id));ce(e),await Zp.updateHabits(e)}n()}},className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:"Save Changes"})]})]})})})},Le=e=>{let{habit:t,isEditing:n,onEdit:i,onDelete:s,onSave:o,onCancel:a}=e;const[l,u]=(0,r.useState)(t.name),[h,d]=(0,r.useState)(t.description||""),[f,m]=(0,r.useState)(t.duration||""),[b,w]=(0,r.useState)(!!t.duration),[x,k]=(0,r.useState)(t.expectedCompletionTime||""),[_,E]=(0,r.useState)(!!t.expectedCompletionTime),S=(()=>{if(!K[t.id])return null;const e=K[t.id],n=Q[t.id],r=(Date.now()-e)/1e3/60;if(n){const e=Math.max(n-r,0);return{elapsed:Math.floor(r),remaining:Math.ceil(e),progress:Math.min(r/n*100,100),isCapped:!0}}return{elapsed:Math.floor(r),remaining:null,progress:null,isCapped:!1}})(),T=()=>{const e=b&&f?parseInt(f):null,n=_&&x?parseInt(x):null,r=c(c({},t),{},{name:l.trim(),description:h.trim(),duration:e,expectedCompletionTime:n});o(r)};return n?(0,em.jsxs)("div",{className:"border-2 border-blue-300 rounded-lg p-3 space-y-3",children:[(0,em.jsxs)("div",{className:"flex justify-between items-center",children:[(0,em.jsx)("h6",{className:"font-bold text-[#333333] text-sm uppercase tracking-wide",children:"Edit Habit"}),(0,em.jsxs)("div",{className:"flex gap-1",children:[(0,em.jsx)("button",{onClick:T,className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Save",children:(0,em.jsx)(g,{size:16,strokeWidth:2.5,className:"text-green-600"})}),(0,em.jsx)("button",{onClick:a,className:"p-1 hover:bg-red-100 rounded transition-colors",title:"Cancel",children:(0,em.jsx)(p,{size:16,strokeWidth:2.5,className:"text-red-600"})})]})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-xs font-bold text-[#333333] mb-1 uppercase tracking-wider",children:"Name *"}),(0,em.jsx)("input",{type:"text",value:l,onChange:e=>u(e.target.value),className:"w-full px-2 py-1 border border-stone-300 rounded text-sm focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-xs font-bold text-[#333333] mb-1 uppercase tracking-wider",children:"Why (optional)"}),(0,em.jsx)("textarea",{value:h,onChange:e=>d(e.target.value),className:"w-full px-2 py-1 border border-stone-300 rounded text-sm focus:outline-none focus:border-[#333333]",rows:"2"})]}),(0,em.jsxs)("div",{children:[(0,em.jsxs)("label",{className:"flex items-center gap-2 mb-1 cursor-pointer",children:[(0,em.jsx)("input",{type:"checkbox",checked:b,onChange:e=>w(e.target.checked),className:"w-3 h-3 text-[#333333] border border-stone-300 rounded focus:ring-[#333333] cursor-pointer"}),(0,em.jsx)("span",{className:"text-xs font-bold text-[#333333] uppercase tracking-wider",children:"Set Timer Cap"})]}),b&&(0,em.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,em.jsx)("input",{type:"number",value:f,onChange:e=>m(e.target.value),placeholder:"20",min:"1",max:"1440",className:"w-16 px-2 py-1 border border-stone-300 rounded text-sm focus:outline-none focus:border-[#333333]"}),(0,em.jsx)("span",{className:"text-xs text-[#333333] font-medium",children:"minutes"})]})]}),(0,em.jsxs)("div",{children:[(0,em.jsxs)("label",{className:"flex items-center gap-2 mb-1 cursor-pointer",children:[(0,em.jsx)("input",{type:"checkbox",checked:_,onChange:e=>E(e.target.checked),className:"w-3 h-3 text-[#333333] border border-stone-300 rounded focus:ring-[#333333] cursor-pointer"}),(0,em.jsx)("span",{className:"text-xs font-bold text-[#333333] uppercase tracking-wider",children:"Expected Time"})]}),_&&(0,em.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,em.jsx)("input",{type:"number",value:x,onChange:e=>k(e.target.value),placeholder:"15",min:"1",max:"1440",className:"w-16 px-2 py-1 border border-stone-300 rounded text-sm focus:outline-none focus:border-[#333333]"}),(0,em.jsx)("span",{className:"text-xs text-[#333333] font-medium",children:"minutes"})]})]})]}):(0,em.jsxs)("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-lg",children:[(0,em.jsxs)("div",{className:"flex-grow",children:[(0,em.jsx)("div",{className:"font-medium text-[#333333]",children:t.name}),t.description&&(0,em.jsx)("div",{className:"text-sm text-[#333333] opacity-70 italic",children:t.description}),t.duration&&(0,em.jsxs)("div",{className:"text-xs text-[#333333] opacity-50 font-mono",children:["Timer: ",t.duration,"m"]}),t.expectedCompletionTime&&(0,em.jsxs)("div",{className:"text-xs text-[#333333] opacity-50 font-mono",children:["Expected: ",t.expectedCompletionTime,"m"]}),S&&(0,em.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,em.jsx)("div",{className:"flex items-center gap-2",children:S.isCapped?(0,em.jsxs)(em.Fragment,{children:[(0,em.jsxs)("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 font-mono rounded",children:[S.remaining,"m remaining"]}),(0,em.jsxs)("span",{className:"text-xs text-[#333333] opacity-70",children:["(",S.elapsed,"m elapsed)"]})]}):(0,em.jsxs)("span",{className:"text-xs bg-green-500 text-white px-2 py-1 font-mono rounded",children:[S.elapsed,"m elapsed"]})}),S.isCapped&&(0,em.jsx)("div",{className:"w-full bg-stone-200 h-2 rounded-full",children:(0,em.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all",style:{width:"".concat(S.progress,"%")}})})]}),K[t.id]&&t.expectedCompletionTime&&(0,em.jsx)(nt,{habitId:t.id})]}),(0,em.jsxs)("div",{className:"flex items-center gap-1",children:[(0,em.jsx)("button",{onClick:i,className:"p-1 hover:bg-stone-200 rounded transition-colors",title:"Edit Habit",children:(0,em.jsx)(y,{size:16,strokeWidth:2.5,className:"text-[#333333] opacity-60"})}),(0,em.jsx)("button",{onClick:s,className:"p-1 hover:bg-red-100 rounded transition-colors",title:"Delete Habit",children:(0,em.jsx)(v,{size:16,strokeWidth:2.5,className:"text-red-600"})})]})]})},Me=e=>{let{habit:t,onClose:n}=e;const[i,s]=(0,r.useState)((null===t||void 0===t?void 0:t.name)||""),[o,a]=(0,r.useState)((null===t||void 0===t?void 0:t.description)||""),[l,u]=(0,r.useState)((null===t||void 0===t?void 0:t.duration)||""),[h,d]=(0,r.useState)(!(null===t||void 0===t||!t.duration)),[f,m]=(0,r.useState)((null===t||void 0===t?void 0:t.expectedCompletionTime)||""),[g,y]=(0,r.useState)(!(null===t||void 0===t||!t.expectedCompletionTime));return(0,em.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,em.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,em.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-stone-200",children:[(0,em.jsx)("h3",{className:"text-xl font-bold text-[#333333] uppercase tracking-wide",children:"Edit Habit"}),(0,em.jsx)("button",{onClick:n,className:"text-[#333333] hover:opacity-60",children:(0,em.jsx)(p,{size:24,strokeWidth:2.5})})]}),(0,em.jsxs)("div",{className:"space-y-4",children:[(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Name *"}),(0,em.jsx)("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"Morning meditation",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",autoFocus:!0})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("label",{className:"block text-sm font-bold text-[#333333] mb-2 uppercase tracking-wider",children:"Why (optional)"}),(0,em.jsx)("textarea",{value:o,onChange:e=>a(e.target.value),placeholder:"Why is this habit important?",className:"w-full px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]",rows:"3"})]}),(0,em.jsxs)("div",{children:[(0,em.jsxs)("label",{className:"flex items-center gap-2 mb-2 cursor-pointer",children:[(0,em.jsx)("input",{type:"checkbox",checked:h,onChange:e=>d(e.target.checked),className:"w-4 h-4 text-[#333333] border-2 border-stone-300 rounded focus:ring-[#333333] focus:ring-2 cursor-pointer"}),(0,em.jsx)("span",{className:"text-sm font-bold text-[#333333] uppercase tracking-wider",children:"Set Timer Cap"})]}),h&&(0,em.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,em.jsx)("input",{type:"number",value:l,onChange:e=>u(e.target.value),placeholder:"20",min:"1",max:"1440",className:"w-20 px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]"}),(0,em.jsx)("span",{className:"text-sm text-[#333333] font-medium",children:"minutes"})]})]}),(0,em.jsxs)("div",{children:[(0,em.jsxs)("label",{className:"flex items-center gap-2 mb-2 cursor-pointer",children:[(0,em.jsx)("input",{type:"checkbox",checked:g,onChange:e=>y(e.target.checked),className:"w-4 h-4 text-[#333333] border-2 border-stone-300 rounded focus:ring-[#333333] focus:ring-2 cursor-pointer"}),(0,em.jsx)("span",{className:"text-sm font-bold text-[#333333] uppercase tracking-wider",children:"Set Expected Completion Time"})]}),g&&(0,em.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,em.jsx)("input",{type:"number",value:f,onChange:e=>m(e.target.value),placeholder:"15",min:"1",max:"1440",className:"w-20 px-3 py-2 border-2 border-stone-300 rounded-lg focus:outline-none focus:border-[#333333]"}),(0,em.jsx)("span",{className:"text-sm text-[#333333] font-medium",children:"minutes"}),(0,em.jsx)("span",{className:"text-xs text-stone-500",children:"(for progress visualization)"})]})]}),(0,em.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,em.jsx)("button",{onClick:n,className:"flex-1 px-4 py-2.5 border-2 border-[#333333] text-[#333333] rounded-lg hover:bg-stone-100 font-bold uppercase text-sm tracking-wider transition-colors",children:"Cancel"}),(0,em.jsx)("button",{onClick:async()=>{if(i.trim()){const e=h&&l?parseInt(l):null,r=g&&f?parseInt(f):null,s=le.map(n=>n.id===t.id?c(c({},n),{},{name:i.trim(),description:o.trim(),duration:e,expectedCompletionTime:r}):n);ce(s),await Zp.updateHabits(s),n()}},className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:"Save Changes"})]})]})]})})},Ue=e=>{let{habitId:t,size:n=200,strokeWidth:r=8}=e;const i=Ze(t),s=$e(t),o=Xe(t),a=Je(t),l=(n-r)/2,c=2*l*Math.PI,u=c,h=c-i/100*c;return(0,em.jsxs)("div",{className:"relative cursor-pointer hover:scale-105 transition-transform duration-200",style:{width:n,height:n},onClick:()=>et(t),title:K[t]?"Tap to pause":void 0!==X[t]?"Tap to resume":"Tap to start",children:[(0,em.jsxs)("svg",{width:n,height:n,className:"transform -rotate-90",children:[(0,em.jsx)("circle",{cx:n/2,cy:n/2,r:l,stroke:"#e5e7eb",strokeWidth:r,fill:"transparent"}),(0,em.jsx)("circle",{cx:n/2,cy:n/2,r:l,stroke:s,strokeWidth:r,fill:"transparent",strokeDasharray:u,strokeDashoffset:h,strokeLinecap:"round",className:"transition-all duration-300 ease-in-out"})]}),(0,em.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,em.jsx)("div",{className:"text-4xl font-bold text-[#333333] font-mono",children:null!==o?o:"0:00"}),(0,em.jsx)("div",{className:"text-xs text-[#333333] opacity-60 uppercase tracking-wide mb-2",children:"countdown"===a?"remaining":"countup"===a?"elapsed":"overestimate"===a?"over":"ready"}),(0,em.jsx)("div",{className:"text-[#333333] opacity-70",children:K[t]?(0,em.jsx)(b,{size:16,strokeWidth:2.5}):(X[t],(0,em.jsx)(w,{size:16,strokeWidth:2.5,className:"ml-0.5"}))})]})]})},Fe=()=>{if(!ve)return null;const e=ve.habits[we],t=le.find(t=>t.id===e),n=De(),r=ke?(Date.now()-ke)/1e3/60:0;return(0,em.jsx)("div",{className:"min-h-screen bg-[#333333] text-white",children:(0,em.jsxs)("div",{className:"max-w-md mx-auto bg-white text-[#333333] min-h-screen flex flex-col",children:[(0,em.jsxs)("div",{className:"p-6 border-b border-stone-200",children:[(0,em.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,em.jsx)("h2",{className:"text-xl font-bold text-[#333333] uppercase tracking-wide",children:ve.name}),(0,em.jsx)("button",{onClick:ut,className:"p-2 hover:bg-stone-100 rounded-lg transition-colors",title:"Stop Routine",children:(0,em.jsx)(p,{size:20,strokeWidth:2.5,className:"text-[#333333]"})})]}),(0,em.jsxs)("div",{className:"flex items-center justify-between text-center",children:[(0,em.jsxs)("div",{children:[(0,em.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider",children:"Progress"}),(0,em.jsxs)("p",{className:"text-sm font-bold text-[#333333]",children:[we+1," / ",ve.habits.length]})]}),(0,em.jsxs)("div",{children:[(0,em.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider",children:"Total Time"}),(0,em.jsxs)("p",{className:"text-sm font-bold text-[#333333] font-mono",children:[Math.floor(r),"m ",Math.round(r%1*60),"s"]})]})]})]}),t&&(0,em.jsxs)("div",{className:"p-8 text-center",children:[(0,em.jsx)("h3",{className:"text-2xl font-bold text-[#333333] mb-2",children:t.name}),t.description&&(0,em.jsx)("p",{className:"text-sm text-[#333333] opacity-70 mb-8",children:t.description}),(0,em.jsx)("div",{className:"flex justify-center mb-8",children:(0,em.jsx)(Ue,{habitId:t.id,size:240,strokeWidth:10})}),(0,em.jsxs)("div",{className:"flex items-center justify-center gap-8 mb-8",children:[(0,em.jsx)("button",{onClick:ot,disabled:we<=0,className:"p-3 rounded-full bg-stone-100 hover:bg-stone-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous Habit",children:(0,em.jsx)(x,{size:24,strokeWidth:2.5,className:"text-[#333333]"})}),(0,em.jsx)("button",{onClick:()=>st(t.id),className:"p-4 rounded-full bg-green-500 hover:bg-green-600 transition-colors shadow-lg",title:"Mark Complete",children:(0,em.jsx)(k,{size:28,strokeWidth:2.5,className:"text-white"})}),(0,em.jsx)("button",{onClick:at,className:"p-3 rounded-full bg-stone-100 hover:bg-stone-200 transition-colors",title:"Next Habit",children:(0,em.jsx)(_,{size:24,strokeWidth:2.5,className:"text-[#333333]"})})]})]}),(0,em.jsxs)("div",{className:"p-6 border-t border-stone-200 flex-1 overflow-hidden flex flex-col",children:[(0,em.jsx)("h4",{className:"font-bold text-[#333333] mb-4 text-sm uppercase tracking-wide",children:"Upcoming Habits"}),(0,em.jsx)("div",{className:"space-y-2 flex-1 overflow-y-auto",children:ve.habits.map((e,t)=>{const r=le.find(t=>t.id===e);if(!r)return null;const{isComplete:i,habitTime:s}=(e=>{var t,r;return{isComplete:(null===(t=pe[n])||void 0===t?void 0:t[e])||!1,habitTime:null===(r=ge[n])||void 0===r?void 0:r[e]}})(e),o=t===we;return(0,em.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg transition-colors ".concat(o?"bg-blue-50 border border-blue-200":i?"bg-green-50 border border-green-200":"bg-stone-50 border border-stone-200"),children:[(0,em.jsxs)("div",{className:"flex items-center gap-3",children:[i?(0,em.jsx)(k,{className:"text-green-600",size:18,strokeWidth:2.5}):o?(0,em.jsx)("div",{className:"w-4 h-4 border-2 border-blue-500 rounded-full flex items-center justify-center",children:(0,em.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})}):(0,em.jsx)(p,{className:"text-[#333333] opacity-40",size:18,strokeWidth:2.5}),(0,em.jsx)("span",{className:"text-sm font-medium ".concat(i?"text-green-700":o?"text-blue-700":"text-[#333333]"),children:r.name})]}),(0,em.jsxs)("div",{className:"flex items-center gap-2",children:[i&&s&&(0,em.jsxs)("span",{className:"text-xs bg-green-200 text-green-800 px-2 py-1 font-mono rounded",children:[Math.round(10*s)/10,"m"]}),o&&(0,em.jsx)("span",{className:"text-xs bg-blue-200 text-blue-800 px-2 py-1 font-mono rounded",children:"Now"}),r.duration&&!i&&!o&&(0,em.jsxs)("span",{className:"text-xs bg-stone-200 text-stone-600 px-2 py-1 font-mono rounded",children:[r.duration,"m"]})]})]},e)})})]})]})})},Ve=()=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][s.getDay()],ze=()=>{const e=Math.floor((s-new Date(s.getFullYear(),0,0))/1e3/60/60/24);return ie[e%ie.length]},Be=()=>{const e=Ve(),t=oe.filter(t=>t.days.includes(e)),n={morning:0,afternoon:1,evening:2};return t.sort((e,t)=>n[e.timeOfDay]-n[t.timeOfDay])},He=e=>{var t;if(!oe.find(t=>t.id===e))return{completed:!1,totalTime:0,percentage:0};const n=(e=>{const t=oe.find(t=>t.id===e);if(!t||0===t.habits.length)return 0;const n=De(),r=t.habits.filter(e=>{var t;return(null===(t=pe[n])||void 0===t?void 0:t[e])||!1});return Math.round(r.length/t.habits.length*100)})(e),r=100===n,i=De(),s=null===(t=Te[i])||void 0===t?void 0:t[e];return{completed:r,totalTime:(null===s||void 0===s?void 0:s.totalTime)||0,percentage:n}},We=()=>{const e=Be(),t=s.getHours();let n;n=t<12?"morning":t<17?"afternoon":"evening";const r=e.find(e=>e.timeOfDay===n);if(r){if(!He(r.id).completed)return r}return e.find(e=>!He(e.id).completed)},qe=async e=>{var t;if(ve&&ve.habits[we]!==e)return;const n=De(),r=pe||{},i=(null===(t=r[n])||void 0===t?void 0:t[e])||!1;if(ve&&(!i&&K[e]&&Qe(e,!0),i&&!K[e])){const t=le.find(t=>t.id===e);t&&!t.duration&&Ge(e)}const s=c(c({},r),{},{[n]:c(c({},r[n]||{}),{},{[e]:!i})});me(s),await await Zp.updateHabitCompletions(s),ve&&ve.habits[we]===e&&st(e)},Ke=(e,t)=>{const n=Date.now();G(t=>c(c({},t),{},{[e]:n})),Y(n=>c(c({},n),{},{[e]:t}))},Ge=e=>{const t=Date.now();G(n=>c(c({},n),{},{[e]:t}))},Qe=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=K[e];Q[e];if(t&&n){const t=(Date.now()-n)/1e3/60,r=De(),i=ge||{},s=c(c({},i),{},{[r]:c(c({},i[r]||{}),{},{[e]:t})});ye(s),await Zp.updateHabitCompletionTimes(s)}G(t=>{const n=c({},t);return delete n[e],n}),Y(t=>{const n=c({},t);return delete n[e],n}),ve&&t&&ve.habits[we]===e&&st(e)},Ye=e=>{const t=K[e],n=Q[e];if(!t||!n)return null;const r=(Date.now()-t)/1e3/60,i=Math.max(n-r,0);return Math.ceil(i)},Xe=e=>{const t=K[e],n=X[e],r=Q[e];let i=0;if(t)i=(Date.now()-t)/1e3;else{if(!n)return null;i=n}if(r){const e=Math.max(60*r-i,0);if(e>0){const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))}{const e=Math.floor(i/60),t=Math.floor(i%60);return"".concat(e,":").concat(t.toString().padStart(2,"0"))}}{const e=Math.floor(i/60),t=Math.floor(i%60);return"".concat(e,":").concat(t.toString().padStart(2,"0"))}},Je=e=>{const t=K[e],n=X[e],r=Q[e];if(!t&&!n)return"ready";let i=0;t?i=(Date.now()-t)/1e3:n&&(i=n);if(r){return Math.max(60*r-i,0)>0?"countdown":"overestimate"}return"countup"},$e=e=>{switch(Je(e)){case"countdown":return"#10b981";case"countup":return"#3b82f6";case"overestimate":return"#ef4444";default:return"#6b7280"}},Ze=e=>{const t=K[e],n=X[e],r=Q[e];if(!t&&!n)return 0;let i=0;t?i=(Date.now()-t)/1e3:n&&(i=n);if(r){const e=60*r;return Math.min(i/e*100,100)}return Math.min(i/1800*100,100)},et=e=>{if(!ve)return;const t=le.find(t=>t.id===e);t&&(K[e]?lt():void 0!==X[e]?ct():t.duration?Ke(e,t.duration):Ge(e))},tt=e=>{const t=[];if(!ge||"object"!==typeof ge)return null;if(Object.keys(ge).forEach(n=>{ge[n]&&ge[n][e]&&t.push(ge[n][e])}),0===t.length)return null;const n=t.reduce((e,t)=>e+t,0)/t.length;return Math.round(10*n)/10},nt=e=>{let{habitId:t}=e;const n=(e=>{const t=le.find(t=>t.id===e);if(!t||!t.expectedCompletionTime)return null;const n=K[e];if(!n)return null;const r=(Date.now()-n)/1e3/60,i=t.expectedCompletionTime;return{elapsed:Math.floor(r),expectedTime:i,progress:Math.min(r/i*100,100),isOverExpected:r>i,overTime:Math.max(r-i,0)}})(t);if(!n)return null;const{elapsed:r,expectedTime:i,isOverExpected:s,overTime:o}=n;return(0,em.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,em.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,em.jsxs)("span",{className:"text-[#333333] opacity-70",children:[r,"m elapsed"]}),(0,em.jsxs)("span",{className:"font-mono ".concat(s?"text-red-600":"text-blue-600"),children:["Expected: ",i,"m"]})]}),(0,em.jsxs)("div",{className:"relative w-full bg-stone-200 h-3 rounded-full overflow-hidden",children:[(0,em.jsx)("div",{className:"absolute top-0 left-0 bg-blue-500 h-full transition-all duration-300",style:{width:"".concat(Math.min(r/i*100,100),"%")}}),s&&(0,em.jsx)("div",{className:"absolute top-0 bg-red-500 h-full transition-all duration-300",style:{left:"100%",width:"".concat(Math.min(o/i*100,50),"%")}})]}),s&&(0,em.jsxs)("div",{className:"text-xs text-red-600 font-mono",children:["+",Math.round(10*o)/10,"m over expected"]})]})},rt=e=>{let t=0,n=new Date(s);if(!pe||"object"!==typeof pe)return 0;for(;;){var r;const i=n.toISOString().split("T")[0];if(null===(r=pe[i])||void 0===r||!r[e])break;t++,n.setDate(n.getDate()-1)}return t},it=e=>{const t=oe.find(t=>t.id===e);if(!t)return;const n=De();let r=0;for(let i=0;i<t.habits.length;i++){var s;const e=t.habits[i];if(!((null===(s=pe[n])||void 0===s?void 0:s[e])||!1)){r=i;break}}be(t),xe(r),_e(Date.now()),Se(!1),i(!0);const o=t.habits[r],a=le.find(e=>e.id===o);a&&(a.duration?Ke(o,a.duration):Ge(o))},st=async e=>{if(!ve)return;const t=K[e];if(t){const n=(Date.now()-t)/1e3/60,r=De(),i=ge||{},s=c(c({},i),{},{[r]:c(c({},i[r]||{}),{},{[e]:n})});ye(s),await Zp.updateHabitCompletionTimes(s)}const n=De(),r=pe||{},i=c(c({},r),{},{[n]:c(c({},r[n]||{}),{},{[e]:!0})});me(i),await Zp.updateHabitCompletions(i),G(t=>{const n=c({},t);return delete n[e],n}),Y(t=>{const n=c({},t);return delete n[e],n});const s=we+1;if(s<ve.habits.length){xe(s);const e=ve.habits[s],t=le.find(t=>t.id===e);t&&(t.duration?Ke(e,t.duration):Ge(e))}else ht()},ot=()=>{if(!ve||we<=0)return;const e=ve.habits[we];K[e]&&(G(t=>{const n=c({},t);return delete n[e],n}),Y(t=>{const n=c({},t);return delete n[e],n}));xe(we-1)},at=()=>{if(!ve)return;const e=ve.habits[we];K[e]&&(G(t=>{const n=c({},t);return delete n[e],n}),Y(t=>{const n=c({},t);return delete n[e],n}));const t=we+1;if(t<ve.habits.length){xe(t);const e=ve.habits[t],n=le.find(t=>t.id===e);n&&(n.duration?Ke(e,n.duration):Ge(e))}else ht()},lt=()=>{if(!ve)return;const e=ve.habits[we];if(K[e]){const t=K[e],n=(Date.now()-t)/1e3;J(t=>c(c({},t),{},{[e]:n})),G(t=>{const n=c({},t);return delete n[e],n})}},ct=()=>{if(!ve)return;const e=ve.habits[we],t=X[e];if(void 0!==t){const n=Date.now()-1e3*t;G(t=>c(c({},t),{},{[e]:n})),J(t=>{const n=c({},t);return delete n[e],n})}else{const t=le.find(t=>t.id===e);t&&(t.duration?Ke(e,t.duration):Ge(e))}},ut=()=>{const e=null===ve||void 0===ve?void 0:ve.habits[we];e&&K[e]&&(G(t=>{const n=c({},t);return delete n[e],n}),Y(t=>{const n=c({},t);return delete n[e],n})),be(null),xe(0),_e(null),Se(!1),i(!1)},ht=async()=>{if(!ve||!ke)return;const e=(Date.now()-ke)/1e3/60,t=De(),n={};ve.habits.forEach(e=>{var r;const i=null===(r=ge[t])||void 0===r?void 0:r[e];i&&(n[e]=i)});const r=Te||{},s=c(c({},r),{},{[t]:c(c({},r[t]||{}),{},{[ve.id]:{totalTime:e,startTime:new Date(ke).toISOString(),endTime:(new Date).toISOString(),completed:!0,habitTimes:n}})});Ce(s),await Zp.updateRoutineCompletions(s),be(null),xe(0),_e(null),Se(!1),i(!1)},dt=()=>{(()=>{const e=s.getHours(),t=Ve(),n=oe.filter(e=>e.days.includes(t));e<12?n.find(e=>"morning"===e.timeOfDay)||n[0]:e<17?n.find(e=>"afternoon"===e.timeOfDay)||n[0]:n.find(e=>"evening"===e.timeOfDay)||n[0]})();const e=ue.find(e=>!e.completed)||null,t=de.filter(e=>e.addedAt===De()),n=(()=>{const e=Math.floor((s-new Date(s.getFullYear(),0,1))/6048e5);return se[e%se.length]})();return(0,em.jsxs)("div",{className:"space-y-4",children:[(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsx)("h2",{className:"text-lg font-bold text-[#333333] mb-2",children:"Today"}),(0,em.jsx)("p",{className:"text-sm text-[#333333] opacity-70 font-mono",children:s.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}).toUpperCase()}),O&&(0,em.jsxs)("p",{className:"text-xs text-[#333333] opacity-50 font-mono mt-1",children:["User: ",O.name]})]}),(0,em.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,em.jsxs)("p",{className:"text-base leading-relaxed text-[#333333] font-serif italic",children:['"',ze(),'"']})}),(0,em.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow-md border-2 border-[#333333]",children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333] opacity-70 mb-2 tracking-wider text-sm uppercase",children:"This Week's Virtue"}),(0,em.jsx)("p",{className:"text-xl font-bold mb-1 text-[#333333]",children:n.virtue}),(0,em.jsx)("p",{className:"text-sm text-[#333333]",children:n.focus})]}),Be().map(e=>{const t=Ne.has(e.id),n=He(e.id);return(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md",children:[(0,em.jsxs)("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-stone-50 transition-colors",onClick:()=>{return t=e.id,void Ie(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},children:[(0,em.jsxs)("div",{className:"flex items-center gap-3",children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333] text-lg uppercase tracking-wide",children:e.name}),n.completed&&(0,em.jsxs)("span",{className:"text-sm text-stone-600 font-mono",children:[Math.round(10*n.totalTime)/10,"m total"]})]}),(0,em.jsxs)("div",{className:"flex items-center gap-2",children:[(0,em.jsxs)("span",{className:"text-sm font-mono px-2 py-1 rounded ".concat(n.completed?"bg-green-200 text-green-800":n.percentage>0?"bg-blue-200 text-blue-800":"bg-stone-200 text-stone-600"),children:[n.percentage,"%"]}),(0,em.jsx)(E,{size:20,strokeWidth:2.5,className:"text-[#333333] transition-transform ".concat(t?"rotate-90":"")})]})]}),t&&(0,em.jsxs)("div",{className:"px-4 pb-4",children:[(0,em.jsxs)("div",{className:"space-y-2",children:[e.habits.map(e=>{var t,n;const r=le.find(t=>t.id===e);if(!r)return null;const i=(null===(t=pe[De()])||void 0===t?void 0:t[e])||!1,s=rt(e);return(0,em.jsxs)("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-lg cursor-pointer hover:bg-stone-100 transition-colors",onClick:()=>qe(e),children:[(0,em.jsxs)("div",{className:"flex items-center gap-3",children:[i?(0,em.jsx)(S,{className:"text-[#333333]",size:20,strokeWidth:2.5}):(0,em.jsx)(T,{className:"text-[#333333] opacity-40",size:20,strokeWidth:2.5}),(0,em.jsxs)("div",{className:"flex flex-col",children:[(0,em.jsx)("span",{className:i?"line-through text-[#333333] opacity-50":"text-[#333333] font-medium",children:r.name}),i&&(null===(n=ge[De()])||void 0===n?void 0:n[e])&&(0,em.jsxs)("span",{className:"text-xs text-green-600 font-mono",children:["Completed in ",Math.round(10*ge[De()][e])/10,"m"]})]})]}),(0,em.jsxs)("div",{className:"flex items-center gap-2",children:[s>0&&(0,em.jsxs)("span",{className:"text-xs bg-[#333333] text-white px-2 py-1 font-mono font-bold rounded",children:[s,"D"]}),ve&&(r.duration||r.expectedCompletionTime||K[r.id])&&(0,em.jsxs)("div",{className:"flex items-center gap-1",children:[K[r.id]?(0,em.jsxs)(em.Fragment,{children:[r.duration?(0,em.jsxs)("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 font-mono rounded",children:[Ye(r.id),"m"]}):(0,em.jsxs)("span",{className:"text-xs bg-green-500 text-white px-2 py-1 font-mono rounded",children:[Math.floor((Date.now()-K[r.id])/1e3/60),"m"]}),(0,em.jsx)("button",{onClick:e=>{e.stopPropagation(),Qe(r.id,!0),qe(r.id)},className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Complete Habit",children:(0,em.jsx)(g,{size:14,strokeWidth:2.5,className:"text-green-600"})}),(0,em.jsx)("button",{onClick:e=>{e.stopPropagation(),Qe(r.id,!1)},className:"p-1 hover:bg-red-100 rounded transition-colors",title:"Stop Timer",children:(0,em.jsx)(p,{size:14,strokeWidth:2.5,className:"text-red-600"})})]}):r.duration?(0,em.jsx)("button",{onClick:e=>{e.stopPropagation(),Ke(r.id,r.duration)},className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Start Timer",children:(0,em.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"})}):r.expectedCompletionTime?(0,em.jsx)("button",{onClick:e=>{e.stopPropagation(),Ge(r.id)},className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Start Timer",children:(0,em.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"})}):null,tt(r.id)&&(0,em.jsxs)("span",{className:"text-xs bg-stone-200 text-[#333333] px-2 py-1 font-mono rounded",children:["Avg: ",tt(r.id),"m"]})]}),ve&&K[r.id]&&r.expectedCompletionTime&&(0,em.jsx)(nt,{habitId:r.id})]})]},e)}),0===e.habits.length&&(0,em.jsx)("p",{className:"text-[#333333] opacity-50 text-sm",children:"No habits in this routine yet."})]}),(t=>{const n=De(),r=null===(t=Te[n])||void 0===t?void 0:t[e.id];return r&&r.completed?(0,em.jsxs)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,em.jsxs)("div",{className:"flex items-center justify-between",children:[(0,em.jsx)("span",{className:"text-sm font-medium text-green-800",children:"Routine Completed Today"}),(0,em.jsxs)("span",{className:"text-sm font-mono text-green-600",children:[Math.round(10*r.totalTime)/10,"m total"]})]}),r.startTime&&r.endTime&&(0,em.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:[new Date(r.startTime).toLocaleTimeString()," - ",new Date(r.endTime).toLocaleTimeString()]})]}):null})(),e.habits.length>0&&!n.completed&&(0,em.jsxs)("button",{onClick:()=>it(e.id),disabled:null!==ve,className:"mt-4 w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[(0,em.jsx)(w,{size:20,strokeWidth:2.5}),ve?"Routine In Progress":"Start Routine"]})]})]},e.id)}),e&&(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Active Goal"}),(0,em.jsx)("p",{className:"text-lg font-bold mb-3 text-[#333333]",children:e.name}),(0,em.jsx)("div",{className:"w-full bg-stone-200 h-2 rounded-full mb-2",children:(0,em.jsx)("div",{className:"bg-[#333333] h-2 rounded-full transition-all",style:{width:"".concat(e.tasks.length>0?e.tasks.filter(e=>e.completed).length/e.tasks.length*100:0,"%")}})}),(0,em.jsxs)("p",{className:"text-xs text-[#333333] opacity-70 font-mono uppercase tracking-wider",children:[e.tasks.filter(e=>e.completed).length," / ",e.tasks.length," complete"]})]}),(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Today's Tasks"}),(0,em.jsxs)("div",{className:"space-y-2 mb-3",children:[t.map(e=>(0,em.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-stone-50 rounded-lg",children:[(0,em.jsxs)("div",{className:"flex-grow flex items-center gap-3 cursor-pointer",onClick:()=>(async e=>{const t=de.map(t=>t.id===e?c(c({},t),{},{completed:!t.completed}):t);fe(t),await Zp.updateTodos(t)})(e.id),children:[e.completed?(0,em.jsx)(S,{className:"text-[#333333]",size:18,strokeWidth:2.5}):(0,em.jsx)(T,{className:"text-[#333333] opacity-40",size:18,strokeWidth:2.5}),(0,em.jsx)("span",{className:e.completed?"line-through text-[#333333] opacity-50 text-sm":"text-[#333333] text-sm",children:e.name})]}),(0,em.jsx)("button",{onClick:()=>(async e=>{const t=de.filter(t=>t.id!==e);fe(t),await Zp.updateTodos(t)})(e.id),className:"text-[#333333] opacity-40 hover:text-[#333333] hover:opacity-100",children:(0,em.jsx)(p,{size:16,strokeWidth:2.5})})]},e.id)),0===t.length&&(0,em.jsx)("p",{className:"text-[#333333] opacity-50 text-sm",children:"No tasks for today."})]}),(0,em.jsxs)("button",{onClick:()=>{const e=prompt("New todo item:");e&&async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n={id:Date.now(),name:e,completed:!1,goalId:t,addedAt:De()},r=[...de,n];fe(r),await Zp.updateTodos(r)}(e)},className:"w-full flex items-center justify-center gap-2 bg-black text-white py-3 rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-[1.02]",children:[(0,em.jsx)(m,{size:20,strokeWidth:2.5}),"Add Task"]})]})]})},ft=()=>{const[e,t]=(0,r.useState)(null);return $?(0,em.jsx)(mt,{onClose:()=>Z(!1)}):(0,em.jsxs)("div",{className:"space-y-4",children:[(0,em.jsxs)("div",{className:"flex items-center justify-between",children:[(0,em.jsx)("h2",{className:"text-2xl font-bold text-[#333333] uppercase tracking-wide",children:"Routines"}),(0,em.jsxs)("button",{onClick:()=>Z(!0),className:"flex items-center gap-2 bg-black text-white px-4 py-2 rounded-lg hover:bg-[#333333] font-bold uppercase text-xs tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:[(0,em.jsx)(C,{size:18,strokeWidth:2.5}),"History"]})]}),oe.map(e=>(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,em.jsxs)("div",{className:"flex items-center gap-3",children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333] uppercase tracking-wide",children:e.name}),(0,em.jsx)("button",{onClick:()=>{z(e),F(!0)},className:"p-1 hover:bg-stone-100 rounded transition-colors",title:"Edit Routine",children:(0,em.jsx)(y,{size:16,strokeWidth:2.5,className:"text-[#333333] opacity-60"})})]}),(0,em.jsx)("span",{className:"text-xs bg-[#333333] text-white px-2 py-1 font-mono rounded",children:e.days.map(e=>e.substring(0,3).toUpperCase()).join(" ")})]}),(0,em.jsx)("div",{className:"mb-2",children:(0,em.jsx)("span",{className:"text-xs bg-stone-200 text-[#333333] px-2 py-1 font-mono rounded",children:e.timeOfDay.toUpperCase()})}),(0,em.jsxs)("div",{className:"space-y-2",children:[e.habits.map(e=>{var t;const n=le.find(t=>t.id===e);if(!n)return null;const r=(null===(t=pe[De()])||void 0===t?void 0:t[e])||!1,i=rt(e);return(0,em.jsxs)("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-lg hover:bg-stone-100 transition-colors",children:[(0,em.jsxs)("div",{className:"flex-grow flex items-center gap-3 cursor-pointer",onClick:()=>qe(e),children:[r?(0,em.jsx)(S,{className:"text-[#333333]",size:20,strokeWidth:2.5}):(0,em.jsx)(T,{className:"text-[#333333] opacity-40",size:20,strokeWidth:2.5}),(0,em.jsx)("span",{className:r?"line-through text-[#333333] opacity-50":"text-[#333333] font-medium",children:n.name})]}),(0,em.jsxs)("div",{className:"flex items-center gap-2",children:[i>0&&(0,em.jsxs)("span",{className:"text-xs bg-[#333333] text-white px-2 py-1 font-mono font-bold rounded",children:[i,"D"]}),ve&&(n.duration||K[n.id])&&(0,em.jsxs)("div",{className:"flex items-center gap-1",children:[K[n.id]?(0,em.jsxs)(em.Fragment,{children:[n.duration?(0,em.jsxs)("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 font-mono rounded",children:[Ye(n.id),"m"]}):(0,em.jsxs)("span",{className:"text-xs bg-green-500 text-white px-2 py-1 font-mono rounded",children:[Math.floor((Date.now()-K[n.id])/1e3/60),"m"]}),(0,em.jsx)("button",{onClick:e=>{e.stopPropagation(),Qe(n.id,!0),qe(n.id)},className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Complete Habit",children:(0,em.jsx)(g,{size:14,strokeWidth:2.5,className:"text-green-600"})}),(0,em.jsx)("button",{onClick:e=>{e.stopPropagation(),Qe(n.id,!1)},className:"p-1 hover:bg-red-100 rounded transition-colors",title:"Stop Timer",children:(0,em.jsx)(p,{size:14,strokeWidth:2.5,className:"text-red-600"})})]}):n.duration?(0,em.jsx)("button",{onClick:e=>{e.stopPropagation(),Ke(n.id,n.duration)},className:"p-1 hover:bg-green-100 rounded transition-colors",title:"Start Timer",children:(0,em.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"})}):null,tt(n.id)&&(0,em.jsxs)("span",{className:"text-xs bg-stone-200 text-[#333333] px-2 py-1 font-mono rounded",children:["Avg: ",tt(n.id),"m"]})]}),(0,em.jsx)("button",{onClick:e=>{e.stopPropagation(),q(n),H(!0)},className:"p-1 hover:bg-stone-200 rounded transition-colors",title:"Edit Habit",children:(0,em.jsx)(y,{size:16,strokeWidth:2.5,className:"text-[#333333] opacity-60"})})]})]},e)}),0===e.habits.length&&(0,em.jsx)("p",{className:"text-[#333333] opacity-50 text-sm text-center py-4",children:"No habits in this routine yet."})]}),e.habits.length>0&&(0,em.jsx)("div",{className:"mt-3",children:(0,em.jsxs)("button",{onClick:()=>it(e.id),disabled:null!==ve,className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[(0,em.jsx)(w,{size:20,strokeWidth:2.5}),ve?"Routine In Progress":"Start Routine"]})})]},e.id))]})},pt=()=>{const[e,t]=(0,r.useState)(null);return(0,em.jsxs)("div",{className:"space-y-4",children:[(0,em.jsxs)("div",{className:"flex items-center justify-between",children:[(0,em.jsx)("h2",{className:"text-2xl font-bold text-[#333333] uppercase tracking-wide",children:"Goals"}),(0,em.jsxs)("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-black text-white px-5 py-2.5 rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-105",children:[(0,em.jsx)(m,{size:20,strokeWidth:2.5}),"New Goal"]})]}),ue.map(n=>(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>t(e===n.id?null:n.id),children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333]",children:n.name}),(0,em.jsx)(E,{className:"transform transition-transform text-[#333333] ".concat(e===n.id?"rotate-90":""),size:20,strokeWidth:2.5})]}),n.tasks.length>0&&(0,em.jsxs)("div",{className:"mt-3",children:[(0,em.jsx)("div",{className:"w-full bg-stone-200 h-2 rounded-full",children:(0,em.jsx)("div",{className:"bg-[#333333] h-2 rounded-full transition-all",style:{width:"".concat(n.tasks.filter(e=>e.completed).length/n.tasks.length*100,"%")}})}),(0,em.jsxs)("p",{className:"text-xs text-[#333333] opacity-70 mt-1 font-mono uppercase tracking-wider",children:[n.tasks.filter(e=>e.completed).length," / ",n.tasks.length," complete"]})]}),e===n.id&&(0,em.jsxs)("div",{className:"mt-4 space-y-2",children:[n.tasks.map(e=>(0,em.jsxs)("div",{className:"flex items-center gap-2",children:[(0,em.jsxs)("div",{className:"flex-grow flex items-center gap-2 p-2 bg-stone-50 rounded-lg cursor-pointer",onClick:()=>(async(e,t)=>{const n=ue.map(n=>n.id===e?c(c({},n),{},{tasks:n.tasks.map(e=>e.id===t?c(c({},e),{},{completed:!e.completed}):e)}):n);he(n),await Zp.updateGoals(n)})(n.id,e.id),children:[e.completed?(0,em.jsx)(S,{className:"text-[#333333]",size:18,strokeWidth:2.5}):(0,em.jsx)(T,{className:"text-[#333333] opacity-40",size:18,strokeWidth:2.5}),(0,em.jsx)("span",{className:e.completed?"line-through text-[#333333] opacity-50 text-sm":"text-[#333333] text-sm",children:e.name})]}),(0,em.jsx)("button",{onClick:()=>(async(e,t)=>{const n={id:Date.now(),name:e.name,completed:!1,goalId:t,addedAt:De()},r=[...de,n];fe(r),await Zp.updateTodos(r)})(e,n.id),className:"bg-stone-600 text-white px-2 py-1 text-xs rounded hover:bg-stone-700 transition-colors font-mono uppercase tracking-wider",children:"\u2192"})]},e.id)),(0,em.jsxs)("button",{onClick:()=>{f(n.id),h(!0)},className:"w-full flex items-center justify-center gap-2 bg-black text-white py-2.5 rounded-lg hover:bg-[#333333] font-bold uppercase text-sm tracking-wider mt-3 shadow-md transition-all hover:shadow-lg hover:scale-[1.02]",children:[(0,em.jsx)(m,{size:18,strokeWidth:2.5}),"Add Task"]})]})]},n.id)),0===ue.length&&(0,em.jsx)("div",{className:"bg-white rounded-xl shadow-md p-8 text-center",children:(0,em.jsx)("p",{className:"text-[#333333] opacity-50 uppercase text-sm tracking-wide",children:"No goals yet"})})]})},mt=e=>{let{onClose:t}=e;const[n,i]=(0,r.useState)(new Date),[s,o]=(0,r.useState)("day"),a=e=>{const t=new Date(n);t.setDate(t.getDate()+e),i(t)},l=e=>e.toISOString().split("T")[0],u=e=>{const t=l(e),n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][e.getDay()],r=oe.filter(e=>e.days.includes(n));return le.filter(e=>r.some(t=>t.habits.includes(e.id))).map(e=>{var n;return c(c({},e),{},{completed:(null===(n=pe[t])||void 0===n?void 0:n[e.id])||!1})})},h=e=>{const t=u(e);if(0===t.length)return 0;const n=t.filter(e=>e.completed).length;return Math.round(n/t.length*100)},d=(l(n),u(n)),f=h(n),m=(()=>{const e=[];for(let t=6;t>=0;t--){const r=new Date(n);r.setDate(r.getDate()-t),e.push(r)}return e})();return(0,em.jsxs)("div",{className:"space-y-4",children:[(0,em.jsxs)("div",{className:"flex items-center justify-between",children:[(0,em.jsx)("h2",{className:"text-2xl font-bold text-[#333333] uppercase tracking-wide",children:"History"}),(0,em.jsxs)("button",{onClick:t,className:"flex items-center gap-2 bg-stone-200 text-[#333333] px-4 py-2 rounded-lg hover:bg-stone-300 font-bold uppercase text-xs tracking-wider transition-all",children:[(0,em.jsx)(p,{size:18,strokeWidth:2.5}),"Close"]})]}),(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-3 flex gap-2",children:[(0,em.jsx)("button",{onClick:()=>o("day"),className:"flex-1 py-2 rounded-lg font-bold uppercase text-sm tracking-wider transition-all ".concat("day"===s?"bg-black text-white":"bg-stone-100 text-[#333333]"),children:"Day View"}),(0,em.jsx)("button",{onClick:()=>o("week"),className:"flex-1 py-2 rounded-lg font-bold uppercase text-sm tracking-wider transition-all ".concat("week"===s?"bg-black text-white":"bg-stone-100 text-[#333333]"),children:"Week View"})]}),"day"===s?(0,em.jsxs)(em.Fragment,{children:[(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,em.jsx)("button",{onClick:()=>a(-1),className:"p-2 hover:bg-stone-100 rounded-lg transition-colors",children:(0,em.jsx)(N,{size:24,strokeWidth:2.5,className:"text-[#333333]"})}),(0,em.jsxs)("div",{className:"text-center",children:[(0,em.jsx)("p",{className:"text-lg font-bold text-[#333333]",children:n.toLocaleDateString("en-US",{weekday:"long"})}),(0,em.jsx)("p",{className:"text-sm text-[#333333] opacity-70 font-mono",children:n.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),(0,em.jsx)("button",{onClick:()=>a(1),className:"p-2 hover:bg-stone-100 rounded-lg transition-colors",disabled:l(n)===l(new Date),children:(0,em.jsx)(E,{size:24,strokeWidth:2.5,className:l(n)===l(new Date)?"text-[#333333] opacity-30":"text-[#333333]"})})]}),(0,em.jsx)("button",{onClick:()=>i(new Date),className:"w-full py-2 bg-stone-100 text-[#333333] rounded-lg hover:bg-stone-200 font-bold uppercase text-xs tracking-wider transition-colors",children:"Today"})]}),(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Completion Rate"}),(0,em.jsxs)("div",{className:"flex items-center gap-4",children:[(0,em.jsx)("div",{className:"flex-grow",children:(0,em.jsx)("div",{className:"w-full bg-stone-200 h-4 rounded-full",children:(0,em.jsx)("div",{className:"bg-black h-4 rounded-full transition-all flex items-center justify-end pr-2",style:{width:"".concat(f,"%")},children:f>15&&(0,em.jsxs)("span",{className:"text-white font-bold text-xs",children:[f,"%"]})})})}),f<=15&&(0,em.jsxs)("span",{className:"font-bold text-lg text-[#333333] font-mono",children:[f,"%"]})]}),(0,em.jsxs)("p",{className:"text-xs text-[#333333] opacity-70 mt-2 font-mono uppercase tracking-wider",children:[d.filter(e=>e.completed).length," / ",d.length," habits completed"]})]}),(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Habits"}),(0,em.jsx)("div",{className:"space-y-2",children:d.length>0?d.map(e=>(0,em.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-stone-50 rounded-lg",children:[e.completed?(0,em.jsx)(S,{className:"text-black",size:20,strokeWidth:2.5}):(0,em.jsx)(T,{className:"text-[#333333] opacity-40",size:20,strokeWidth:2.5}),(0,em.jsx)("span",{className:e.completed?"text-[#333333] font-medium":"text-[#333333] opacity-50",children:e.name})]},e.id)):(0,em.jsx)("p",{className:"text-[#333333] opacity-50 text-sm text-center py-4",children:"No habits scheduled for this day"})})]}),(()=>{const e=(e=>{const t=l(e);return Te[t]||{}})(n),t=Object.keys(e);return t.length>0?(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Routine Completions"}),(0,em.jsx)("div",{className:"space-y-2",children:t.map(t=>{const n=oe.find(e=>e.id===parseInt(t)),r=e[t];return n&&r?(0,em.jsxs)("div",{className:"p-3 bg-stone-50 rounded-lg",children:[(0,em.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,em.jsx)("span",{className:"font-medium text-[#333333]",children:n.name}),(0,em.jsx)("span",{className:"text-xs px-2 py-1 rounded font-mono ".concat(r.completed?"bg-green-200 text-green-800":"bg-orange-200 text-orange-800"),children:r.completed?"Completed":"Abandoned"})]}),(0,em.jsxs)("div",{className:"text-sm text-[#333333] opacity-70",children:[(0,em.jsxs)("p",{children:["Total Time: ",Math.round(10*r.totalTime)/10,"m"]}),r.startTime&&(0,em.jsxs)("p",{children:["Started: ",new Date(r.startTime).toLocaleTimeString()]}),r.endTime&&(0,em.jsxs)("p",{children:["Finished: ",new Date(r.endTime).toLocaleTimeString()]})]})]},t):null})})]}):null})()]}):(0,em.jsxs)(em.Fragment,{children:[(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333] mb-4 text-sm uppercase tracking-wide",children:"Last 7 Days"}),(0,em.jsx)("div",{className:"space-y-3",children:m.map((e,t)=>{const n=u(e),r=h(e),i=l(e)===l(new Date);return(0,em.jsxs)("div",{className:"p-3 rounded-lg ".concat(i?"bg-stone-100 border-2 border-[#333333]":"bg-stone-50"),children:[(0,em.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,em.jsxs)("div",{children:[(0,em.jsx)("p",{className:"font-bold text-[#333333] text-sm",children:e.toLocaleDateString("en-US",{weekday:"short"})}),(0,em.jsx)("p",{className:"text-xs text-[#333333] opacity-70 font-mono",children:e.toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),(0,em.jsxs)("div",{className:"text-right",children:[(0,em.jsxs)("p",{className:"font-bold text-lg text-[#333333] font-mono",children:[r,"%"]}),(0,em.jsxs)("p",{className:"text-xs text-[#333333] opacity-70",children:[n.filter(e=>e.completed).length,"/",n.length]})]})]}),(0,em.jsx)("div",{className:"w-full bg-stone-200 h-2 rounded-full",children:(0,em.jsx)("div",{className:"bg-black h-2 rounded-full transition-all",style:{width:"".concat(r,"%")}})})]},t)})})]}),(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Week Summary"}),(0,em.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,em.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,em.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[Math.round(m.reduce((e,t)=>e+h(t),0)/7),"%"]}),(0,em.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Avg Rate"})]}),(0,em.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,em.jsx)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:m.filter(e=>100===h(e)).length}),(0,em.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Perfect Days"})]})]})]}),(0,em.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4",children:[(0,em.jsx)("h3",{className:"font-bold text-[#333333] mb-3 text-sm uppercase tracking-wide",children:"Routine Statistics"}),(()=>{const e=(()=>{const e=Object.values(Te).flatMap(e=>Object.values(e));if(0===e.length)return{totalRoutines:0,completedRoutines:0,averageTime:0,totalTime:0};const t=e.filter(e=>e.completed),n=e.reduce((e,t)=>e+(t.totalTime||0),0),r=t.length>0?t.reduce((e,t)=>e+(t.totalTime||0),0)/t.length:0;return{totalRoutines:e.length,completedRoutines:t.length,averageTime:Math.round(10*r)/10,totalTime:Math.round(10*n)/10}})();return(0,em.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,em.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,em.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[e.completedRoutines,"/",e.totalRoutines]}),(0,em.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Completed"})]}),(0,em.jsxs)("div",{className:"text-center p-3 bg-stone-50 rounded-lg",children:[(0,em.jsxs)("p",{className:"text-2xl font-bold text-[#333333] font-mono",children:[e.averageTime,"m"]}),(0,em.jsx)("p",{className:"text-xs text-[#333333] opacity-70 uppercase tracking-wider mt-1",children:"Avg Time"})]})]})})()]})]})]})},gt=()=>n?null:(0,em.jsx)("div",{className:"fixed bottom-0 left-0 right-0 backdrop-blur-sm bg-white/95 shadow-lg border-t border-stone-200 z-50 pb-safe",children:(0,em.jsxs)("div",{className:"max-w-md mx-auto flex justify-around py-3",children:[(0,em.jsxs)("button",{onClick:()=>t("dashboard"),className:"flex flex-col items-center p-3 min-h-[68px] justify-center transition-all duration-200 ".concat("dashboard"===e?"text-[#333333] scale-105":"text-[#333333] opacity-40 hover:opacity-70"),children:[(0,em.jsx)(I,{size:24,strokeWidth:2.5}),(0,em.jsx)("span",{className:"text-xs mt-1 font-mono uppercase tracking-wider",children:"Home"})]}),(0,em.jsxs)("button",{onClick:()=>t("routines"),className:"flex flex-col items-center p-3 min-h-[68px] justify-center transition-all duration-200 ".concat("routines"===e?"text-[#333333] scale-105":"text-[#333333] opacity-40 hover:opacity-70"),children:[(0,em.jsx)(A,{size:24,strokeWidth:2.5}),(0,em.jsx)("span",{className:"text-xs mt-1 font-mono uppercase tracking-wider",children:"Routines"})]}),(0,em.jsxs)("button",{onClick:()=>t("goals"),className:"flex flex-col items-center p-3 min-h-[68px] justify-center transition-all duration-200 ".concat("goals"===e?"text-[#333333] scale-105":"text-[#333333] opacity-40 hover:opacity-70"),children:[(0,em.jsx)(R,{size:24,strokeWidth:2.5}),(0,em.jsx)("span",{className:"text-xs mt-1 font-mono uppercase tracking-wider",children:"Goals"})]})]})});return L?(0,em.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 to-stone-100 flex items-center justify-center",children:(0,em.jsxs)("div",{className:"text-center",children:[(0,em.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#333333] mx-auto mb-4"}),(0,em.jsx)("p",{className:"text-[#333333] font-medium",children:"Loading your habits..."})]})}):(0,em.jsx)("div",{className:"min-h-screen bg-stone-50",children:(0,em.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,em.jsx)("div",{className:"pt-4 ".concat(n?"pb-0":"pb-20"),children:n?(0,em.jsx)(Fe,{}):(0,em.jsxs)("div",{className:"p-4",children:["dashboard"===e&&(0,em.jsx)(dt,{}),"routines"===e&&(0,em.jsx)(ft,{}),"goals"===e&&(0,em.jsx)(pt,{})]})}),(0,em.jsx)(gt,{}),ne&&(0,em.jsx)(UserManager,{onUserSelect:e=>{j(e),e&&(Ae(),re(!1))},onClose:()=>re(!1)}),a&&(0,em.jsx)(Pe,{onClose:()=>l(!1)}),u&&(0,em.jsx)(Oe,{goalId:d,onClose:()=>{h(!1),f(null)}}),U&&(0,em.jsx)(je,{routine:V,onClose:()=>{F(!1),z(null)}}),B&&(0,em.jsx)(Me,{habit:W,onClose:()=>{H(!1),q(null)}})]})})},nm=f("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),rm=f("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),im=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{$p.init();const e=$p.onAuthStateChanged(e=>{i(e),o(!1)});return e},[]);const c=async()=>{try{await $p.signInWithGoogle()}catch(om){console.error("Sign in failed:",om),om.message.includes("Firebase is not configured")?alert("Firebase is not configured. Please set up your Firebase project and environment variables."):alert("Sign in failed. Please try again.")}};return(0,r.useEffect)(()=>{const e=e=>{a&&!e.target.closest(".relative")&&l(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[a]),s?(0,em.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 to-stone-100 flex items-center justify-center",children:(0,em.jsxs)("div",{className:"text-center",children:[(0,em.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#333333] mx-auto mb-4"}),(0,em.jsx)("p",{className:"text-[#333333] font-medium",children:"Loading..."})]})}):n?(0,em.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 to-stone-100",children:[(0,em.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-black shadow-lg border-b border-gray-800 z-50",children:(0,em.jsx)("div",{className:"max-w-md mx-auto px-4",children:(0,em.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,em.jsx)("div",{className:"flex items-center",children:(0,em.jsx)("img",{src:"/agm_logo_white.png",alt:"AGM Logo",className:"h-10 w-10 sm:h-10 sm:w-10 object-contain"})}),(0,em.jsx)("div",{className:"flex-1 flex justify-center",children:(0,em.jsx)("h1",{className:"text-sm sm:text-lg font-bold text-white tracking-tight",children:"GROWTH TRACKER"})}),(0,em.jsxs)("div",{className:"relative",children:[(0,em.jsx)("button",{onClick:()=>l(!a),className:"w-9 h-9 bg-white rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,em.jsx)(nm,{size:18,strokeWidth:2.5,className:"text-black"})}),a&&(0,em.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl border-2 border-stone-200 z-50",children:[(0,em.jsxs)("div",{className:"p-4 border-b border-stone-200",children:[(0,em.jsx)("p",{className:"font-bold text-[#333333]",children:n.name}),(0,em.jsx)("p",{className:"text-sm text-[#333333] opacity-70",children:n.email})]}),(0,em.jsx)("div",{className:"border-t border-stone-200 py-2",children:(0,em.jsxs)("button",{onClick:()=>{l(!1),(async()=>{try{await $p.signOut()}catch(om){console.error("Sign out failed:",om),alert("Sign out failed. Please try again.")}})()},className:"w-full px-4 py-3 text-left hover:bg-red-50 flex items-center gap-3 text-red-600",children:[(0,em.jsx)(rm,{size:18,strokeWidth:2.5}),(0,em.jsx)("span",{className:"font-medium text-sm",children:"Sign Out"})]})})]})]})]})})}),(0,em.jsx)("div",{className:"max-w-md mx-auto px-4 pt-16 pb-8",children:t})]}):(0,em.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 to-stone-100 flex items-center justify-center p-4",children:(0,em.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center",children:[(0,em.jsxs)("div",{className:"mb-6",children:[(0,em.jsx)("div",{className:"w-16 h-16 bg-[#333333] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,em.jsx)(nm,{size:32,strokeWidth:2.5,className:"text-white"})}),(0,em.jsx)("h1",{className:"text-2xl font-bold text-[#333333] mb-2",children:"Habit Tracker"}),(0,em.jsx)("p",{className:"text-[#333333] opacity-70 mb-4",children:"Sign in with your Google account to start tracking your habits and goals"}),(0,em.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4 text-left",children:[(0,em.jsx)("h3",{className:"font-bold text-yellow-800 mb-2",children:"Firebase Setup Required"}),(0,em.jsx)("p",{className:"text-sm text-yellow-700 mb-2",children:"To use this app, you need to set up Firebase:"}),(0,em.jsxs)("ol",{className:"text-xs text-yellow-700 space-y-1 list-decimal list-inside",children:[(0,em.jsx)("li",{children:"Create a Firebase project at console.firebase.google.com"}),(0,em.jsx)("li",{children:"Enable Authentication (Google provider)"}),(0,em.jsx)("li",{children:"Enable Firestore Database"}),(0,em.jsx)("li",{children:"Copy .env.example to .env and add your Firebase config"}),(0,em.jsx)("li",{children:"Restart the development server"})]})]})]}),(0,em.jsxs)("button",{onClick:c,className:"w-full flex items-center justify-center gap-3 bg-[#333333] text-white py-4 rounded-lg hover:bg-black font-bold uppercase text-sm tracking-wider shadow-lg transition-all hover:shadow-xl hover:scale-[1.02]",children:[(0,em.jsx)(rm,{size:20,strokeWidth:2.5}),"Sign in with Google"]}),(0,em.jsx)("p",{className:"text-xs text-[#333333] opacity-50 mt-4",children:"Your data will be securely stored in the cloud"})]})})};const sm=function(){return(0,em.jsx)(im,{children:(0,em.jsx)(tm,{})})};i.createRoot(document.getElementById("root")).render((0,em.jsx)(r.StrictMode,{children:(0,em.jsx)(sm,{})}))})();
//# sourceMappingURL=main.cd4f82a3.js.map